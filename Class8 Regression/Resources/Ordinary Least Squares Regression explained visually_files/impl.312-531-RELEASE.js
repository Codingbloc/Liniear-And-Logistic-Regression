/*! 312-531-RELEASE 2018-06-28 */
function __trcCopyProps(a,b,c){for(d in a)b[d]=a[d];if(c)for(var d in c)b[d]=c[d];return b}function __trcFromError(a){return TRC.Browser.ie?a.message+"["+a.number+": "+a.name+"]":a.message?a.message+(a.fileName?a.fileName+":"+a.lineNumber:""):a}function __trcClientTimestamp(){var a=new Date,b=a.getHours(),c=a.getMinutes(),d=a.getSeconds()+a.getMilliseconds()/1e3;return(10>b?"0":"")+b+":"+(10>c?"0":"")+c+":"+(10>d?"0":"")+d.toFixed(3)}function __trcLog(a,b){if(TRC.pConsole("page",TRC.modDebug.getType(a),b,b),"0"==a&&TRC.pConsole("errors",TRC.modDebug.getType(a),b,b),!(window.trc_debug_level<a)){var c=Array.prototype.slice.call(arguments,2);c.length>0&&(b+="("+c.join(",")+")"),"object"==typeof window.console&&console.log(b),(document.cookie.search("taboola-debug")>0||a<=window.trc_debug_level)&&TRC.modDebug.logMessageToServer(a,b)}}function __trcError(a,b){__trcLog(0,a+(b?": "+__trcFromError(b):"")),b&&b.stack&&"undefined"!=typeof window.console&&console.trace&&console.trace()}function __trcDebug(){var a=Array.prototype.slice.call(arguments);a.unshift(3),__trcLog.apply(null,a)}function __trcInfo(){var a=Array.prototype.slice.call(arguments);a.unshift(2),__trcLog.apply(null,a)}function __trcWarn(){var a=Array.prototype.slice.call(arguments);a.unshift(1),__trcLog.apply(null,a)}function __trcDOMWalker(a,b){for(b(a),a=a.firstChild;a;)arguments.callee(a,b),a=a.nextSibling}function __trcPurgeEventHandlers(a){try{__trcDOMWalker(a,function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=null)})}catch(b){}}function __trcJSONify(a){function b(a){return'"'+a.replace(/[\s\S]/g,function(a){switch(a){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}return a})+'"'}function c(a){for(var b=[],c=0;c<a.length;c++)b[c]=__trcJSONify(a[c]);return b}function d(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(b(d)+":"+__trcJSONify(a[d]));return c}return window.JSON&&window.JSON.stringify&&window.TRCImpl&&window.TRCImpl.global["use-native-json-stringify"]?window.JSON.stringify(a):a instanceof Array?"["+c(a).join(",")+"]":a instanceof Object?"{"+d(a).join(",")+"}":null===a?"null":"string"==typeof a?b(a):"undefined"==typeof a?"undefined":a.toString()}function __trcGetMargins(a){var b=parseInt(document.trcGetCurrentStyle(a,"margin-bottom")),c=parseInt(document.trcGetCurrentStyle(a,"margin-top"));return(isNaN(c)?0:c)+(isNaN(b)?0:b)}function __trcAttachResize(a,b){a.attachEvent?a.attachEvent("onresize",b):("object"!=typeof a.resizeInt&&(a.resizeInt={}),a.resizeInt[b]=TRC.Interval.set(function(a){return"undefined"==typeof a.sourceWidth||"undefined"==typeof a.sourceHeight?(a.sourceWidth=a.clientWidth,void(a.sourceHeight=a.clientHeight)):a.sourceWidth!=a.clientWidth||a.sourceHeight!=a.clientHeight?(delete a.sourceWidth,delete a.clientWidth,void b.apply(a)):void 0},250,a))}function __trcDetachResize(a,b){if(TRC.Browser.ie)a.detachEvent("onresize",b);else{"object"!=typeof a.resizeInt&&(a.resizeInt={});try{a.resizeInt[b]&&TRC.Interval.clear(a.resizeInt[b]),delete a.resizeInt[b]}catch(c){}}}function __trcTrim(a){return a.replace(/^\s+|\s+$/g,"")}function __trcGetElementsByClass(a,b,c){var d,e,f,g=[],h=new RegExp("(^|\\s)"+a+"(\\s|$)");for(c=c||document,b=b||"*",d=c.getElementsByTagName(b),e=d.length,f=0;e>f;f++)h.test(d[f].className)&&g.push(d[f]);return g}function __trcToArray(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b.push([c,a[c]])}function __trcObjectCreate(a){if("function"==typeof Object.create)return Object.create(a);var b=function(){};if(a!==Object(a)&&null!==a)throw TypeError("Argument must be an object, or null");b.prototype=a||{};var c=new b;return b.prototype=null,null===a&&(c.__proto__=null),c}Gettext=function(a){return{gettext:function(){return""},strargs:function(){return""}}},Gettext.strargs=function(){return""},function(a,b,c){"use strict";var d,e=b.createElement("div"),f=b.createElement("div"),g=function(a,b){return a.classList?a.classList.add(b):(c.dom.removeClass(a,b),void(a.className+=" "+b))},h=function(a){var b=a.which||a.keyCode;27===b&&o()},i=function(a){var b=a.target||a.srcElement;(b===f||"trc_close_modal"===b.id)&&(c.dom.stopEvent(a),o())},j=function(a){/http(s)?:\/\/www\.taboola\.com/.test(a.origin)&&a.data&&1025===+a.data&&o()},k=function(a){var b=[];return b.push("<a id=trc_close_modal class=trc_modal_close>&times;</a>"),b.push('<iframe class=trc_modal_frame scrolling=no frameborder=0 allowTransparency=true src="'),b.push(a),b.push('"></iframe>'),b.join("")},l=function(a,b){for(;a.tagName.toUpperCase()!==b.toUpperCase();)a=a.parentNode;return a},m=function(b){a.showModalDialog(b.href,"","dialogHeight: 550px; dialogWidth: 660px")},n=function(g){var n=l(g.target||g.srcElement,"A");return g&&c.dom.stopEvent(g),c.Browser.ieUpto(7)?m(n):(d||v(),e.innerHTML=k(n.href),c.dom.removeClass(f,"trc_modal_hidden"),c.dom.removeClass(e,"trc_modal_hidden"),c.dom.on(b,"keyup",h),c.dom.on(b,"click",i),c.dom.on(b.getElementById("trc_close_modal"),"click",i),void c.dom.on(a,"message",j))},o=function(){g(f,"trc_modal_hidden"),g(e,"trc_modal_hidden"),c.dom.off(b,"keyup",h),c.dom.off(b,"click",i),c.dom.off(b.getElementById("trc_close_modal"),"click",i),c.dom.off(a,"message",j)},p=function(a){var c=b.createElement("div");return c.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),r+="#"+c.id+" ",a&&a.appendChild(c),c},q=function(a){var b=[];return b.push(a+'.trc_modal_dialog { width:660px; height:550px; box-shadow: black 0 0 18px 0;font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; padding:12px;border:2px solid #417cc3;border-radius:10px;position:fixed;z-index:99999;background:#f7f9fc;top:50%;left:50%;margin-top:-250px;margin-left:-330px;-moz-box-sizing: content-box; -webkit-box-sizing: content-box;box-sizing: content-box;}'),b.push(a+".trc_modal_mask {z-index:1040;position:fixed;top:0;left:0;right:0;bottom:0;background:#000;opacity:0.5;filter: alpha(opacity=50);}"),b.push(a+".trc_modal_close {font-family:sans-serif!important;width:30px!important;height:30px!important;font-size: 30px!important;font-weight: bold!important;line-height: 28px!important;color: #fff!important;text-shadow: 0 1px 0 #000;opacity: 0.9;filter: alpha(opacity=90);background: #417cc3;padding: 0;cursor: pointer;border: 0;-webkit-appearance: none;text-align: center;border-radius: 15px!important;position:absolute!important;top: -13px;right: -13px;text-decoration: none!important;z-index: 9;}"),b.push(a+".trc_modal_close:hover {text-decoration: none!important;opacity: 1!important;filter: alpha(opacity=100)!important;}"),b.push(a+".trc_modal_hidden {display:none!important;}"),b.push(a+".trc_modal_frame {width: 100%!important;height: 550px!important;}"),b.join("")},r="",s=p(),t=p(s),u=p(t),v=function(){f.className="trc_modal_mask trc_modal_hidden",e.className="trc_modal_dialog trc_modal_hidden",u.appendChild(f),u.appendChild(e),b.body.appendChild(s),c.dom.injectStyle(q(r)),d=!0};c.aboutUs={open:n,close:o}}(window,document,TRC),function(a,b){TRC.blocker=TRC.blocker||{states:{ABP_DETECTION_DISABLED:-2,ABP_NOT_DETECTED:0,ABP_DETECTED:1},createBlockDetectionDiv:function(a){var c=b.createElement("div");return c.className=a,c.appendChild(b.createTextNode(".")),b.documentElement.appendChild(c),c},isBlockDetectedOnDiv:function(a){return a.offsetHeight?(TRC.pConsole("page","warn","No AdBlockPlus detected on div with class: "+a.className),!1):(TRC.pConsole("page","warn","AdBlockPlus detected on div with class: "+a.className),!0)},isBlockDetectedOnClassNames:function(a){var c,d,e=a.length;for(c=0;e>c;c++)if(a[c]){d=this.createBlockDetectionDiv(a[c]);try{if(this.isBlockDetectedOnDiv(d))return!0}catch(f){TRC.pConsole("page","error","unable to inspect offsetHeight of div with class: "+d.className)}finally{b.documentElement.removeChild(d)}}return!1},getBlockedState:function(a,b){return this.blockedState!==this.states.ABP_DETECTED||b?(a?this.blockedState=this.isBlockDetectedOnClassNames(a)?this.states.ABP_DETECTED:this.states.ABP_NOT_DETECTED:this.blockedState=this.states.ABP_NOT_DETECTED,this.blockedState):this.blockedState}}}(window,document),function(){TRC.amp=amp={};var a,b;amp.getRboxContainer=function(){return a||(a=document.getElementsByClassName("trc_rbox_container")[0]),a},amp.getAMPContainer=function(){return b?b:b=document.getElementById("c")},amp.setAMPmodule=function(a){a.manualVisibilityTrigger=!0,a.disableReadMore=!0,a.slider=!1;var b=null,c=this.sendAMPResize,d=this.sendAMPFeedResize,e=a.global["amp-neg-threshold"]||5,f=a.global["amp-pos-threshold"]||100,g=a.global["amp-debounce-time"]||200,h="undefined"!=typeof a.amp_disable_resize?a.amp_disable_resize:a.global["amp-disable-resize"],i="function"==typeof a.global["amp-onrender"]?a.global["amp-onrender"]:function(){return!0};amp.getAMPContainer().classList.add("tbl-amp-container"),TRC.eventDelegator.subscribe("onrender",function(a){var j={negative:e,positive:f};return!i(a)||h?!1:(null===b&&(b=a.container.placementData&&a.container.placementData.isFeedCard?!0:!1),void(b?(amp.getAMPContainer().style.position="static",d()):(c(j,TRC.lastVisibleRects?TRC.lastVisibleRects:null),TRC.listen("visible::"+a.placement,TRC.util.debounce(c.trcBind(this,j),g,!1,this)))))})},amp.sendAMPResize=function(a,b){var c=b?b.boundingClientRect.height:TRC.dom.getWindowHeight(),d=amp.getRboxContainer().scrollHeight,e=c-d,f=0>e?a.negative:a.positive;Math.abs(e)>=f&&window.context.requestResize(void 0,d)},amp.sendAMPFeedResize=function(){window.context.requestResize(void 0,amp.getAMPContainer().offsetHeight+50),TRC.dispatch("ampFeedResize")}}(),function(a,b){TRC.aspect={before:function(a,b,c,d){var e=a[b];a[b]=function(){return d&&(a[b]=e),c.apply(this,arguments),e.apply(this,arguments)}},after:function(a,b,c,d){var e=a[b];a[b]=function(){d&&(a[b]=e);var f=e.apply(this,arguments);return c.apply(this,arguments),f}}}}(window,document),function(a,b){var c=function(){this.dom=b.getElementById?1:!1,this.dom&&((b.importNode?0:1)||(this.dom=2),(b.normalizeDocument?0:1)||(this.dom=3));var c=this.opera=a.opera?9:!1;if(this.opera&&((navigator.geolocation?0:1)||(this.opera=10),(a.opera.version?0:1)||(this.opera=parseFloat(a.opera.version()))),this.ie=function(){return navigator.userAgent.match(/Trident/)&&/rv:11.0/i.test(navigator.userAgent)?11:"object"!=typeof b.all||c?!1:"CSS1Compat"!=b.compatMode?6:a.XMLHttpRequest?Object.defineProperty?"object"!=typeof DOMImplementation||"function"!=typeof DOMImplementation.prototype.createDocument?8:a.msMatchMedia?10:9:7:6}(),this.webkit=(a.openDatabase?!0:!1)&&!this.opera,this.chrome=this.webkit&&a.chrome?!0:!1,this.safari=this.webkit&&!this.chrome,this.safari&&((b.compareDocumentPosition?0:1)||(this.safari=4),(navigator.registerContentHandler?0:1)||(this.safari=5),(a.matchMedia?0:1)||(this.safari=6)),this.firefox=!!navigator.userAgent.match(/firefox/i),this.firefox){try{"function"==typeof b.createElement("canvas").getContext&&(this.firefox=1.5)}catch(d){}"object"==typeof a.globalStorage&&(this.firefox=2),(b.elementFromPoint?0:1)||(this.firefox=3),(b.querySelector?0:1)||(this.firefox=3.5),(b.getElementsByTagName("head")[0].mozMatchesSelector?0:1)||(this.firefox=3.6),(a.Uint8Array?0:1)||(this.firefox=4),(Function.prototype.isGenerator?0:1)||(this.firefox=5),(a.matchMedia?0:1)||(this.firefox=6),(a.FileReader&&a.FileReader.prototype.readAsArrayBuffer?0:1)||(this.firefox=7),(b.head&&b.head.insertAdjacentHTML?0:1)||(this.firefox=8)}for(var e=["firefox","chrome","safari","webkit","khtml","ie","opera"],f=0;f<e.length;f++)!function(a,b){a[b+"Upto"]=function(a){return this[b]&&("number"!=typeof this[b]||this[b]<=a)},a[b+"Atleast"]=function(a){return this[b]&&("number"!=typeof this[b]||this[b]>=a)}}(this,e[f]);return this.compatibility={lineClamp:function(){return"undefined"!=typeof b.createElement("div").style.webkitLineClamp}(),cssTransforms:function(){for(var a=b.createElement("div"),c=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"],d=0;d<c.length;d++)if("undefined"!=typeof a.style[c[d]])return!0;return!1}(),passiveEvents:function(){var a=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){a=!0}}))}catch(b){}return a}()},this},d=function(){this.isTouchDevice="ontouchstart"in window,this.deviceType=function(){var a=navigator.userAgent.match(/iPhone|iPod|iPad/i);return a?a[0]:"other"}()};TRC.Browser=new c,TRC.Device=new d}(window,document),function(){function a(){k.gdprApplies=!0,k.consentData=j.taboola_default,k.consentPreset="taboola_default"}function b(a,b,c){n[a]&&m[a].push(c)}function c(a){a.cmpStatus=g,e(a)}function d(){return window.__cmp?(window.__cmp("getConsentData",null,c),!0):!1}function e(a){k=TRC.util.merge(k,a),f()}function f(){var a=m.getConsentData;if(a.pushOverride!==!0){a.push=function(a){"function"==typeof a&&a(k)},a.pushOverride=!0;for(var b=0;b<a.length;b++)a[b](k)}}var g=0,h=1,i=3,j={taboola_default:"BOOx2jhOOx2mtAKABDENAqAAAAAYSAAA"},k={cmpStatus:i},l="",m={getConsentData:[]},n={getConsentData:1};TRC.consent=TRC.consent||{},TRC.consent.setPresets=function(a){j=TRC.util.merge(j,a)},TRC.consent.setConsent=function(b){TRC.consent.hasCMP()?(a(),b&&(k.cmpStatus=b.consentData?g:k.cmpStatus,k.consentPreset=b.consentData?"":k.consentPreset,k=TRC.util.merge(k,b),k.consentData=j[b.consentPreset]||k.consentData),e()):__trcError("TRC.consent.setConsent:- no consent source was set")},TRC.consent.getConsentStatus=function(){return k.cmpStatus},TRC.consent.hasCMP=function(){return!!l},TRC.consent.setConsentSource=function(c,e){return a(),l=c.source.toLowerCase()||l,j=TRC.util.merge(j,c.presets),TRC.cmp=b,k.cmpStatus=h,e&&(j=e),"iab"===l?d():!0}}(),TRC.css=TRC.css||{},TRC.css.utils=function(a){function b(a,b){var c,d,e,g,h=a.indexOf("@media")>=0?a.split("{")[0]+"{":"";return a=h?a.substring(a.indexOf("{")+1):a,c=a.split("{"),d=c.length>1?c[0].split("."):a.split("."),g=d.length,2>g?h+a:(e=d[1],__trcTrim(e)===r?h+a:(b[__trcTrim(e)]?(f(1),d[0]="#"+b[__trcTrim(e)].cssDivsArr.join(" #")+" "+d[0]):(f(p),d[0]=i(d.join("."))+d[0]),c.length>1?(c[0]=d.join("."),h+c.join("{")):h+d.join(".")))}function c(a,c){var e=a.split(","),f=e.length,i="";if(h()>l&&(i=m,__trcDebug("Number of augmented css rules before Split : "+h()),g(0)),null===c)return d(2>f?a:e,i);if(2>f)return i+b(a,c);for(var j=0;f>j&&(e[j]=b(e[j],c),!(e[j].indexOf("{")>=0&&f-1>j));j++);return i+e.join(",")}function d(a,b){var c=a.length;if("string"==typeof a)return f(1),b+a;for(var d=0;c>d&&(f(1),!(a[d].indexOf("{")>=0&&c-1>d));d++);return b+a.join(",")}function e(a,b){var d=a.split("}"),e=d.length;if(2>e)return c(a,b);for(var f=0;e>f;f++)d[f]=c(d[f],b);return d.join("}")}function f(a){o+=a}function g(a){o=a}function h(){return o}function i(a){return j(!1,!1).replace(new RegExp("{class}","gm"),a)}function j(a,b){var c;if("object"==typeof a){q="";for(var d in a)"string"==typeof d&&""!==d&&(c="#"+a[d].cssDivsArr.join(" #")+" ",q=q+c+" "+n),p++;return q="#"+b.iframe.join(" #")+" "+n+"#"+b.topDiv.join(" #")+" "+n+q.slice(0,q.length-n.length)}return q}var k,l=4040,m=" style_split",n="{class},",o=0,p=0,q="",r="vidiscovery-note";return k={setStyleTextIdPrefix:function(a,b,c){b&&j(b,c);var d=e(a,b);return __trcDebug("Number of augmented css rules left : "+h()),g(0),d},setStyleElements:function(a){var b=a.split(m),c=b.length;c>1&&TRC.pConsole("page","debug","splitting css","");for(var d=0;c>d;d++)TRC.dom.injectStyle(b[d])},setStyleToElements:function(a,b,c){try{var d=[],e=b.split(","),f=[];"Array"==__trcTypeOf(a)?d=a:d.push(a);for(var g=0,h=d.length;h>g;g++){var i=0;for(e.length;i<len;i++)"inline"===c&&(f=syles[i].split(":"),d[g].style[__trcTrim(f[0])]=__trcTrim(f[1]))}}catch(j){__trcError("Error in TRC.css.utils.setStyleToElements "+j.message)}},setStyleProperty:function(a,b,c,d){var e=a.style.cssText;e+=";"+b+":"+c+(d?"!important":""),a.style.cssText=e},generateCssRuleWithVendorPrefixes:function(a,b){for(var c=[" -webkit-","-moz-","-ms-","-o-"],d="{property}: {value};",e=d.replace("{property}",a).replace("{value}",b),f=[],g=0;g<c.length;g++)f.push(c[g]+e);return f.push(e),f.join(" ")},escape:function(){return window.CSS&&window.CSS.escape||function(a){var b=function(a){this.message=a};b.prototype=new Error,b.prototype.name="InvalidCharacterError";for(var c,d=String(a),e=d.length,f=-1,g="",h=d.charCodeAt(0);++f<e;){if(c=d.charCodeAt(f),0==c)throw new b("Invalid character: the input contains U+0000.");g+=c>=1&&31>=c||127==c||0==f&&c>=48&&57>=c||1==f&&c>=48&&57>=c&&45==h?"\\"+c.toString(16)+" ":c>=128||45==c||95==c||c>=48&&57>=c||c>=65&&90>=c||c>=97&&122>=c?d.charAt(f):"\\"+d.charAt(f)}return g}}()},a._trcIsUTactive&&(k.classSplit=b,k.multiRuleSplit=c,k.ruleSplit=e,k.addRuleCounter=f,k.getCssIdsTemplate=j),k}(window),TRC.css.Stack=function(a,b){for(var c=a.idPrefix||"tab_",d=a.stack,e={},f=document.createDocumentFragment(),g=b?document.head.appendChild(document.createElement("style")):null,h=0;h<d.length;h++)e[d[h].type]=TRC.dom.injectStyle(d[h].cssText||"",f,!0,c+d[h].type);this.injectAllStyles=function(){g?document.head.insertBefore(f,g):document.head.appendChild(f)},this.addStyle=function(a,b,d){var g=e[a];b&&(g?g.styleSheet?g.styleSheet.cssText+=b:g.appendChild(document.createTextNode(b)):e[a]=TRC.dom.injectStyle(b,d?document:f,!0,c+a))}},TRC.css.responsive=function(){function a(a,b){var c=TRC.Browser.ieUpto(7)?99:99.99;return(c-a*b)/a}function b(b,c,d,e,f,g){var h=a(b,d),i="rtl"===g?"right":"left",j="."+c+" .videoCube{width: "+h+"%; position: relative; float: "+i+"; margin: 0 0 "+d+"% 0; margin-"+i+": "+d+"%;}";f?e.push(TRC.css.utils.setStyleTextIdPrefix(j,TRC.modesCache,TRC.lightBoxCssReset)):e.push(j)}function c(a,b,c,e,f,g){var h="rtl"===g?"right":"left",i="rtl"===g?"left":"right",j=" .trc_rbox_div .videoCube {width: "+(1==a.cells?"100":"48")+"%;}",k=" .trc_header_left_column {width: "+(1==a.cells?"100":"48")+"%;}",l=" .trc_header_right_column {display: "+(1==a.cells?"none":"inline")+";}",m="."+b+" .trc_rbox_div div.videoCube:nth-of-type(-n+"+a.rows+"){float:"+h+";clear:"+h+";}",n="."+b+" .trc_rbox_div div.videoCube:nth-of-type(n+"+(a.rows+1)+"){float:none;clear:"+i+";margin-"+h+":auto;}";f?d(a,b,c,e,g):e?(c.push(TRC.css.utils.setStyleTextIdPrefix(n,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix(m,TRC.modesCache,TRC.lightBoxCssReset))):(c.push(n),c.push(m)),e?(c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+j,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+k,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+l,TRC.modesCache,TRC.lightBoxCssReset))):(c.push("."+b+j),c.push("."+b+k),c.push("."+b+l))}function d(a,b,c,d,e){var f,g,h,i="rtl"===e?"right":"left",j="rtl"===e?"left":"right",k=a.rows*a.cells-a.rows;for(f=1;f<=a.rows;f++)g="."+b+" .trc_rbox_div .videoCube_"+f+"_child{float:"+i+";clear:"+i+";}",d?c.push(TRC.css.utils.setStyleTextIdPrefix(g,TRC.modesCache,TRC.lightBoxCssReset)):c.push(g);for(f=a.rows+1;k>=f;f++)h="."+b+".trc_rbox_div  .videoCube_"+f+"_child{float:none;clear:"+j+";margin-"+i+":auto;}",d?c.push(TRC.css.utils.setStyleTextIdPrefix(h,TRC.modesCache,TRC.lightBoxCssReset)):c.push(h)}function e(a,b,c,d,e,g,h,j){var k=a.rows*a.cells,l="."+b+" div.videoCube:nth-of-type(-n+"+k+"){display:block;visibility:visible;}",m="."+b+" div.videoCube:nth-of-type(n+"+(k+1)+"){display:none;visibility:hidden;}";e?i(c,d,k,b,g):g?(c.push(TRC.css.utils.setStyleTextIdPrefix(l,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix(m,TRC.modesCache,TRC.lightBoxCssReset))):(c.push(l),c.push(m)),h&&f(a,b,c,j)}function f(a,b,c,d){var e=a.cells,f=e/d*100;c.push("."+b+" .trc_rbox_div { width: "+f+"%; }"),c.push("."+b+" .trc_rbox_outer { overflow-x: scroll; -webkit-overflow-scrolling: touch; }")}function g(a,b,c,d,e){var f="rtl"===c?"right":"left";return d?"."+b+" .trc_rbox_div{margin-"+f+":-"+a.margin*a.cells/e+"%;}":"."+b+" .trc_rbox_outer{margin-"+f+":-"+a.margin+"%;}"}function h(a,c,d,e,f,h,i,k){var l=1==a.cells?"video-label-box":"trc-main-label",m="."+c+" .trc_rbox_outer .videoCube ."+l+" {height:auto;}",n="."+c+" .trc_rbox_outer .videoCube {margin-bottom:10px;}",o=g(a,c,h,i,k),p=a.rows*a.cells,q=TRCImpl.global["disable-one-row-widget-auto-height"],r=(i||!q)&&1==a.rows;(1==a.cells||r)&&(e?j(d,c,f,p):f?(d.push(TRC.css.utils.setStyleTextIdPrefix(m,TRC.modesCache,TRC.lightBoxCssReset)),d.push(TRC.css.utils.setStyleTextIdPrefix(n,TRC.modesCache,TRC.lightBoxCssReset))):(d.push(m),d.push(n))),f?d.push(TRC.css.utils.setStyleTextIdPrefix(o,TRC.modesCache,TRC.lightBoxCssReset)):d.push(o),d.push("."+c+" .videoCube_aspect{padding-bottom:"+a.ratio+"%; width: 100%;}"),b(a.cells,c,a.margin,d,f,h)}function i(a,b,c,d,e){var f;for(f=1;c>=f;f++)e?a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+f+"_child{display:block;visibility:visible;}",TRC.modesCache,TRC.lightBoxCssReset)):a.push("."+d+" .videoCube_"+f+"_child{display:block;visibility:visible;}");for(f=c+1;b>=f;f++)e?a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+f+"_child{display:none;visibility:hidden;}",TRC.modesCache,TRC.lightBoxCssReset)):a.push("."+d+" .videoCube_"+f+"_child{display:none;visibility:hidden;}")}function j(a,b,c,d){for(var e,f,g=1;d>=g;g++)e="."+b+" .videoCube_"+g+"_child .video-label-box {height:auto;}",f="."+b+" .videoCube_"+g+"_child{margin-bottom:10px;}",c?(a.push(TRC.css.utils.setStyleTextIdPrefix(e,TRC.modesCache,TRC.lightBoxCssReset)),a.push(TRC.css.utils.setStyleTextIdPrefix(f,TRC.modesCache,TRC.lightBoxCssReset))):(a.push(e),a.push(f))}var k;return k={rulesToCssText:function(a,b,d,f,g,i,j,k){var l,m,n,o,p=[],q=TRC.Browser.ieUpto(8);for(l=0;m=b[l];l++)q||(n="undefined"!=typeof m.min||"undefined"!=typeof m.max,n&&p.push("@media screen and "),"undefined"!=typeof m.min&&(p.push("(min-width: "+m.min+"px) "),m.max&&p.push("and ")),"undefined"!=typeof m.max&&p.push("(max-width: "+m.max+"px) "),n&&p.push("{")),o=a+(q?"_rule"+l:""),g?c(m,o,p,f,q,i):h(m,o,p,q,f,i,j,k),e(m,o,p,d,q,f,j,k),!q&&n&&p.push("} ");return p.join("")},getRulePercentageWidth:a}}(),function(){TRC.DaisyChain=function(a,b){var c,d,e,f,g={},h="finish",i="active",j=0,k=0,l=TRC.text,m=i;this.normalizeTag=function(b,c){var d=a.global["normalize-provider-tag"];return"function"==typeof d?d(c.trc.tag.js,c,b,l.htmlUnescape):l.htmlUnescape(c.trc.tag.js)},this.addToChain=function(a,b){var c=b||a.trc.tag.pr;g[c]=a,j++,TRC.pConsole("mediation","debug","pushing in daisy chain ",a,"object")},this.renderAd=function(a){var d,i;try{return TRC.dispatch("trcContentReady",{container:b.container}),e&&TRC.Timeout.clear(e),m==h?(TRC.pConsole("mediation","info","passback rejected - daisy chain finished"),__trcWarn("passback rejected - daisy chain finished- "+c),!1):(this.incrementPriority(),(d=g[c])?(this.renderNextAd(d,a),!0):j>k?this.renderAd(a):(m=h,!1))}catch(l){return i=d&&d.trc.tag?d.trc.tag.jsid:c,__trcError("Error in DaisyChain.renderAd - "+i,l),f||(f=!0,this.renderAd()),!1}},this.renderNextAd=function(a,b){k++,a.trc.tag?this.renderScript(a):this.renderTaboola(a,b)},this.incrementPriority=function(){c?c++:c=1},this.renderTaboola=function(c,d){TRC.pConsole("mediation","debug","rendering taboola"),this.removeIframe(),b.response=c,m=h,d?d.loadScriptCallback(b.response):a.internalDrawRBox(b)},this.renderScript=function(c){var f=c.trc.tag;e=this.setDeferredAvailableEvent(f.uip,f.ri,a.global["mediation-tag-timeout"]||1e3),TRC.pConsole("mediation","debug","rendering script : "+f.jsid,e,"string"),d=d||TRC.ScriptRenderer.createIframe(b.container),f.normalizedTag=this.normalizeTag(d,c),TRC.ScriptRenderer.renderInIframe(d,f)},this.setDeferredAvailableEvent=function(b,c,d){return TRC.Timeout.set(function(){m=h,a.sendEvent("available",{ri:c,uip:b},null,!0),TRC.pConsole("mediation","debug","send available on placement : "+b)},d)},this.removeIframe=function(){d&&d.parentElement.removeChild(d)},TRC.pConsole("mediation","info","starting daisy chain on placement : "+b.placement)}}(),TRC.modDebug=function(a,b){function c(a){TRC.net.fireSimpleHttpRequest(a)}function d(a){switch(a){case 0:return"error";case.5:return"perf";case 1:return"warn";case 2:return"info";case 3:return"debug";case 4:return"map";default:return}}function e(b,c,e,f){var g=a.TRCImpl&&"thin"===a.TRCImpl.getSystemFlag("loaderType")?"-tl":"";return i.timeStamp+escape(e)+"&"+i.type+escape(d(b))+"&"+i.message+escape(c)+(trc_debug_level>1?"&"+i.debugLevel+trc_debug_level:"")+"&"+i.id+Math.floor(1e4*Math.random())+(a.TRC.version?"&cv="+a.TRC.version+g:"")+(f?"&"+j(f):"")}var f,g=TRC.PROTOCOL,h=2,i={timeStamp:"tim=",type:"type=",message:"msg=",debugLevel:"llvl=",id:"id="},j=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},k=function(){var a={};return{setMessageCache:function(b){a[b]?a[b]+=1:a[b]=1},getMessageCount:function(b){return a[b]?a[b]:0}}}();return f={logMessageToServer:function(b,d,f){if(k.setMessageCache(d),k.getMessageCount(d)<=h){var i=a.TRCImpl&&TRCImpl.domain?TRCImpl.domain:"trc.taboola.com",j=a.TRCImpl?TRCImpl["normalize-log-param"]("publisher",TRC.publisherId):TRC.publisherId,l=g+"//"+i+"/"+j+"/log/2/debug?"+e(b,d,__trcClientTimestamp(),f);c(l)}},getType:d},a._trcIsUTactive&&(f.getType=d,f.messageCache=k,f.getLogParams=e),f}(window,document),function(a,b){TRC.DeepLinking={isAppStoreURL:function(a,b){var c=/^(market|itms-apps|ms-windows-store)\:\/\//,d=b&&new RegExp(b);return c.test(a)||!!b&&d.test(a)},openDeepLink:function(a){var b=document.createElement("iframe");return b.src=a,b.className="tbl-deep-link",b.height=0,b.width=0,document.body.appendChild(b),b}}}(window,document),function(){TRC.DefaultVideoUnitLoader=function(a){this.videoConfig=a},TRC.DefaultVideoUnitLoader.prototype.loadUnit=function(videoCallbackData){return eval(videoCallbackData.tags[0].url)},TRC.DefaultVideoUnitLoader.prototype.getVideoContainerSelector=function(a){var b;return this.videoConfig.position?(b=this.createVideoContainer(a),"#"+b.id):null},TRC.DefaultVideoUnitLoader.prototype.createVideoContainer=function(a){var b,c=document.createElement("div"),d=a._trc_container;if(a.id?c.id=a.id:c.id=Math.floor(2147483648*Math.random()).toString(36),c.id+="-video",!d)return __trcWarn("Cannot generate a selector for widget adjacent video container - widget container is not found"),null;switch(this.videoConfig.position){case"above":b=d;break;case"below":b=d.nextSibling;break;default:__trcWarn("Unknown position in video config: "+this.videoConfig.position)}return a.insertBefore(c,b),c}}(),function(a,b){function c(a){try{if(f&&(TRC.Browser.ieUpto(10)?b.detachEvent("onreadystatechange",f):(b.removeEventListener("DOMContentLoaded",arguments.callee,!1),TRC.Interval.clear(f))),TRC.dom.isReady)return;TRC.dom.isReady=!0,TRC.dom.onReady=function(a){a()};for(var c=0;c<e.length;c++)e[c]()}catch(d){__trcError("Error in DOMReady processing",d)}}function d(){return a.pageXOffset||b.body.scrollLeft}var e=[],f=null,g=!1;TRC.dom={injectedStyles:[],isReady:!1,onReady:function(a,b){return b?void TRC.Timeout.set(a,10):void e.push(a)},init:function(){if(!g){if(g=!0,b.readyState&&/loaded|complete/.test(b.readyState))return void c(!0);if(TRC.Browser.ieUpto(10)){var d=b.createElement("div");!function(){try{d.doScroll("left")}catch(a){return void(d.to=TRC.Timeout.set(arguments.callee,10))}c()}(),b.attachEvent("onreadystatechange",f=function(){/loaded|complete/.test(b.readyState)&&(TRC.Timeout.clear(d.to),c())})}else{if(/interactive/.test(b.readyState))return void c(!0);b.addEventListener("DOMContentLoaded",c,!1),f=TRC.Interval.set(function(){/loaded|complete|interactive/.test(b.readyState)&&c()},10)}var e=a.onload;a.onload=function(){if(c(),e)try{e()}catch(a){}}}},on:function(){return a.addEventListener?function(a,b,c){var d;"touchstart"!==b&&"touchmove"!==b||!TRC.Browser.compatibility.passiveEvents||(d={passive:!0}),a.addEventListener(b,c,d)}:a.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:void(el["on"+sType]=fn)}(),off:function(){return a.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:a.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:void(el["on"+sType]=fn)}(),getText:function(a){return a.textContent||a.innerText||a.innerHTML},lineHeight:function(a){var b;return a.clineHeight||(b=a.style.display,a.style.display="inline-block",a.clineHeight=a.clientHeight,a.style.display=b),a.clineHeight},isAncestor:function(a,b,c){for(b=c?b:b.parentNode;b&&b!==a&&9!=b.nodeType;)b=b.parentNode;return a===b},injectStyle:function(a,c,d,e){var f=document.createElement("style"),c=c||b;return f.type="text/css",e&&(f.id=e),c.head?c.head.appendChild(f):c.appendChild(f),f.styleSheet?f.styleSheet.cssText=a:f.appendChild(document.createTextNode(a)),d!==!0&&(this.injectStyleOverflowFix(a),TRC.styleInjected=!0),this.injectedStyles.push(f),f},injectStyleOverflowFix:function(a){if(TRC.Browser.ie&&31==document.styleSheets.length){var c=document.getElementById("trc_rbox_css_loaded");if(null==c&&(c=document.createElement("div"),c.id="trc_rbox_css_loaded",b.body.appendChild(c)),"hidden"!=document.trcGetCurrentStyle(c,"overflow")){var d=a.split("}"),e=null;try{for(var f=0;f<document.styleSheets.length;f++){var g=document.styleSheets[f];if(d.length+g.rules.length<=4096){e=g;break}}null!=e&&(e.cssText+=a)}catch(h){__trcError("Error in injectStyleOverflowFix processing",h)}}}},removeAllInjectedStyleSheets:function(){for(var a,b=0;b<this.injectedStyles.length;b++)a=this.injectedStyles[b],a.parentNode&&a.parentNode.removeChild(a);this.injectedStyles=[],TRC.styleInjected=!1},swapElements:function(a,b,c){return c&&TRC.dom.purgeEventHandlers(a),a.parentNode.replaceChild(b,a),b},iterateOnNode:function(a,b){for(b(a),a=a.firstChild;a;)arguments.callee(a,b),a=a.nextSibling},purgeEventHandlers:function(a){try{TRC.dom.iterateOnNode(a,function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=null)})}catch(b){__trcError("TRC.dom.purgeEventHandlers : ",b.message)}},clearInnerElements:function(a){for(var b;b=a.firstChild;)this.purgeEventHandlers(b),a.removeChild(b)},stopEvent:function(a){return a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1},addClass:function(a,b){a.className+=" "+b+" "},removeClass:function(a,b){var c;return a.classList?a.classList.remove(b):(c=new RegExp("s*"+b,"g"),void(a.className=a.className.replace(c,"")))},elementMatchesSelector:function(a,b){var c,d=["matches","msMatchesSelector","oMatchesSelector","mozMatchesSelector","webkitMatchesSelector"];return d.some(function(b){return a[b]&&(c=b),a[b]}),c?a[c](b):null},closest:function(a,b){if(a.closest)return a.closest(b);for(;!this.elementMatchesSelector(a,b);)if(a=a.parentElement,!a)return null;return a},getWindowWidth:function(){return window.innerWidth?this.getWindowWidth=function(){return window.innerWidth}:0!=document.documentElement.clientWidth?this.getWindowWidth=function(){return document.documentElement.clientWidth}:this.getWindowWidth=function(){return document.body.clientWidth},this.getWindowWidth()},getWindowHeight:function(){return window.innerHeight?this.getWindowHeight=function(){return window.innerHeight}:0!=document.documentElement.clientHeight?this.getWindowHeight=function(){return document.documentElement.clientHeight}:this.getWindowHeight=function(){return document.body.clientHeight},this.getWindowHeight()},getPageVerticalScroll:function(){return a.pageYOffset||b.body.scrollTop},getScrollTop:function(b){return b===a?this.getPageVerticalScroll()||document.documentElement.scrollTop:b.scrollTop},getViewportVerticalRange:function(){var a=this.getPageVerticalScroll(),b=a+this.getWindowHeight();return{min:a,max:b}},getViewportHorizontalRange:function(){var a=d(),b=a+this.getWindowWidth();return{min:a,max:b}},getElementRect:function(a){return a.getBoundingClientRect()},isInIframe:function(b){try{return a.top===a.self?!1:!0}catch(c){return"boolean"==typeof b?b:!1}},createAugmentingContainers:function(a,b){for(var c,d=[],e=null,f=0;a>f;f++)c=this.createAugmentingContainer(e),
e=c,d.push(c);return b&&d[a-1].appendChild(b),d},createAugmentingContainer:function(a){var c=b.createElement("div");return c.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),a&&a.appendChild(c),c},generateAugmentationPrefix:function(a){for(var b="",c=0;c<a.length;c++)b+="#"+a[c].id+" ";return b},isHighDensity:function(){var a=window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3;return function(){return a}}(),isRetina:function(){var a=(window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>2)&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent);return function(){return a}}(),isSmartPhone:function(){var a=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 320px) and (max-device-width : 480px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent);return function(){return a}}(),isTablet:function(){var a=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 768px) and (max-device-width : 1024px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent);return function(){return a}}(),isDesktop:function(){return!(this.isTablet()||this.isSmartPhone())}}}(window,document),function(a,b){"use strict";function c(a,b){a.innerHTML=g._tokenizeSingle(h.dom.getText(a),b)}function d(a,b){if(a){var c=f(function(a){return a.className.search("title")>=0},a,"span"),d=f(function(a){return a.className.search("description")>=0},a,"span");b.call(this,a,c,d)}}function e(a){return function(b){for(var c in b)if(b.hasOwnProperty(c)){var e=b[c];e.boxes.forEach(function(b){d(b.labelsBox,a),d(b.preLabelsBox,a)})}}}var f,g={},h=a.TRC;h.Ellipsis=g,g.doEllipsis=function(a){f=f||h.implClasses.TRCRBox.prototype.findElement,h.ellipsisPerf&&console.timeStamp("Taboola new ellipsis"),h.performance&&h.performance.mark("7.2.1",null,"Ellipsis","all","SmartEllipsis",h.PerfEvenType.START),g.measure(a),g.renderEllipsis(a),h.performance&&h.performance.mark("7.2.9",null,"Ellipsis","all","SmartEllipsis",h.PerfEvenType.STOP)},g.tokenize=function(a,b){return b=b in g._tokenizeStrategies?b:"word",e(function(a,d,e){a.trcEllipsisTokenized&&delete a.trcEllipsisTokenized;var f=g._tokenizeStrategies[b];d&&c(d,f),e&&c(e,f),a.trcEllipsisTokenized=!0})(a)},g.verifyTokenized=function(a){var b=!0;return e(function(a){b=b&&a.trcEllipsisTokenized})(a),b},g.measure=e(function(a,b,c){var d=b&&g._measureSingleElementSizes(b),e=c&&g._measureSingleElementSizes(c);a.trcEllipsisPositions={title:d,description:e}}),g.renderEllipsis=e(function(a,b,c){var d=a.trcEllipsisPositions;if(!d||b&&!d.title||c&&!d.description)return void __trcDebug("Calling renderEllipsis without measuring first. Skipping");try{b&&g._repaintSingleEllipsis(b,d.title),c&&g._repaintSingleEllipsis(c,d.description)}catch(e){__trcDebug(e.message+". Skipping")}}),g._tokenizeStrategies={word:function(a){return{spaces:!0,tokens:a.split(/\s+/)}},letter:function(a){return{spaces:!1,tokens:a.match(/&[\w#]+;|./g)}}},g._tokenizeSingle=function(a,b){var c=b.call(this,a);return h.util.map(c.tokens,function(a){return" "===a?a:"<ins>"+a+"</ins>"}).join(c.spaces?" ":"")},g._measureSingleElementSizes=function(a){if(!a||!a.offsetHeight)return null;if(!a.firstChild||"INS"!=a.firstChild.tagName)return __trcDebug("Attempted to call measure on element before tokenize. Skipping");var b=f(function(a){return a.className.search("lastLineEllipsis")>=0},a,"ins");if(b){var c=a.getElementsByTagName("ins");if(b.className.replace(/[\t\r\n\f]/g," ").indexOf("tblHideAllButFirst")>=0)for(var d=0;d<c.length;d++){var e=c[d];e.style.display=""}b.parentNode.removeChild(b)}for(var g,i,c=a.getElementsByTagName("ins"),j=h.dom.lineHeight(c[0]),k=Math.floor(a.offsetHeight/j)*j,l=k-j,m=a.offsetWidth,n=c[0].offsetWidth,o=[],d=0;d<c.length;d++){var e=c[d];void 0===g&&e.offsetTop>=l&&(g=c[d]),void 0!==g&&o.push(h.dom.getText(e)),!i&&e.offsetTop>=k&&(i=c[d-1])}return{lastLineStartsAt:g,lastVisibleWord:i,singleLineContent:o,elementWidth:m,firstWordWidth:n}},g._repaintSingleEllipsis=function(a,c){if(c.lastVisibleWord){var d=b.createElement("ins");h.dom.addClass(d,"lastLineEllipsis");var e=a.tokenizeStrategy||"word",f=g._tokenizeStrategies[e]("").spaces;if(d.appendChild(document.createTextNode(c.singleLineContent.join(f?" ":""))),a.insertBefore(d,c.lastLineStartsAt),"word"===e&&c.firstWordWidth>=c.elementWidth)for(var i=a.getElementsByTagName("ins"),j=0;j<i.length;j++){var k=i[j];-1==k.className.replace(/[\t\r\n\f]/g," ").indexOf("lastLineEllipsis")?k.style.display="none":k.className+=" tblHideAllButFirst"}}}}(window,document),TRC.eventDelegator=function(a,b){function c(a,b){var c;i[a]&&(c=i[a]._all,d(c,b?b:""),b&&i[a][b.container.id]&&(c=i[a][b.container.id],d(c,b)))}function d(a,b){if(a){var c,d=a.length;for(c=0;d>c;c++)try{a[c]instanceof Function&&setTimeout(function(a,b){return function(){a(b)}}(a[c],b),0)}catch(e){__trcError("executeHandlers",e)}}}function e(a,b){var c;if(!b)return void setTimeout(a,0);for(c in b)try{a instanceof Function&&setTimeout(function(a,b){return function(){a(b)}}(a,b[c]),0)}catch(d){__trcError("executeHandlers",d)}}function f(a){i[a]=[],i[a]._all=[]}function g(a,b){i[a][b]=[]}var h,i=[],j={},k={subscribe:function(a,b,c){i[a]||f(a),c?(i[a][c]||g(a,c),i[a][c].push(b),j[a]&&j[a][c]&&e(b,{mode:j[a][c]})):(i[a]._all.push(b),j[a]&&e(b,j[a]))},dispatch:function(a,b){j[a]=j[a]||{},b?j[a][b.container.id]=b:j[a]._all={},c(a,b?b:null)},resetEvents:function(){j={}}};if(a._trcIsUTactive&&(k.processDelegatorsStack=c,k.executeHandlers=d,k.executePreviousEvents=e,k.delegatorsStack=i,k.eventsStack=j),TRC.subscriptionRegister)for(;TRC.subscriptionRegister.length;)h=TRC.subscriptionRegister.shift(),k.subscribe(h.event,h.handler,h.container);return k}(window,document),function(a,b){function c(a){return{detail:a}}function d(a){return"api::"+a}function e(a,b){TRC.dispatch(d(a),c(b))}function f(a,b){var c,d=TRC.TRCParser;return a=a||{},c={mode:d.parseModeName(a),placement:d.parsePlacementName(a),baseMode:d.parseBaseModeName(a),variant:d.parseTestVariant(a),itemCount:d.getItemCount(a)},b&&(c.container=b.container,c.items=b.apiData),c}TRC.EventsAPI={dispatchVisible:function(){},dispatchClick:function(a,b){var c,d=TRC.TRCParser;a=a||{},c=new TRC.ItemParser(a),b=b||{},e("click",{slot:c.getSlot(),id:c.getId(),type:c.getType(),title:c.getTitle(),url:c.getUrl(),linkTarget:c.getLinkTarget(),mode:d.parseModeName(b),placement:d.parsePlacementName(b),baseMode:d.parseBaseModeName(b),variant:d.parseTestVariant(b),itemCount:d.getItemCount(b)})},dispatchVisible:function(a,b){var c=f(a,b);e("visible",c)},dispatchRender:function(a,b){var c=f(a,b);e("render",c)},dispatchNoContent:function(a,b){var c={reason:a};b&&(c.placement=b),e("nocontent",c)},listen:function(a,b){TRC.listen(d(a),b,!0)},readmore:function(a,b){var c=TRC.TRCParser;b=b||{},e("readmore."+a,{mode:c.parseModeName(b),placement:c.parsePlacementName(b),variant:c.parseTestVariant(b)})}}}(window,document),function(a,b){function c(a){"undefined"==typeof g[a]&&(g[a]=[])}function d(a,b){c(a),g[a].forEach(function(c,d){return b==c.id?void g[a].splice(d,1):void 0})}var e,f,g={},h=0;return TRC.listen=function(a,b,e){if("object"==typeof a&&a.length)return a.forEach(function(a){TRC.listen(a,b)}),null;c(a);var f={id:h++,handler:b,eventName:a,sync:e,remove:function(){d(this.eventName,this.id)}};return g[a].push(f),f},TRC.dispatch=function(a,b){c(a);var d=e(a,b);g[a].forEach(function(a){if(a.sync)try{a.handler.call(this,d)}catch(b){}else f(function(){a.handler.call(this,d)}.trcBind(this))}.trcBind(this))},b.addEventListener&&b.dispatchEvent?(b.addEventListener("trcFakeEvents",function(a){a.cx()},!1),e=function(a,c){var d=b.createEvent("Event");return d.initEvent(a,!1,!1),"[object Array]"===Object.prototype.toString.call(c)?d.data=c:"object"==typeof c?__trcCopyProps(c,d):d.data=c,d},void(f=function(a){var c=e("trcFakeEvents");c.cx=a,b.dispatchEvent(c)})):(b.documentElement.attachEvent("onpropertychange",function(a){"trcFakeEvents"==a.propertyName&&a.cx()}),e=function(a,c){var d;return c&&c.generator&&"ceo"===c.generator?(c.type=a,c):(d=b.createEventObject(),d.generator="ceo",d.type=a,"[object Array]"===Object.prototype.toString.call(c)?d.data=c:"object"==typeof c?__trcCopyProps(c,d):d.data=c,d)},void(f=function(a){var c=e("trcFakeEvents");c.cx=a,c.propertyName="trcFakeEvents",b.documentElement.fireEvent("onpropertychange",c)}))}(window,document),function(a){var b=TRC.ExpandAnimationManager=function(b){this.rbox=b,this.container=b.container,this.trcContainer=this.container._trc_container,TRC.css.utils.setStyleElements(this.createCSS()),this.trcContainer.className+=" trc_expandable",this.throttledExpandScrollHandler=this.scrollHandler.trcBind(this).trcThrottle(10),TRC.dom.on(a,"scroll",this.throttledExpandScrollHandler)};b.prototype.scrollHandler=function(){this.rbox.isInViewPort(this.container,0)?this.trcContainer.wasOutOfViewPort&&(this.trcContainer.className+=" trc_show",TRC.dom.off(window,"scroll",this.throttledExpandScrollHandler)):this.trcContainer.wasOutOfViewPort=!0},b.prototype.createCSS=function(){for(var a=[],b="#"+TRC.css.utils.escape(this.container.id),c=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-duration"),d=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-max-height"),e=[b+" .trc_rbox_container.trc_expandable {"+TRC.css.utils.generateCssRuleWithVendorPrefixes("transition-duration",c+"ms")+"}",b+" .trc_rbox_container.trc_expandable.trc_show { max-height: "+d+"px;}"],f=0;f<e.length;f++)this.rbox.trc.cssReset?a.push(TRC.css.utils.setStyleTextIdPrefix(e[f],TRC.modesCache,TRC.lightBoxCssReset)):a.push(e[f]);return a.join("")}}(window),function(){function a(a,c,d){this.externalCardMaxRetries=a.global["external-card-max-retries"]||5,this.externalCardRetryInterval=a.global["external-card-retry-interval"]||1e3,d=__trcCopyProps(b,{},d),this.init(c,d)}var b={collapsedHeight:490,expandButtonCaption:"Show More",collapseButtonCaption:"Show Less",fadeBackgroundColor:"#fff",fadeHeight:60,buttonTop:28,buttonBottom:10,fadeGradient:40};a.prototype.init=function(a,b,c){if(this.boxElement=document.getElementById(a),c=c||0,this.boxElement){if(this.boxElement.offsetHeight<b.collapsedHeight)return void(c<this.externalCardMaxRetries?(c++,setTimeout(this.init.trcBind(this,a,b,c),this.externalCardRetryInterval)):TRC.dom.addClass(this.boxElement,"tbl-expandable-box-inactive"));TRC.dom.addClass(this.boxElement,"tbl-collapsed"),TRC.dom.injectStyle(this.createStyleSheet(a,b)),this.boxElement.appendChild(this.createExpandButton(b)),this.boxElement.appendChild(this.createCollapseButton(b)),this.listenToBoxClick()}else __trcError("Cannot find expandable box element by ID: "+a)},a.prototype.createExpandButton=function(a){return this.createButton(a.expandButtonCaption,this.handleExpandClick,"tbl-expand-btn-container")},a.prototype.createCollapseButton=function(a){return this.createButton(a.collapseButtonCaption,this.handleCollapseClick,"tbl-collapse-btn-container")},a.prototype.createButton=function(a,b,c){var d=document.createElement("div"),e=document.createElement("a");return e.className+="tbl-expandable-box-btn",e.textContent?e.textContent=a:e.innerText=a,TRC.dom.on(e,"click",b.trcBind(this)),d.className="tbl-expandable-box-btn-container "+c,d.appendChild(e),d},a.prototype.addExpandClasses=function(){TRC.dom.addClass(this.boxElement,"tbl-expanded"),TRC.dom.removeClass(this.boxElement,"tbl-collapsed"),this.isExpanded=!0},a.prototype.addCollapseClasses=function(){TRC.dom.addClass(this.boxElement,"tbl-collapsed"),TRC.dom.removeClass(this.boxElement,"tbl-expanded"),this.isExpanded=!1},a.prototype.handleExpandClick=function(a){a.preventDefault(),a.stopPropagation(),this.isExpanded||this.addExpandClasses()},a.prototype.handleCollapseClick=function(a){a.preventDefault(),a.stopPropagation(),this.addCollapseClasses(),this.boxElement.scrollIntoView&&this.boxElement.scrollIntoView()},a.prototype.listenToBoxClick=function(){TRC.listen("expandableBoxChildIFrameClick",function(a){a.container!==this.boxElement||this.isExpanded||this.addExpandClasses()}.trcBind(this))},a.prototype.createStyleSheet=function(a,b){var c=[];return c.push("#"+a+".tbl-expanded {max-height:inherit}"),c.push("#"+a+".tbl-collapsed {max-height:"+b.collapsedHeight+"px;overflow: hidden;position: relative;}"),c.push("#"+a+" .tbl-expandable-box-btn {margin: "+b.buttonTop+"px 0 "+b.buttonBottom+"px !important;display: inline-block!important;line-height: 38px!important;text-align: center!important;white-space: nowrap!important;vertical-align: middle!important;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer!important;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none!important;border: 1px solid #93abbc!important;color: #326891!important;background-color: #edf2f5!important;border-color: #2e6da4;height: 38px!important;width: 100%!important;font-size: 15px!important;font-weight: bold!important;border-radius: 3px!important;font-family: sans-serif!important;}"),c.push("#"+a+" .tbl-expandable-box-btn:hover {background-color: #bed0dc!important;border-color: #7399b3!important;color: #326891!important;}"),c.push("#"+a+" .tbl-expandable-box-btn-container {display: none;text-align: center;}"),c.push("#"+a+" .tbl-expand-btn-container {position: absolute;z-index: 100;left: 0;right:0;bottom: 0;padding: "+b.fadeHeight+"px 10px 0px 10px;box-sizing: border-boxbackground: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%,  "+b.fadeBackgroundColor+"  "+b.fadeGradient+"%,  "+b.fadeBackgroundColor+"  100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(50%, "+b.fadeBackgroundColor+" ), color-stop(100%, "+b.fadeBackgroundColor+" ));background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b.fadeBackgroundColor+"  "+b.fadeGradient+"%, "+b.fadeBackgroundColor+"  100%);background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b.fadeBackgroundColor+"  "+b.fadeGradient+"%, "+b.fadeBackgroundColor+"  100%);background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b.fadeBackgroundColor+"  "+b.fadeGradient+"%, "+b.fadeBackgroundColor+"  100%);background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%, "+b.fadeBackgroundColor+"  "+b.fadeGradient+"%, "+b.fadeBackgroundColor+"  100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='"+b.fadeBackgroundColor+"',GradientType=0 );}"),c.push("#"+a+".tbl-expanded .tbl-collapse-btn-container{display:block;padding: 0px 5px;}"),c.push("#"+a+".tbl-collapsed .tbl-expand-btn-container{display:block;}"),c.join("")},TRC.ExpandableBox=a}(),function(){TRC.ExternalContainerAppender={MAX_RETRIES:50,TIMEOUT:100,move:function(a,b,c){var d;c=c||0,document.querySelector&&(b?(d=document.querySelector(a),d?(b.appendChild(d),TRC.dispatch("trcContentReady",{container:b})):c<this.MAX_RETRIES?TRC.Timeout.set(this.move.trcBind(this,a,b,c+1),this.TIMEOUT):__trcWarn("Could not find external container with selector "+a+" to move")):__trcError("Could not find target container for external container move"))}}}(),function(){function a(a){this.subscribers=[],this.visibleFeedContainers=[],this.feedObserverCommonOptions={onExit:this.feedIntersectionExitHandler.trcBind(this),onEnter:this.feedIntersectionEnterHandler.trcBind(this)},this.addFeedIntersectionEventHandler(a)}var b="data-card-index",c={card:{1:"cardVisibleHandler",2:"cardInvisibleHandler",3:"cardInvisibleHandler"}};a.prototype.subscribe=function(a){this.subscribers.push(a)},a.prototype.addFeedIntersectionEventHandler=function(a){if(a){var b=__trcCopyProps(this.feedObserverCommonOptions,{targetElement:a});TRC.intersections.observe(b)}},a.prototype.feedIntersectionEnterHandler=function(a,b){var c=this.visibleFeedContainers.indexOf(b);-1===c&&this.visibleFeedContainers.push(b),this.subscribers.forEach(function(a){a.feedVisibleHandler()})},a.prototype.feedIntersectionExitHandler=function(a,b){var c=this.visibleFeedContainers.indexOf(b);-1!==c&&this.visibleFeedContainers.splice(c,1),this.visibleFeedContainers.length||this.subscribers.forEach(function(a){a.feedInvisibleHandler()})},a.prototype.cardIntersectionEventHandler=function(a,d,e){var f=parseInt(a.getAttribute(b),10),g=c.card[e];g&&this.subscribers.forEach(function(a){a[g](f)})},a.prototype.onCardAdded=function(a,b){var c;a&&b&&(c={targetElement:a,onTrigger:this.cardIntersectionEventHandler.trcBind(this)},TRC.intersections.isInViewPort(c),this.subscribers.forEach(function(c){c.cardAddedHandler(a,b)}))},TRC.FeedObserver=a}(),function(){function a(a,e){this.state=d,this.timeOnFeed=null,this.lastTimeStamp=null,this.tickCounter=0,this.eventIntervals=b,this.defaultInterval=c,this.trcManager=e,a.subscribe(this)}var b=[2,3,5,5,5,5,5],c=10,d=1,e=2;a.prototype.cardVisibleHandler=function(a){},a.prototype.cardInvisibleHandler=function(a){},a.prototype.feedVisibleHandler=function(){this.state===d&&this.start()},a.prototype.feedInvisibleHandler=function(){this.state===e&&setTimeout(this.stop(),0)},a.prototype.cardAddedHandler=function(a,b){},a.prototype.tick=function(a){a||this.update();var b=this.defaultInterval;this.tickCounter<this.eventIntervals.length&&(b=this.eventIntervals[this.tickCounter]),this.timeoutId=setTimeout(this.tick.trcBind(this),1e3*b),this.tickCounter++},a.prototype.start=function(){this.state=e,this.lastTimeStamp=Date.now(),this.tick(!0)},a.prototype.stop=function(){this.state=d,clearTimeout(this.timeoutId),this.update()},a.prototype.update=function(){this.updateTimeOnFeed()},a.prototype.updateTimeOnFeed=function(){var a=Date.now();this.timeOnFeed+=a-this.lastTimeStamp,this.lastTimeStamp=a},a.prototype.sendUpdate=function(a){},TRC.FeedReportingServiceBase=a}(),function(){function a(a,b,c){var d,e,f=__trcCopyProps(c,{}),g=a.global&&a.global["enable-feed-observer"],h=a.global&&a.global["enable-card-observer"];this.trcManager=a,this.container=b.container,this.origContainer=this.container,this.mainContainerId=this.container.id,this.mainContainerPlacement=b.placement,this.numContainers=1,this.testData=a.testData,this.feedObserver=null,this.options=c,this.numPendingPublisherCards=0,c.wasWidget&&(this.widgetToFeedHelper=new TRC.WidgetToFeedHelper(this,a,c.hasFeedUI)),(g||h)&&(this.feedObserver=new TRC.FeedObserver(this.container),d=g?new TRC.TimeOnFeedService(this.feedObserver,a):null,e=h?new TRC.TimeOnCardService(this.feedObserver,a):null),c.videoSingleManager&&this.loadVideoSingleManager(b,a,c),c.hasFeedUI!==!1&&TRC.dom.injectStyle(this.createCss(c),null,this.trcManager.isThinLoaderMode()),f.afterPlacementContainerCreated=this.addFeedCardAttributes.trcBind(this),this.infiniteScrollEngine=new TRC.InfiniteScrollEngine(a,b,f),this.publisherCardsManager=new TRC.PublisherCard(this,a,b,c),this.setMainContainerCssClassesAndAttributes(this.container,c),this.listenToCardContentReady(),this.header=this.createHeader()}var b="tbl-feed-container",c="tbl-feed-card",d="tbl-feed-full-width",e="tbl-feed-partial-width",f="tbl-feed-abp",g="data-feed-container-num",h="data-feed-main-container-id",i="data-parent-placement-name",j={FULL_WIDTH:"FULL_WIDTH",PARTIAL_WIDTH:"PARTIAL_WIDTH"};a.prototype.handlePlacement=function(a){var b=a.trcResponse&&a.trcResponse.spl,c=a.trcResponse&&a.trcResponse.pcp,d=this.infiniteScrollEngine.numPlacements;return b?(this.infiniteScrollEngine.handlePlacement(a),this.publisherCardsManager.createPublisherCardsArr(b),void this.publisherCardsManager.handlePublisherCard(0,d,null,b)):c?(this.publisherCardsManager.createPublisherCardsArr(c),this.infiniteScrollEngine.numPlacements++,void this.numPendingPublisherCards++):(this.numPendingPublisherCards>0&&(this.publisherCardsManager.handlePublisherCard(0,d,null,b),this.numPendingPublisherCards=0),this.infiniteScrollEngine.handlePlacement(a),void this.trcManager["after-card-created"](a,d,this))},a.prototype.stopScrolling=function(){this.infiniteScrollEngine.stopScrolling()},a.prototype.setIsAllowedToRequestMoreContent=function(a){this.infiniteScrollEngine.setIsAllowedToRequestMoreContent(a)},a.prototype.updateNextBatchNumber=function(a){this.infiniteScrollEngine.updateNextBatchNumber(a)},a.prototype.setMainContainerCssClassesAndAttributes=function(a,c){var k=[b];switch(c.mobileLayout){case j.FULL_WIDTH:k.push(d);break;case j.PARTIAL_WIDTH:k.push(e)}TRC.blocker.blockedState>0&&k.push(f),this.container.className+=" "+k.join(" "),this.numContainers>1&&(this.container.id=this.mainContainerId+"-split-num-"+(this.numContainers-1)),a.setAttribute(g,this.numContainers),a.setAttribute(h,this.mainContainerId),a.setAttribute(i,this.mainContainerPlacement)},a.prototype.createHeader=function(){var a=document.createElement("div"),b=document.createElement("div");return b.className="tbl-feed-header-logo",a.className="tbl-feed-header",a.appendChild(b),this.container.insertBefore(a,this.container.firstChild),a},a.prototype.addFeedCardAttributes=function(a,b){this.feedObserver&&this.feedObserver.onCardAdded(a,b),a.setAttribute("tbl-feed-card",""),b.isStandaloneVideo&&this.setFeedVideoCardAttribute(a),this.setFeedCardVideoIndication(a,b)},a.prototype.setFeedCardVideoIndication=function(a,b){b.trcResponse.nvb&&a.setAttribute("no-vbelow",""),b.trcResponse.nva&&a.setAttribute("no-vabove","")},a.prototype.setFeedVideoCardAttribute=function(a){a.setAttribute("tbl-feed-video","")},a.prototype.listenToCardContentReady=function(){TRC.listen("trcContentReady",this.onCardContentReady.trcBind(this))},a.prototype.listenToBoxChildIFrameClick=function(){this.expandableBoxIFrameClickListener||(this.expandableBoxIFrameClickListener=!0,TRC.dom.on(window,"blur",function(){var a=document.activeElement;a&&TRC.dom.elementMatchesSelector(a,"."+b+" ."+c+" iframe")&&TRC.dispatch("expandableBoxChildIFrameClick",{container:TRC.dom.closest(a," ."+c)})}))},a.prototype.onCardContentReady=function(a){var b,d;a.container&&(b=a.container.placementData,d=b&&b.trcResponse&&b.trcResponse.cpad,d&&(a.container.style.padding=d),a.container.className+=" "+c,b&&b.expandOptions&&(a.container.expandableBox=new TRC.ExpandableBox(this.trcManager,a.container.id,a.container.placementData.expandOptions),this.listenToBoxChildIFrameClick()))},a.prototype.createCss=function(a){var d=[];return a.feedCss?d.push(a.feedCss):(d.push("."+b+" {position: relative; margin-top: 20px; margin-bottom: 20px; -webkit-text-size-adjust: 100%; clear: both;}"),d.push("."+b+" .tbl-feed-header {padding: 5px; background: #ffffff}"),d.push("."+b+" .tbl-feed-header-logo {height: 11px; width: 76px; display: block; margin: 0; background-image: url(//cdn.taboola.com/static/f8/f89e1763-220d-4e09-ba69-9e040548fb7a.svg); background-repeat: no-repeat; background-position: 0 0; background-size: contain}"),d.push("."+b+" ."+c+" {margin-bottom: 10px; background-color: #ffffff; border: 1px solid #f1f1f1;}"),d.push("."+b+" .tbl-loading-spinner {margin-bottom: 10px;}"),d.push("."+b+" ."+f+" {max-width:770px; margin: 20px auto 0px;}"),d.push("@media screen and (max-width: 480px) {"),d.push("."+b+" {padding: 0; background-color: #ffffff;}"),d.push("."+b+" .tbl-feed-header {margin-left: 2px; padding: 5px 0;}"),d.push("."+b+" ."+c+" {margin-bottom: 5px; padding-bottom: 5px; border-width: 0; border-bottom: 4px solid #f1f1f1;}"),d.push("."+b+" .trc_header_ext, ."+b+" .trc-widget-footer {padding-right: 3px;}"),d.push("}")),this.isFullWidthMobileFeed(a)&&d.push(this.getMobileFullWidthMarginsCss()),d.push(a.feedCssOverride),d.join("")},a.prototype.getTestData=function(){return this.testData},a.prototype.getMobileFullWidthMarginsCss=function(a){var c=a?this.container.parentNode:this.container,e=c.getBoundingClientRect(),f=-1*e.left,h=-1*(document.body.scrollWidth-e.width-Math.abs(f));return(f||h)&&c.offsetParent?a?"@media screen and (max-width: 480px) {."+b+"."+d+"["+g+'="'+a+'"] {margin-left: '+f+"px; margin-right: "+h+"px; }}":"@media screen and (max-width: 480px) {."+b+"."+d+" {margin-left: "+f+"px;margin-right: "+h+"px;}}":""},a.prototype.getVideoManagerRequestData=function(a){return{"session-data":TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),req:a.getGlobalRequestId()}},a.prototype.loadVideoSingleManager=function(a,b,c){var d=__trcCopyProps(a,{},null),e=__trcCopyProps(c.videoSingleManager,{});e.parentFeedOptions=c,this.videoManager=new TRC.VideoTagLoader(b,e,d,null,this.getVideoManagerRequestData(b)),this.videoManager.loadVideo()},a.prototype.switchMainContainer=function(a){this.container=a,this.infiniteScrollEngine.switchMainContainer(this.container),this.feedObserver&&this.feedObserver.addFeedIntersectionEventHandler(this.container)},a.prototype.isFullWidthMobileFeed=function(a){return a.mobileLayout===j.FULL_WIDTH},TRC.Feed=a}(),function(){function a(){TRC.clickFraudDetect.isLoaded=!0}function b(b){if(!TRC.botDetected)try{TRC.net.loadScript(b,"js",a,null,!0)}catch(c){__trcWarn("loadFraudScript: Error appending fraud script",c)}}var c=1000075,d=function(a,d,e,f){var g,h=TRC.pageManager.getTopMostWindow().location.hostname,i=f.global["fraud-detection-script-url"]||"http://js.ad-score.com/score.min.js?pid="+c+"#tid=src1",j={l1:a,uid:d,pub_domain:h,ref:e};g=TRC.URL.prototype.switchProtocol.call(i,TRC.PROTOCOL)+"&"+TRC.util.keys(j).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(j[a])}).join("&"),this.isInitialized=!0,b(g)},e=function(a,b){setTimeout(function(){try{TRC.clickFraudDetect.isLoaded?adScore("send","adclick",{},{pid:""+c,l2:a,l6:"clicked",uid:b}):__trcWarn("Fraud script did not render",d)}catch(d){__trcWarn("fraudScriptCallback: Error in fraud detection",d)}},0)};TRC.clickFraudDetect={init:d,fraudScriptCallback:e,isInitialized:!1,isLoaded:!1}}(),TRC.util=function(win,doc){var modObject={isType:function(a,b){return b=b.charAt(0).toUpperCase()+b.substr(1),Object.prototype.toString.call(a)=="[object "+b+"]"},hasKeys:function(a){var b;if(this.isType(a,"object"))if(Object.keys&&!Object.propertyIsEnumerable("keys")){if(Object.keys(a).length>0)return!0}else for(b in a)if(a.hasOwnProperty(b))return!0;return!1},copyProperties:function(a,b,c){var d;if(this.isType(c,"Array")){d=c.length;for(var e=0;d>e;e++)b[c[e]]=a[c[e]]?a[c[e]]:void 0;return!0}return!1},getRandomIds:function(a){for(var b=0;b<a.len;b++)a.arr[b]=a.prefix+Math.floor(Math.random()*Math.pow(10,a.strength)+1)+a.suffix},getHtmlDecodeText:function(){var a=doc.createElement("div");return function(b){return b&&"string"==typeof b?(a.innerHTML=encodeURI(b),b=a.textContent||a.innerText,a.innerHTML="",decodeURI(b)):""}}(),isEmptyString:function(a){return!a||/^\s*$/.test(a)},keys:function(){"use strict";if(Object.keys)return function(a){return"object"==typeof a||"function"==typeof a&&null!==a?Object.keys(a):[]};var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))return[];var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}(),merge:function(a){"use strict";if(void 0===a||null===a||a.constructor!==Object)return null;for(var b=TRC.util,c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d&&d.constructor===Object)for(var e,f=b.keys(d),g=0,h=f.length;h>g;g++)e=f[g],a[e]=d[e]}return a},debounce:function(a,b,c,d){var e;return function(){var f=d||window,g=arguments,h=function(){e=null,c||a.apply(f,g)},i=c&&!e;clearTimeout(e),e=setTimeout(h,b),i&&a.apply(f,g)}},jsonParseWithNative:function(a){try{return JSON.parse(a)}catch(b){return TRC.util.jsonParseWithEval(a)}},jsonParseWithEval:function(text){try{return eval("("+String(text)+")")}catch(e){throw new Error("JSON parse error - invalid input!")}},isNativeFunction:function(a){return/\{\s*\[native code\]\s*\}/.test(""+a)},filterObj:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a.call(this,b[d],d,b)&&(c[d]=b[d]);return c},textIsRTL:function(a){if(!a)return!1;var b="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜︀-﹯﻽-￿",c="֑-߿יִ-﷿ﹰ-ﻼ",d=a.match(new RegExp("^[^"+b+c+"]*(?:(["+b+"]+)|(["+c+"]+))"));return!(!d||!d[2])},isArray:function(a){return a&&Array===a.constructor?!0:!1},some:function(a,b){function c(a,b){"use strict";if(null==a)throw new TypeError("some called on null or undefined");if("function"!=typeof b)throw new TypeError;for(var c=Object(a),d=c.length>>>0,e=arguments.length>=2?arguments[1]:void 0,f=0;d>f;f++)if(f in c&&b.call(e,c[f],f,c))return!0;return!1}return this.isArray(a)?Array.prototype.some?a.some(b):c(a,b):!1},map:function(a,b,c){if(Array.prototype.map)return a.map(b,c);var d,e,f;if(null==a)throw new TypeError(" array is null or not defined");var g=Object(a),h=g.length>>>0;if("function"!=typeof b)throw new TypeError(b+" is not a function");for(arguments.length>1&&(d=c),e=new Array(h),f=0;h>f;){var i,j;f in g&&(i=g[f],j=b.call(d,i,f,g),e[f]=j),f++}return e},isTrue:function(a){return"true"===a||a===!0||"1"===a},isFalse:function(a){return!a||"false"===a},hashString:function(a){var b=0;if(0==a.length)return b;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return b}};return modObject}(window,document);var __trcUnJSONify=JSON&&JSON.parse&&"function"==typeof JSON.parse&&TRC.util.isNativeFunction(JSON.parse)?TRC.util.jsonParseWithNative:TRC.util.jsonParseWithEval;"undefined"==typeof Array.prototype.push&&(Array.prototype.push=function(){for(var a=0;a<arguments.length;a++)this[this.length]=arguments[a]}),"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(a,b){"number"!=typeof b&&(b=0);for(var c=b;c<this.length;c++)if(this[c]==a)return c;return-1}),"undefined"==typeof Array.prototype.forEach&&(Array.prototype.forEach=function(a){var b=this.length;if("function"!=typeof a)throw new TypeError;for(var c=arguments[1],d=0;b>d;d++)d in this&&a.call(c,this[d],d,this)}),"undefined"==typeof document.getElementsByClassName&&(document.getElementsByClassName=function(a){var b=[];elms=document.getElementsByTagName("*");var c=a.split(/ +/);a:for(var d=0;d<elms.length;d++){for(var e=elms[d].className.split(/ +/),f=0;f<c.length;f++)if(e.indexOf(c[f])<0)continue a;b.push(elms[d])}return b}),"undefined"==typeof document.trcGetCurrentStyle&&(document.trcGetCurrentStyle=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a)),window.getComputedStyle?window.getComputedStyle(a,c).getPropertyValue(b):(b=b.replace(/-(\w)/,function(a,b){return b.toUpperCase()}),a.currentStyle[b])}),"undefined"==typeof document.trcGetParentByClassName&&(document.trcGetParentByClassName=function(a,b){return a?a.className.split(/\s+/).indexOf(b)>=0?a:document.trcGetParentByClassName(a.parentNode,b):null}),"undefined"==typeof document.trcGetChildByClassName&&(document.trcGetChildByClassName=function(a,b){return a?a.className.split(/\s+/).indexOf(b)>=0?a:document.trcGetChildByClassName(a.firstChild,b):null}),"undefined"==typeof Function.prototype.trcBind&&(Function.prototype.trcBind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){var d=c.concat(Array.prototype.slice.call(arguments,0));return b.apply(a,d)}}),"undefined"==typeof Function.prototype.trcThrottle&&(Function.prototype.trcThrottle=function(a){
var b,c=this;return function(){var d=arguments;b&&clearTimeout(b),b=setTimeout(function(){c.apply(c,d)},a)}}),"undefined"==typeof document.head&&(document.head=document.getElementsByTagName("head")[0]),TRC.GoogleAds=function(){return"object"==typeof window.console&&console.log("TRC.GoogleAds is Deprecated"),{draw:function(){}}},TRC.math=TRC.math||function(a,b){function c(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))}return{roundByDecimal:function(a,b){var c=a/b,d=c.toFixed(0),e=c-d;return d*b+b*Math.round(e)},round10:function(a,b){return c("round",a,b)}}}(window,document),function(){function a(a){this.trcManager=a,this.sessionStorage=TRC.pageManager.getLocalStorageImplementation("strict-w3c-storage","session"),this.lastViewportElementData=this.getVPElementsHistory()[a.getItemId()],a.trcCache.enableCacheViaStorageFlag()}var b="trc_vp_els",c=5;a.prototype.trackElement=function(a){TRC.dom.on(a,"click",this.storeElementPosition.trcBind(this,a))},a.prototype.scrollToElementIfWasLastInViewPort=function(a){var b,c=this.trcManager;this.lastViewportElementData&&a.id===this.lastViewportElementData.id&&(b=this.getVPElementsHistory(),delete b[this.trcManager.getItemId()],this.storeVPElementsHistory(b),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),setTimeout(function(){a.scrollIntoView(!1);var b={abTestsEventType:"simple",name:"backToFeed_backToCard",type:__trcJSONify({origViewId:a.placementData.cachedViewId,viewId:TRC.pageManager.getPageData(),placement:a.getAttribute("data-placement-name"),cardIndex:a.getAttribute("data-card-index")}),eventTime:(new Date).getTime()};c.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(b))},null,!1,null,null)},0))},a.prototype.storeElementPosition=function(a){var b=this.getVPElementsHistory();b[this.trcManager.getItemId()]={id:a.id,s:(new Date).getTime()};var c={abTestsEventType:"simple",name:"backToFeed_exitFromCard",type:__trcJSONify({viewId:TRC.pageManager.getPageData(),placement:a.getAttribute("data-placement-name"),cardIndex:a.getAttribute("data-card-index")}),eventTime:(new Date).getTime()};this.trcManager.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(c))},null,!1,null,null),this.storeVPElementsHistory(b)},a.prototype.storeVPElementsHistory=function(a){a=this.removeEntriesToLimit(a),this.sessionStorage.setValue(b,__trcJSONify(a))},a.prototype.getVPElementsHistory=function(){var a=this.sessionStorage.getValue(b)||"{}";return TRC.util.jsonParseWithNative(a)},a.prototype.removeEntriesToLimit=function(a){var b,d={};if(TRC.util.keys(a).length<=c)return a;for(var e in a)a.hasOwnProperty(e)&&(d[a[e].s]=e);for(b=TRC.util.keys(d),b.sort();b.length>c;)b.shift();for(var f in d)d.hasOwnProperty(f)&&-1===b.indexOf(f)&&delete a[d[f]];return a},TRC.HistoryManager=a}(),function(){function a(a,b,c){this.trcManager=a,this.parentPlacementData=b,this.parentPlacementName=b.placement,this.container=b.container,this.parentContainerId=this.container.id,this.afterPlacementContainerCreated=c.afterPlacementContainerCreated,this.nextBatchDistanceThreshold=c.nextBatchDistanceThreshold||2e3,this.numPlacements=1,this.feedDynamicParameters=c.feedDynamicParameters,this.uiBatchNumberCounter=1,this.isPendingNextBatch=!0,this.isFirstBatchRequest=!0,this.isLoadNextBatchAnchorObserveEnter=!1,this.enableManualLoadNextBatch=this.trcManager.manualVisibilityTrigger&&this.trcManager.global["enable-manual-visible"];var d=c.feedDynamicParameters,e=d&&d.rootSelectorScrollElement||this.trcManager.global["feed-load-next-batch-root-selector"];this.observerRootSelector=e||null,this.observerScrollElement=e&&document.querySelector(e)||window,this.feedObserverLoadNextBatch=d&&d.feedObserverLoadNextBatch||this.trcManager.global["feed-observer-load-next-batch"],this.firstBatchDistanceThresholdFromTop=d&&d.firstBatchDistanceThresholdFromTop||this.trcManager.global["first-batch-distance-threshold-from-top"]||1e3,this.feedObserverLoadNextBatch&&!this.enableManualLoadNextBatch&&(this.isLoadNextBatchUsingObserver=!0),this.isLoadNextBatchUsingObserver||this.enableManualLoadNextBatch||(this.throttledScrollHandler=this.scrollHandler.trcBind(this).trcThrottle(10),this.lastScrollTop=this.getScrollTop(),TRC.dom.on(this.observerScrollElement,"scroll",this.throttledScrollHandler)),this.firstBatchDistanceThresholdFromTop&&!this.enableManualLoadNextBatch&&(this.throttledLoadRestOfBatchScrollHandler=this.loadRestOfBatchScrollHandler.trcBind(this,this.firstBatchDistanceThresholdFromTop).trcThrottle(10),TRC.dom.on(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler)),this.enableManualLoadNextBatch&&(this.lastManualRectsTop=0,this.listenToManualLoadNextBatchEvent()),c.feedDynamicParameters&&c.feedDynamicParameters.enableHistory&&(this.historyManager=new TRC.HistoryManager(a)),this.listenToTrcResponse(),this.createLoadingSpinner()}a.prototype.loadRestOfBatchScrollHandler=function(a){var b=this.isNearingStartOfPage(a);return this.restOfFirstBatchLoaded||this.isCache?void TRC.dom.off(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler):void(!this.restOfFirstBatchLoaded&&b&&(this.getNextBatch(),TRC.dom.off(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler)))},a.prototype.scrollHandler=function(){this.isNearingEndOfContent()&&this.getNextBatch(),this.lastScrollTop=this.getScrollTop()},a.prototype.createNewNextBatchAnchorObserver=function(){TRC.dom.off(this.observerScrollElement,"scroll",this.nextBatchObserverCreator),TRC.intersections.unobserve(this.loadNextBatchAnchorObserverId),this.ampFeedResizeListener&&this.ampFeedResizeListener.remove(),this.nextBatchObserverCreator=null,this.isLoadNextBatchAnchorObserveEnter=!1,this.observeNextBatchAnchor()},a.prototype.observeNextBatchAnchor=function(){var a=this,b=a.getNextBatchDistanceThreshold(),c={rootSelector:this.observerRootSelector,targetElement:a.loadNextBatchAnchorContainer,threshold:[0,.25,.5,.75,1],rootMargin:"0px 0px "+b+"px 0px",onEnter:a.getNextBatch.trcBind(a)};a.loadNextBatchAnchorObserverId=TRC.intersections.observe(c)},a.prototype.createLoadingSpinner=function(){this.spinnerContainer=document.createElement("div"),this.spinnerContainer.className+="tbl-loading-spinner tbl-hidden",this.container.appendChild(this.spinnerContainer),this.isLoadNextBatchUsingObserver&&this.createLoadNextBatchObserverAnchorElement()},a.prototype.createLoadNextBatchObserverAnchorElement=function(){this.loadNextBatchAnchorContainer=document.createElement("div"),this.loadNextBatchAnchorContainer.className="tbl-batch-anchor",this.container.appendChild(this.loadNextBatchAnchorContainer),this.observeNextBatchAnchor()},a.prototype.stopScrolling=function(){return this.isLoadNextBatchUsingObserver?(this.isAllowedToRequestMoreContent=!1,void TRC.intersections.unobserve(this.loadNextBatchAnchorObserverId)):this.enableManualLoadNextBatch?void(this.isAllowedToRequestMoreContent=!1):void TRC.dom.off(this.observerScrollElement,"scroll",this.throttledScrollHandler)},a.prototype.hideLoadingSpinner=function(){-1===this.spinnerContainer.className.indexOf("tbl-hidden")&&TRC.dom.addClass(this.spinnerContainer,"tbl-hidden")},a.prototype.showLoadingSpinner=function(){TRC.dom.removeClass(this.spinnerContainer,"tbl-hidden")},a.prototype.listenToTrcResponse=function(){var a=this.onTrcResponse.trcBind(this);TRC.EventsAPI.listen("nocontent",a),TRC.listen("trcResponseHandled",a),TRC.listen("resumeFeedRendering",a)},a.prototype.listenToManualLoadNextBatchEvent=function(){TRC.listen("visible::"+this.parentPlacementName,this.manualLoadNextBatchHandler.trcBind(this))},a.prototype.shouldEnableLoadNextBatch=function(a){var b=a.boundingClientRect.top<this.lastManualRectsTop,c=a.boundingClientRect.top+a.boundingClientRect.height-a.rootBounds.height<=this.getNextBatchDistanceThreshold();return c&&b},a.prototype.manualLoadNextBatchHandler=function(a){this.shouldEnableLoadNextBatch(a)&&this.getNextBatch(),this.lastManualRectsTop=a.boundingClientRect.top},a.prototype.isNearingStartOfPage=function(a){return a<=this.getScrollTop()},a.prototype.isNearingEndOfContent=function(){var a=this.container.getBoundingClientRect().top+this.container.offsetHeight,b=TRC.dom.getViewportVerticalRange(),c=b.max-b.min,d=a-c,e=a>0&&d<=this.getNextBatchDistanceThreshold(),f=this.getScrollTop()>this.lastScrollTop;return f&&e},a.prototype.getNextBatchDistanceThreshold=function(){return this.isFirstBatchRequest&&this.trcNextBatchNumber?this.trcManager.global["feed-first-batch-distance-threshold"]||this.nextBatchDistanceThreshold:this.nextBatchDistanceThreshold},a.prototype.updateNextBatchNumber=function(a){this.trcNextBatchNumber=+a},a.prototype.getNextBatch=function(){var a={};if(this.isAllowedToRequestMoreContent!==!1&&!this.isPendingNextBatch){if(this.isLoadNextBatchUsingObserver){if(this.isLoadNextBatchAnchorObserveEnter)return;this.isLoadNextBatchAnchorObserveEnter=!0}this.isFirstBatchRequest=!1,this.parentPlacementData.fi=this.numPlacements,this.parentPlacementData.fb=this.trcNextBatchNumber||++this.uiBatchNumberCounter,this.restOfFirstBatchLoaded=!0,a[this.parentPlacementName]=this.parentPlacementData,this.isPendingNextBatch=!0,this.showLoadingSpinner(),this.trcManager.dispatchLoadRequest(a)}},a.prototype.getScrollTop=function(){return TRC.dom.getScrollTop(this.observerScrollElement)},a.prototype.isVideoItemPreviewOn=function(a,b){return a.uimvip===b.mode||a.evip?!0:!1},a.prototype.handlePlacement=function(a){var b=document.createElement("div");if(this.feedDynamicParameters&&this.isVideoItemPreviewOn(this.feedDynamicParameters,a)&&(b.className="tbl-preview"),a.isCache){if(this.isCache=!0,this.cachedViewId=a.cachedViewId,!this.loadFromCacheEventSent){var c={abTestsEventType:"simple",name:"backToFeed_loadFromCache",type:__trcJSONify({origViewId:this.cachedViewId,placement:a.placement,cardIndex:this.numPlacements}),eventTime:(new Date).getTime()};this.trcManager.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(c))},null,!1,null,null),this.loadFromCacheEventSent=!0}}else if(this.isCache&&!this.loadNotFromCacheEventSent){var c={abTestsEventType:"simple",name:"backToFeed_loadNotFromCache",type:__trcJSONify({origViewId:this.cachedViewId,placement:a.placement,cardIndex:this.numPlacements}),eventTime:(new Date).getTime()};this.trcManager.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(c))},null,!1,null,null),this.loadNotFromCacheEventSent=!0}a.container=b,a.modeGroupOrder=this.numPlacements,b.setAttribute("data-card-index",this.numPlacements),b.placementData=a,this.uiBatchNumberCounter=+a.trcResponse.fb||this.uiBatchNumberCounter,this.parentContainerId&&(b.id=this.parentContainerId+"-pl"+this.numPlacements,b.setAttribute("data-batch-num",this.uiBatchNumberCounter)),"function"==typeof this.afterPlacementContainerCreated&&this.afterPlacementContainerCreated(b,a),this.container.insertBefore(b,this.container.querySelector(".tbl-loading-spinner")),this.historyManager&&(this.historyManager.trackElement(b),this.historyManager.scrollToElementIfWasLastInViewPort(b)),this.numPlacements++},a.prototype.switchMainContainer=function(a){this.container=a,this.container.appendChild(this.spinnerContainer),this.isLoadNextBatchUsingObserver&&this.container.appendChild(this.loadNextBatchAnchorContainer)},a.prototype.onTrcResponse=function(a){a&&"api::nocontent"===a.type&&a.detail.placement||(this.isPendingNextBatch=!1,this.hideLoadingSpinner(),this.isLoadNextBatchUsingObserver&&!this.nextBatchObserverCreator&&this.isAllowedToRequestMoreContent!==!1&&(this.nextBatchObserverCreator=this.createNewNextBatchAnchorObserver.trcBind(this).trcThrottle(10),TRC.dom.on(this.observerScrollElement,"scroll",this.nextBatchObserverCreator),this.ampFeedResizeListener=TRC.listen("ampFeedResize",this.nextBatchObserverCreator)))},a.prototype.setIsAllowedToRequestMoreContent=function(a){this.isAllowedToRequestMoreContent=a},TRC.InfiniteScrollEngine=a}(),function(a,b){"use strict";function c(a){this.time=a.time,this.target=a.target,this.rootBounds=a.rootBounds,this.boundingClientRect=a.boundingClientRect,this.intersectionRect=a.intersectionRect||k(),this.isIntersecting=!!a.intersectionRect;var b=this.boundingClientRect,c=b.width*b.height,d=this.intersectionRect,e=d.width*d.height;c?this.intersectionRatio=e/c:this.intersectionRatio=this.isIntersecting?1:0}function d(a,b){var c=b||{};if("function"!=typeof a)throw new Error("callback must be a function");if(c.root&&1!=c.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=f(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=a,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(c.rootMargin),this.thresholds=this._initThresholds(c.threshold),this.root=c.root||null,this.rootMargin=this._rootMarginValues.map(function(a){return a.value+a.unit}).join(" ")}function e(){return a.performance&&performance.now&&performance.now()}function f(a,b){var c=null;return function(){c||(c=setTimeout(function(){a(),c=null},b))}}function g(a,b,c,d){"function"==typeof a.addEventListener?a.addEventListener(b,c,d||!1):"function"==typeof a.attachEvent&&a.attachEvent("on"+b,c)}function h(a,b,c,d){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,d||!1):"function"==typeof a.detatchEvent&&a.detatchEvent("on"+b,c)}function i(a,b){var c=Math.max(a.top,b.top),d=Math.min(a.bottom,b.bottom),e=Math.max(a.left,b.left),f=Math.min(a.right,b.right),g=f-e,h=d-c;return g>=0&&h>=0&&{top:c,bottom:d,left:e,right:f,width:g,height:h}}function j(a){var b;try{b=a.getBoundingClientRect()}catch(c){}return b?(b.width&&b.height||(b={top:b.top,right:b.right,bottom:b.bottom,left:b.left,width:b.right-b.left,height:b.bottom-b.top}),b):k()}function k(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(a,b){for(var c=b;c;){if(c==a)return!0;c=m(c)}return!1}function m(a){var b=a.parentNode;return b&&11==b.nodeType&&b.host?b.host:b}if("IntersectionObserver"in a&&"IntersectionObserverEntry"in a&&"intersectionRatio"in a.IntersectionObserverEntry.prototype)return void("isIntersecting"in a.IntersectionObserverEntry.prototype||Object.defineProperty(a.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var n=[];d.prototype.THROTTLE_TIMEOUT=1e3,d.prototype.POLL_INTERVAL=null,d.prototype.observe=function(a){if(!this._observationTargets.some(function(b){return b.element==a})){if(!a||1!=a.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:a,entry:null}),this._monitorIntersections()}},d.prototype.unobserve=function(a){this._observationTargets=this._observationTargets.filter(function(b){return b.element!=a}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},d.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},d.prototype.takeRecords=function(){var a=this._queuedEntries.slice();return this._queuedEntries=[],a},d.prototype._initThresholds=function(a){var b=a||[0];return Array.isArray(b)||(b=[b]),b.sort().filter(function(a,b,c){if("number"!=typeof a||isNaN(a)||0>a||a>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return a!==c[b-1]})},d.prototype._parseRootMargin=function(a){var b=a||"0px",c=b.split(/\s+/).map(function(a){var b=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!b)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(b[1]),unit:b[2]}});return c[1]=c[1]||c[0],c[2]=c[2]||c[0],c[3]=c[3]||c[1],c},d.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(g(a,"resize",this._checkForIntersections,!0),g(b,"scroll",this._checkForIntersections,!0),"MutationObserver"in a&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(b,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},d.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,h(a,"resize",this._checkForIntersections,!0),h(b,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},d.prototype._checkForIntersections=function(){var a=this._rootIsInDom(),b=a?this._getRootRect():k();this._observationTargets.forEach(function(d){var f=d.element,g=j(f),h=this._rootContainsTarget(f),i=d.entry,k=a&&h&&this._computeTargetAndRootIntersection(f,b),l=d.entry=new c({time:e(),target:f,boundingClientRect:g,rootBounds:b,intersectionRect:k});i?a&&h?this._hasCrossedThreshold(i,l)&&this._queuedEntries.push(l):i&&i.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},d.prototype._computeTargetAndRootIntersection=function(c,d){if("none"!=a.getComputedStyle(c).display){for(var e=j(c),f=e,g=m(c),h=!1;!h;){var k=null,l=1==g.nodeType?a.getComputedStyle(g):{};if("none"==l.display)return;if(g==this.root||g==b?(h=!0,k=d):g!=b.body&&g!=b.documentElement&&"visible"!=l.overflow&&(k=j(g)),k&&(f=i(k,f),!f))break;g=m(g)}return f}},d.prototype._getRootRect=function(){var a;if(this.root)a=j(this.root);else{var c=b.documentElement,d=b.body;a={top:0,left:0,right:c.clientWidth||d.clientWidth,width:c.clientWidth||d.clientWidth,bottom:c.clientHeight||d.clientHeight,height:c.clientHeight||d.clientHeight}}return this._expandRectByRootMargin(a)},d.prototype._expandRectByRootMargin=function(a){var b=this._rootMarginValues.map(function(b,c){return"px"==b.unit?b.value:b.value*(c%2?a.width:a.height)/100}),c={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3]};return c.width=c.right-c.left,c.height=c.bottom-c.top,c},d.prototype._hasCrossedThreshold=function(a,b){var c=a&&a.isIntersecting?a.intersectionRatio||0:-1,d=b.isIntersecting?b.intersectionRatio||0:-1;if(c!==d)for(var e=0;e<this.thresholds.length;e++){var f=this.thresholds[e];if(f==c||f==d||c>f!=d>f)return!0}},d.prototype._rootIsInDom=function(){return!this.root||l(b,this.root)},d.prototype._rootContainsTarget=function(a){return l(this.root||b,a)},d.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},d.prototype._unregisterInstance=function(){var a=n.indexOf(this);-1!=a&&n.splice(a,1)},a.IntersectionObserver=d,a.IntersectionObserverEntry=c}(window,document),TRC.intersections=function(a,b){function c(){}function d(a,b){if(TRC.util.isArray(a.threshold))for(var c=0;c<a.threshold.length;c++){var d=a.threshold[c];-1===b.indexOf(d)&&b.push(a.threshold)}else-1===b.indexOf(a.threshold)&&b.push(a.threshold)}function e(a,c,d,e,f){if(!a.disableCheckOverlay&&c===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE){var g=b.elementFromPoint(e-1,f-1)||b.elementFromPoint(e+1,f+1);g===d.target||d.target.contains(g)||(c=TRC.intersections.visibilityState.IN_VIEW_PORT_NOT_VISIBLE,d.intersectionRatio>=1&&null!==g&&TRC.intersections.observePolling(a))}return c}function f(a,b,c){return a<=c.right&&b<=c.bottom&&b>0}function g(a){var c,d,e,f=a.getBoundingClientRect(),g=h(f);d=g.targetElementCenterX,e=g.targetElementCenterY;var i=b.elementFromPoint(d,e);return c=i===a||a.contains(i)}function h(a){var b=a.left+Math.round((a.right-a.left)/2),c=a.top+Math.round((a.bottom-a.top)/2);return{targetElementCenterX:b,targetElementCenterY:c}}function i(a,b){b===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE&&TRC.intersections.unObservePolling(a)}function j(a,b,c){b.onTrigger(a,b.observer,c),i(c,b)}function k(a){TRC.Timeout.clear(a.visibleTimeout),delete a.visibleTimeout}function l(a,b,c){b.isEnter&&a.isVisible&&("function"!=typeof b.visibleWidgetPredicate||b.visibleWidgetPredicate())&&(delete a.isVisible,a.visibilityReported=!0,j(a,b,c))}function m(a,b,c){k(a),a.visibilityReported||l(a,b,c)}function n(a,b,c){var d=TRCImpl&&TRCImpl.global["visibility-intersection-api-delay"]||1e3,e=c===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE&&!a.visibleTimeout;b.enableDelayedVisibilityCheck?e&&(a.isVisible=!0,a.visibleTimeout=TRC.Timeout.set(m.trcBind(this,a,b,c),d)):j(a,b,c)}function o(a,b,c){var d,g,i,j,l,m=b.target;a.isEnter=b.isIntersecting,a.isExit=!a.isEnter,a.intersection=b.intersectionRatio,a.isEnter?a.onEnter(b,m,a.observer):a.isExit&&(m.visibleTimeout&&k(m),m.isVisible=!1,a.onExit(b,m,a.observer),TRC.intersections.unObservePolling(a)),d=b.boundingClientRect;var o=h(d);return i=o.targetElementCenterX,j=o.targetElementCenterY,g=TRCImpl&&TRCImpl.global["visibility-threshold-override"]||0,l=b.isIntersecting&&b.intersectionRatio>=g&&f(i,j,b.intersectionRect)?TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE:b.isIntersecting?TRC.intersections.visibilityState.IN_VIEW_PORT_NOT_VISIBLE:TRC.intersections.visibilityState.NOT_IN_VIEW_PORT,l=e(a,l,b,i,j),c.disableDuplicatePrevention?n(m,a,l):a.lastEventId&&a.lastEventId===l||(n(m,a,l),a.lastEventId=l),l}var p=0,q={},r={},s="observeId",t={TARGET_ATTRIB:s,visibilityState:{IN_VIEW_PORT_VISIBLE:1,IN_VIEW_PORT_NOT_VISIBLE:2,NOT_IN_VIEW_PORT:3},observe:function(a){function b(b){for(var c,d=0;d<b.length;d++){var e=b[d];c=e.target.getAttribute(s).split(" ");for(var f=0;f<c.length;f++){var g=c[f],h=q[g];h&&h.observer.tblObserverKey===this.tblObserverKey&&o(h,e,a)}}}var e,f,g,h=a.disableCheckOverlay?[0,.5]:[0,.25,.5,.75,1];if(!a.targetElement||null===a.threshold||!a.onEnter&&!a.onExit&&!a.onTrigger)return void __trcDebug("missing params for intersectionHandler");e=a.targetElement,f="tbl-observe-"+p,g=e.getAttribute(s)?e.getAttribute(s)+" "+f:f,e.setAttribute(s,g),p++,d(a,h),q[f]={targetSelector:f,targetElement:e,isEnter:null,isExit:null,intersection:null,disableCheckOverlay:a.disableCheckOverlay,disableDuplicatePrevention:a.disableDuplicatePrevention,enableDelayedVisibilityCheck:a.enableDelayedVisibilityCheck,visibleWidgetPredicate:a.visibleWidgetPredicate,threshold:a.threshold,onExit:a.onExit||c,onEnter:a.onEnter||c,onTrigger:a.onTrigger||c};var i,j={root:a.rootSelector||null,rootMargin:a.rootMargin||"0px",threshold:a.threshold},k=TRC.util.hashString(JSON.stringify(j));return r[k]?i=r[k]:(j.root=j.root&&document.querySelector(j.root),i=new IntersectionObserver(b.trcBind(j),j),"MutationObserver"in window||(i.POLL_INTERVAL=TRCImpl.global["intersections-polyfill-poll-interval"]||500),j.tblObserverKey=i.tblObserverKey=k,r[k]=i),q[f].observer=i,i.observe(e),f},isInViewPort:function(a){var b=TRCImpl.global["visibility-threshold"]||a.disableCheckOverlay?[0,.5]:[0,.25,.5,.75,1],c={rootSelector:a.rootSelector||null,targetElement:a.targetElement,threshold:b,rootMargin:"0px",disableCheckOverlay:a.disableCheckOverlay,disableDuplicatePrevention:a.disableDuplicatePrevention,enableDelayedVisibilityCheck:a.enableDelayedVisibilityCheck,visibleWidgetPredicate:a.visibleWidgetPredicate,onTrigger:a.onTrigger};return this.observe(c)},unobserve:function(a){var b,c,d=q[a];return d?(d=q[a].targetElement,b=d.getAttribute(s).split(" "),c=b.indexOf(a),1===b.length&&(q[a].observer.unobserve(d),d.removeAttribute(s)),c>-1&&b.length>1&&(b.splice(c,1),d.setAttribute(s,b.join(" "))),delete q[a]):void __trcLog("missing target element for unobserve")},getIntersectionState:function(){return q},observePolling:function(a){var b=500;this.observedElementsInPolling[a.targetSelector]||(this.observedElementsInPolling[a.targetSelector]={target:a.targetElement,state:a},a.underPolling=!0,this.observedElementsInPollingCounter++),this.observedElementsInPollingCounter>0&&this.startPolling(b)},unObservePolling:function(a){this.observedElementsInPolling[a.targetSelector]&&(delete this.observedElementsInPolling[a.targetSelector],this.observedElementsInPollingCounter--,a.underPolling=!1),0===this.observedElementsInPollingCounter&&this.stopPolling()},stopPolling:function(){clearInterval(this.pollingInterval),this.pollingInterval=null},startPolling:function(a){this.pollingInterval||(this.pollingInterval=setInterval(function(){var a,b,c,d=!1,e=t.observedElementsInPolling;for(var f in e)if(e.hasOwnProperty(f)&&(a=e[f],d=g(a.target))){b=a.target.getAttribute(t.TARGET_ATTRIB).split(" "),c=t.getIntersectionState();for(var h=0;h<b.length;h++){var i=b[h];n(a.target,c[i],t.visibilityState.IN_VIEW_PORT_VISIBLE)}t.unObservePolling(a.state)}},a))},observedElementsInPolling:{},observedElementsInPollingCounter:0};return t}(window,document),function(){function a(a){this._data=a}a.prototype.getId=function(){return this._data.id},a.prototype.getLinkTarget=function(){return this._data.linkTarget},a.prototype.getUrl=function(){return this._data.url},a.prototype.getTitle=function(){return this._data.title},a.prototype.getType=function(){var a=this._data;return a["is-syndicated"]?"sponsored":a["is-in-network"]?"exchange":a["is-native"]?"native":"organic"},a.prototype.getSlot=function(){return this._data.itemIndex},TRC.ItemParser=a}(),function(a,b){var c={source:"|v|h|c|t|s|p|o|z|video|home|category|text|search|photo|other|content_hub",target:"|v|p|t|m|video|photo|text|mix|"},d="v",e=function(a,b){return a=a.toLowerCase(),-1!==c[b].indexOf("|"+a+"|")?"content_hub"===a?"z":a.substr(0,1):(__trcError('illegal parameter "'+a+'" was passed to trc_ListOriginBuilder method: "set'+b.substr(0,1).toUpperCase()+b.substr(1)+'" \nUsing "video" instead'),"v")},f=TRC.ListOriginBuilder=function(a,b){this.setSource(a||d),this.setTarget(b||"v")};f.prototype.setSource=function(a){d=e(a,"source")},f.prototype.getSource=function(){return d},f.prototype.setTarget=function(a){this.target=e(a,"target")},f.prototype.getTarget=function(){return this.target},f.prototype.toString=function(){return(d+"2"+this.target).replace(/v2v/,"blended")}}(window,document),TRC.mdl=function(a,b){function c(a,b){var c=!1;if(b&&b.systemFlags&&"thin"==b.systemFlags.loaderType&&a&&a.trc&&a.trc.vl){var d=a.trc.vl;c=TRC.util.some(d,function(a){return!(!a||!a.mn)}),b.isWaitingForModes=c}return c}function d(a,b,c,d,e){for(var f=[],g={},h=0;h<b.length;h++){var i=b[h];g[i.name]||(f.push(i),g[i.name]=!0)}return c(a,f,d,e)}function e(a,b,c,d){for(var e="/",f=a+e+"?modes=",g=b.length,h=0;g>h;h++){var i=b[h];i.name&&i.revision&&(f=f+encodeURIComponent(i.name)+n+encodeURIComponent(i.revision),g>h+1&&(f+=o))}return f=f+"&publisher="+encodeURIComponent(d)+"&clientVersion="+encodeURIComponent(c)}function f(a,b,c,d){function e(a){"error"===a.type&&j(c,d)}var f=g(function(a){b(a),delete TRC.callbacks[f]});TRC.net.loadScript(a+"&callback=TRC.callbacks."+f,"js",e)}function g(a){var b="rboxDynamicModeLoaderCallbackName"+(l=l+1||1);return TRC.callbacks[b]=a,b}function h(a,b){var c=[];if(a&&a.trc&&a.trc.vl){var d=a.trc.vl;if(TRC.util.isArray(d))for(var e=0;e<d.length;e++){var f=d[e];if(f.mn&&!b[f.mn]){var g={name:f.mn,revision:f.mr,mode:null};c.push(g)}}}return c.sort(function(a,b){return a.name>b.name?1:-1}),c}function i(a){if(a&&a.trc&&a.trc.vl){for(var b=a.trc.vl,c=0;c<b.length;c++){var d=b[c];delete d.t,d.m=d.mn}a.trc&&a.trc.t&&delete a.trc.t}}function j(a,b){a.isWaitingForModes=!1,b()}var k,l,m,n=encodeURIComponent("."),o=encodeURIComponent("|"),p={loadedModes:{},yieldDynamicModeLoad:function(a,b,g){function l(c){if(b.isWaitingForModes=!1,c)for(var d in c)if(c.hasOwnProperty(d)){var e=d.split(n)[0];TRC.mdl.loadedModes[e]=c[d],TRC.cssStack.addStyle("mode",c[d]._style,TRC.styleInjected),TRC.cssStack.addStyle("custom",c[d]._customStyle,TRC.styleInjected)}TRC.styleInjected||TRC.cssStack.injectAllStyles();for(var f in TRC.mdl.loadedModes)TRC.mdl.loadedModes.hasOwnProperty(f)&&(TRCImpl.modes[f]=TRC.mdl.loadedModes[f]);k&&i(a),g()}var o="https://modes.taboola.com";if(k=c(a,b))if(TRC.mdl.loadedModes=TRC.mdl.loadedModes||{},m=h(a,TRC.mdl.loadedModes),m.length>0){var p=TRC.networkId?TRC.networkId:TRC.publisherId,q=d(o,m,e,b.version,p);f(q,l.trcBind(this),b,g)}else j(b,g);else j(b,g)},isLoaded:function(a){return TRC.mdl.loadedModes=TRC.mdl.loadedModes||{},!!TRC.mdl.loadedModes[a]}};return p}(window,document),TRC.net=function(a,b){var c={},d=[],e={loadScript:function(a,c,d,e,f){var g=b.getElementsByTagName("script")[0],h=null;if("js"==c)h=b.createElement("script"),h.type="text/javascript",h.src=a,h.charset="UTF-8",e?h.setAttribute("defer","defer"):f&&h.setAttribute("async","async");else{if("css"!=c)throw new Error("External reference loaded must be of type 'js' or 'css'!");h=b.createElement("link"),h.rel="stylesheet",h.type="text/css",h.href=a}return"function"==typeof d&&(h.addEventListener?(h.addEventListener("load",d,!1),h.addEventListener("error",d,!1)):h.onreadystatechange=function(){("loaded"==h.readyState||"complete"==h.readyState)&&d.apply(h)}),g.parentNode.insertBefore(h,g),h},checkLoadJsCssFile:function(a,b,d){var e=a.replace(new RegExp("^.*/([^/]+)$"),"$1");try{return"undefined"==typeof c[e]?(c[e]=TRC.net.loadScript(a,b,d),"css"==b&&(c.css=1)):"function"==typeof d&&TRC.Timeout.set(function(){d.apply(c[e])},0),c[e]}catch(f){__trcError("Error trying to load "+a,f)}},fireSimpleHttpRequest:function(a){var b=new Image;b.src=a,d.push(b)}};return e}(window,document),function(){TRC.InvokePVideoLoader=function(){TRC.PVideoLoader=function(a,b,c,d){this.blockVideo=d.blockThumbnailVideoLoader,this.blockVideo||(TRC.VideoLoader.call(this,a.trc,b,a.placement,a.container,c),this.rbox=a)},TRC.PVideoLoader.prototype=__trcObjectCreate(TRC.VideoLoader.prototype),TRC.VideoLoader.prototype.ITEM_ID_SEPARATOR="~~",TRC.PVideoLoader.prototype.getCallbacksObjectKey=function(){return"pVideoCallbacks"},TRC.PVideoLoader.prototype.genVideoCallback=function(videoCallbackParams){var videoCallbackName=this.generateCallbackName(),that=this;return TRC.pVideoCallbacks[videoCallbackName]=function(data){if(data=data||{},data.tags&&data.tags[0]){var unitBootSrc=data.tags[0].unitBootSrc||that.videoConfig.unitBootSrc,script=document.createElement("script");script.src=unitBootSrc,script.setAttribute("type","text/javascript"),script.setAttribute("src",unitBootSrc),script.onload=function(){var unit=eval(data.tags[0].url),viewabilityConfig=that.videoConfig.autoTriggerConfig.viewabilityConfig;if(-1==viewabilityConfig.time&&(viewabilityConfig.time=0,viewabilityConfig.percentage=101),unit.set("pVideoUrl",videoCallbackParams.url),unit.set("playerContainer",videoCallbackParams.playerContainer),unit.set("components.PosterView",{isActive:!0,imageLocation:videoCallbackParams.poster}),unit.set("customization.placeHolder.background-color","black"),unit.set("viewPercent",viewabilityConfig.percentage),unit.set("secondsInView",viewabilityConfig.time),unit.set("isPlayOnHover",that.videoConfig.autoTriggerConfig.hover),unit.set("isRepeat",that.videoConfig.repeat),that.videoConfig.videoEventsEnabled){var videoDataForEvent=that.getVideoDataForEvent(videoCallbackParams.itemIndex,videoCallbackParams.itemId);unit.on("error",function(){that.sendDebugEvent("error",videoDataForEvent)}),unit.on("eligible",function(){that.sendDebugEvent("eligible",videoDataForEvent)}),unit.on("play",function(a){that.sendDebugEvent("play",videoDataForEvent,a)}),unit.on("render",function(){that.sendDebugEvent("rendered",videoDataForEvent)}),unit.on("quarterly",function(a){that.sendDebugEvent("quarterly",videoDataForEvent,a)}),unit.on("complete",function(){that.sendDebugEvent("complete",videoDataForEvent)})}TRC.tlf&&console.timeEnd("in setVideoPlayerLoad"),TRC.tlf&&console.timeStamp("end setVideoPlayerLoad")},document.getElementsByTagName("head")[0].appendChild(script)}},"TRC."+this.getCallbacksObjectKey()+"."+videoCallbackName},TRC.PVideoLoader.prototype.sendDebugEvent=function(a,b,c){var d,e=window.trc_debug_level;d={event:a,data:c?c:null,rii:b.rii,
placement:b.placement,mode:b.modeName,itemIndex:b.itemIndex,itemId:b.itemId},window.trc_debug_level=3,__trcDebug("Performance Video Event: "+JSON.stringify(d)),window.trc_debug_level=e},TRC.PVideoLoader.prototype.getVideoDataForEvent=function(a,b){return{rii:this.rbox.response.trc.req,placement:this.rbox.placement,modeName:this.rbox.mode_name,itemIndex:a,itemId:this.extractRealItemId(b)}},TRC.PVideoLoader.prototype.extractRealItemId=function(a){if(!a)return null;var b=a.split(this.ITEM_ID_SEPARATOR)[2];return b&&b.length>0&&!isNaN(parseFloat(b))&&isFinite(b)?b:null}}}(),function(a,b){function c(b){if(TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui page_management parseXML"),a.DOMParser){var c=new DOMParser;return c.parseFromString(b,"text/xml")}if(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.validateOnParse=!1,!xmlDoc.loadXML(b))throw"XMLParsing failed";return xmlDoc}function d(){function a(){var a,d,e=new Array;for(var f in c)c.hasOwnProperty(f)&&null!=c[f]&&(e[e.length]=escape(f)+"="+escape(c[f]));a=e.length>0?1:-1,d=new Date((new Date).getTime()+365*a*864e5),document.cookie=b+"="+escape(e.join("|"))+";path=/;expires="+d.toUTCString()}for(var b="trc_cookie_storage",c=new Object,d=document.cookie.split(/;\s+/),e=0;e<d.length;e++){var f=TRC.text.lsplit(d[e],"=",2),g=unescape(f[0]),h=unescape(f[1]);if(g==b){for(var i=h.split("|"),j=0;j<i.length;j++){var f=i[j].split("=");c[unescape(f[0])]=unescape(f[1])}break}}return this.getValue=function(a){return c.hasOwnProperty(a)?c[a]:null},this.setValue=function(b,d){c[b]=d,a()},this.removeKey=function(b){delete c[b],a()},this}function e(a){var b=a||{};return this.getValue=function(a){return b[a]?b[a]:null},this.setValue=function(a,c){b[a]=c},this.removeKey=function(a){delete b[a]},this.getData=function(){return b},this}function f(b){return this.getValue=function(c){return a[b+"Storage"].getItem(c)},this.setValue=function(c,d){try{a[b+"Storage"].setItem(c,d)}catch(e){}},this.removeKey=function(c){try{a[b+"Storage"].removeItem(c)}catch(d){}},this}function g(b){var c=a[b+"Storage"],d=(new Date).getTime()+"",e="_taboolaStorageDetection";try{if(c.setItem(e,d),c.getItem(e)==d)return c.removeItem(e),c}catch(f){}return null}function h(b){try{if(a.localStorage instanceof Storage&&TRC.useStorageDetection&&g(b))return new f(b)}catch(c){return null}}a.TRC=a.TRC||{};var i,j=!1,k="taboola global",l="trctestcookie",m=function(){return this.publisher_id=null,this.item_id=null,this.page_id=null,this.state={},this.stateStack=[],this.getLocalStorageImplementation=function(b,c){if(null!=this.state.privateStorageImpl&&"strict-w3c-storage"!=b)return this.state.privateStorageImpl;var f=a.TRCImpl?a.TRCImpl.global:{};switch(b=b||(f["local-storage-usage"]?f["local-storage-usage"]:"prefer-w3c-storage")){case"strict-w3c-storage":return h("session"===c?"session":"local");case"prefer-w3c-storage":var g=h("local");if(g)return this.state.privateStorageImpl=g;case"prefer-cookies":try{if(this.canWriteCookies())return this.state.privateStorageImpl=new d}catch(i){}default:return this.state.privateStorageImpl=new e}},this.getFirstPartyCookie=function(){if(this.state.firstPartyCookie)return this.state.firstPartyCookie;var a=this.getLocalStorageImplementation();if(a instanceof d||a instanceof e)return this.state.firstPartyCookie=a;try{if(this.canWriteCookies())return this.state.firstPartyCookie=new d}catch(b){}return this.state.firstPartyCookie=new e},this.canWriteCookies=function(){var a;return document.cookie=l+"=ok",a=-1!==document.cookie.indexOf(l),document.cookie=l+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",a},this.getDummyStorage=function(a){return new e(a)},this.trcParseParams=function(a){if(a&&!owner.item_id)for(var b=a.split("&"),c=0;c<b.length;c++){var d=TRC.text.lsplit(b[c],"=",2);switch(unescape(d[0])){case"item_id":owner.item_id=unescape(d[1]);break;case"publisher_id":owner.publisher_id=unescape(d[1])}}},this.trcGetPublisherParams=function(){for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var c=a[b].src.split("taboola(syndication)?.com/libtrc/")[1];if(c&&a[b].src.search(/taboola(syndication)?.com.*page_management/)>=0){c=c.split("?")[0];var d=c.split("/");owner.page_id=d[0],d.length>2&&(owner.page_id+="/"+d[1]),owner.trcParseParams(a[b].src.split("?")[1])}}},this.getPageData=function(){var a=this.getTopMostWindow();return a.taboola_view_id||(a.taboola_view_id=(new Date).getTime()),a.taboola_view_id},this.storeValue=function(a,b){this.storePublisherValue(k,a,b)},this.removeKey=function(a){this.removePublisherKey(k,a)},this.getValue=function(a){return this.getPublisherValue(k,a)},this.storePublisherValue=function(a,b,c){var d;this.isNotAllowedToWriteValue(b,c)||(d=this.buildKeyWithPublisher(a,b),this.getLocalStorageImplementation().setValue(d,c),this.addKeyToStoredKeysList(d))},this.isNotAllowedToWriteValue=function(a,b){return null==b||void 0==b||TRC.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(a)},this.buildKeyWithPublisher=function(a,b){return a+":"+b},this.getPublisherValue=function(a,b){return TRC.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(b)?null:this.getLocalStorageImplementation().getValue(this.buildKeyWithPublisher(a,b))},this.removePublisherKey=function(a,b){return this.getLocalStorageImplementation().removeKey(this.buildKeyWithPublisher(a,b))},this.removeAllKeys=function(){for(var a,b=this.getStoredKeysList(),c=[],d=0;d<b.length;d++)a=b[d],this.isAllowedKeyWhenDoNotTrack(a)?c.push(a):this.getLocalStorageImplementation().removeKey(a);this.setStoredKeysList(c)},this.addKeyToStoredKeysList=function(a){var b=this.getStoredKeysList();-1===b.indexOf(a)&&(b.push(a),this.setStoredKeysList(b))},this.getStoredKeysList=function(){var a,b=this.getLocalStorageImplementation().getValue(this.buildKeyWithPublisher(k,"local-storage-keys"));try{a=TRC.util.jsonParseWithNative(b)||[]}catch(c){a=[],__trcError("Could not parse local storage keys",c)}return a},this.setStoredKeysList=function(a){var b;try{b=__trcJSONify(a),this.getLocalStorageImplementation().setValue(this.buildKeyWithPublisher(k,"local-storage-keys"),b)}catch(c){return void __trcError("Could not stringify local storage keys",c)}},this.isAllowedKeyWhenDoNotTrack=function(b){var c,d=a.TRCImpl?a.TRCImpl.global||{}:{},e=d["dnt-allowed-keys"]||["session-id","trc_css-isolation"];return null===b||void 0===b?!1:(c=b.split(":")[1]||b,-1!==e.indexOf(c))},this.removeUserId=function(){TRC.pageManager.removeKey("user-id"),TRCImpl.global["store-userid-first-party-cookie"]&&this.getFirstPartyCookie().removeKey(this.buildKeyWithPublisher(k,"user-id"))},this.storeUserId=function(a){this.isNotAllowedToWriteValue("user-id",a)||(this.storePublisherValue(k,"user-id",a),TRCImpl.global["store-userid-first-party-cookie"]&&this.getFirstPartyCookie()!==this.getLocalStorageImplementation()&&this.getFirstPartyCookie().setValue(this.buildKeyWithPublisher(k,"user-id"),a))},this.getUserIdFirstPartyCookie=function(){return this.getFirstPartyCookie().getValue(this.buildKeyWithPublisher(k,"user-id"))},this.sortByLength=function(a,b){return a.domain.lenth-b.domain.length},this.setDomainConfiguration=function(a){try{var b=c(a);if("domains"!=b.documentElement.tagName||b.getElementsByTagName("domain").length<1)throw"Invalid configuration document: "+a;var d=b.getElementsByTagName("domain");this.state.m_publisherDomains={host:[],path:[],query:[]};for(var e=0;e<d.length;e++){var f=d[e],g=this.state.m_publisherDomains[f.getAttribute("type")];if(!(g instanceof Array))throw"Invalid domain type in configuration: "+f.getAttribute("type");g.push({domain:f.text?f.text:f.textContent,keep:f.getAttribute("keep")?!0:!1,staging:f.getAttribute("staging")?!0:!1})}}catch(h){this.state.m_publisherDomains={}}},this.matchOn=function(a,b,c){if(!a||a.length<1)return[];if(a.matching)return a.matching.slice(0);a.matching=[];for(var d=0;d<a.length;d++)b(c,a[d].domain)&&a.matching.push(a[d]);return a.matching.slice(0)},this.getMatchingHosts=function(){return this.matchOn(this.state.m_publisherDomains.host,function(a,b){return a.slice(a.length-b.split(".").length).join(".")==b},a.location.host.split("."))},this.getMatchingPaths=function(){return this.matchOn(this.state.m_publisherDomains.path,function(a,b){return a.slice(0,b.split("/").length).join("/")==b},a.location.pathname.split("/"))},this.getMatchingQuery=function(){return this.matchOn(this.state.m_publisherDomains.query,function(a,b){for(var c=b.split("&"),d=0;d<c.length;d++){for(var e=c[d].split("="),f=!1,g=0;g<a.length;g++){var h=a[g].split("=");f=f||unescape(e[0])==unescape(h[0])&&unescape(e[1])==unescape(h[1])}if(!f)return!1}return!0},a.location.search.replace(/^\?/,"").split("&"))},this.getTopMostWindow=function(){var b;try{b=a.top,b.TRC=b.TRC||{},b.TRC||(b=a)}catch(c){b=a}return b},this.isEmbeddedView=function(){return this.state.m_publisherDomains.host&&this.state.m_publisherDomains.host.length&&this.getMatchingHosts().length<=0&&a.location.host.search(/taboola\w*.com$/)<0},this.isStagingView=function(){return this.isEmbeddedView()?!1:function(){for(var a=0;a<arguments.length;a++)if(function(a){for(;a.length>0;)if(a.shift().staging)return!0}(arguments[a]))return!0;return!1}(this.getMatchingHosts(),this.getMatchingPaths(),this.getMatchingQuery())},this.fixRecommendationURL=function(b){function c(a,b){for(var c=a.substring(1).split("/").reverse(),d=b.substring(1).split("/"),e="",f=0;f<d.length&&f<c.length;f++)for(var g=0;g<c.length;g++){if(0>f-g){e="/"+d.slice(0,f+1).join("/");break}if(c[g]!=d[f-g])break}return b.substring(e.length)}function d(a){for(var b={},c=0;c<a.length;c++)kv=TRC.text.lsplit(a[c],"=",2),b[kv[0]]=kv[1];return b}TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui page_management fixRecommendationURL");var e;try{e=new TRC.URL(b)}catch(f){return b}var g=this.getMatchingHosts().sort(this.sortByLength);if(g.length<1)return b;for(;g.length>0&&!g[0].keep;)g.shift();g.length>0&&(e.host=a.location.host);for(var h=this.getMatchingPaths().sort(this.sortByLength);h.length>0&&!h[0].keep;)h.shift();h.length>0&&(e.pathname=h[0].domain+c(h[0].domain,e.pathname));var i=this.getMatchingQuery(),j=e.search.replace(/^\?/,"").split("&");""==j[0]&&j.shift();for(var k=0;k<i.length;k++){for(var l=d(i[k].domain.split("&")),k=0;k<j.length;k++){var m=TRC.text.lsplit(j[k],"=",2).shift(),n=l[m];"undefined"!=typeof n&&(j[k]=m+"="+n,delete l[m])}for(var m in l)j.push(m+"="+l[m])}return e.search=j.length>0?"?"+j.join("&"):"",e.toString()},this.additionalDispatchParams=function(){return null==this.state.moreDispatchParams&&(this.state.moreDispatchParams=this.getCurrentURL().filtered),0==this.state.moreDispatchParams.length?"":"&"+this.state.moreDispatchParams.join("&")},this.getForceTrcCache=function(){return j},this.getCurrentURL=function(){var b=new TRC.URL(a.location.href),c=[],d=[];b.search.replace(/^\?/,"").split(/&/).forEach(function(a){a&&(0==a.search("trc_")||"taboola-debug"==a?(j=new Boolean(a.match(/trc_cache/)).valueOf(),d.push(a)):c.push(a))}),b.search=c.length>0?"?"+c.join("&"):"";var e=new String(b.toString());return e.filtered=d,e},this.initState=function(){"undefined"==typeof this.state&&(this.state={}),this.state.privateStorageImpl=null,this.state.m_publisherDomains={host:[],path:[],query:[]},this.state.moreDispatchParams=null},this.pushState=function(){this.stateStack.push(this.state),delete this.state,this.initState()},this.popState=function(){this.stateStack.length>0&&(this.state=this.stateStack.pop())},this.initState(),this};m.getPageData=function(){return i.getPageData()},m.storeValue=function(a,b){return i.storeValue(a,b)},m.storePublisherValue=function(a,b,c){return i.storePublisherValue(a,b,c)},m.getValue=function(a){return i.getValue(a)},m.getPublisherValue=function(a,b){return i.getPublisherValue(a,b)},m.setDomainConfiguration=function(a){return i.setDomainConfiguration(a)},m.isEmbeddedView=function(){return i.isEmbeddedView()},m.isStagingView=function(){return i.isStagingView()},m.fixRecommendationURL=function(a){return i.fixRecommendationURL(a)},m.additionalDispatchParams=function(){return i.additionalDispatchParams()},m.getCurrentURL=function(){return i.getCurrentURL()},m.pushState=function(){return i.pushState()},m.popState=function(){return i.popState()},TRC.pageManager=i=TRC.pageManager||new m,a.PageManager=a.PageManager||m}(window,document),function(a,b){var c=TRC.PostRenderQueue=function(){return this.backend=[],this};c.prototype.pushBack=function(a,b){__trcDebug("postRenderQueue.pushBack("+a+")"),this.backend.push({name:a,func:b})},c.prototype.pushFront=function(a,b){__trcDebug("postRenderQueue.pushFront("+a+")"),this.backend.unshift({name:a,func:b})},c.prototype.popFront=function(){if(0==this.backend.length)return null;var a=this.backend.shift();return"function"==typeof a?{name:"unknown",func:a}:a}}(window,document),function(){function a(a,b,c,d){this.parentFeed=a,this.trcManager=b,this.options=d,this.container=a.container,this.origContainer=this.container,this.publisherCards=[],this.publisherCardMaxRetries=b.global["feed-split-max-retries"]||5,this.publisherCardRetryInterval=b.global["feed-split-retry-interval"]||1e3,this.systemFlags=b.systemFlags&&"thin"===b.systemFlags.loaderType,this.feedDynamicParameters=this.options.feedDynamicParameters,this.shouldStopFeedOnMissingPublisherCard=this.feedDynamicParameters&&"STOP"===this.feedDynamicParameters.missingPublisherCardFeedStrategy||"STOP"===this.trcManager.global["missing-publisher-card-feed-strategy"]}a.prototype.handlePublisherCard=function(a,b,c,d){this.publisherCards.reverse(),c=c||this.publisherCards[0],a=a||0;var e=c.tps,f=document.querySelector(e),g=c.sun||c.pun;return f&&f.parentNode?(this.createFeedContainerForResumeAfterPublisherCard(f,c),TRC.modDebug.logMessageToServer(2,"Load publisher card: "+g+" on Card: "+b+" with the anchor element selector: "+e+" succeed",{idx:"pc",pc:g,st:1}),this.publisherCards=[],void this.parentFeed.setIsAllowedToRequestMoreContent(!0)):(this.parentFeed.setIsAllowedToRequestMoreContent(!1),void(a<this.publisherCardMaxRetries?(a++,setTimeout(this.handlePublisherCard.trcBind(this,a,b,c),this.publisherCardRetryInterval)):(a=0,this.publisherCards.shift(),this.publisherCards.length?setTimeout(this.handlePublisherCard.trcBind(this,a,b,this.publisherCards[0]),this.publisherCardRetryInterval):(d||this.shouldStopFeedOnMissingPublisherCard?this.parentFeed.stopScrolling():(this.publisherCards=[],this.parentFeed.setIsAllowedToRequestMoreContent(!0),TRC.dispatch("resumeFeedRendering")),TRC.modDebug.logMessageToServer(1,"Load publisher card: "+g+" on Card: "+b+" with the anchor element selector: "+e+" failed after "+this.publisherCardMaxRetries+" retries",{idx:"pc",pc:g,st:0,sel:e,slot:b,plat:this.trcManager.getPlatformCode()})))))},a.prototype.createFeedContainerForResumeAfterPublisherCard=function(a,b){var c,d=document.createElement("div");this.parentFeed.numContainers++,this.parentFeed.switchMainContainer(d),this.parentFeed.setMainContainerCssClassesAndAttributes(d,this.options),a.parentNode.insertBefore(d,a.nextElementSibling),b&&(TRC.util.isTrue(b.scw)||TRC.util.isTrue(b.acw))&&(this.setPublisherCardContainerStyle(d),TRC.dom.on(window,"resize",this.setPublisherCardContainerStyle.trcBind(this,d))),this.parentFeed.isFullWidthMobileFeed(this.options)&&(c=this.parentFeed.getMobileFullWidthMarginsCss(this.parentFeed.numContainers),c&&TRC.dom.injectStyle(c,null,this.systemFlags))},a.prototype.getContainerWidth=function(a){return getComputedStyle(a).width},a.prototype.getPageDirection=function(){return"rtl"==this.trcManager.direction?"right":"left"},a.prototype.setPublisherCardContainerMargin=function(a){var b,c,d,e=this.getPageDirection(),f=this.origContainer.getBoundingClientRect()[e],g=a.getBoundingClientRect()[e],h=1;f!==g&&("right"===e?(d="marginRight",h=-1):d="marginLeft",b=parseInt(getComputedStyle(a)[d]),c=(f-g+b)*h+"px",a.style[d]=c)},a.prototype.setPublisherCardContainerStyle=function(a){var b=this.getContainerWidth(this.origContainer),c=this.getContainerWidth(a),d=this.options.feedDynamicParameters,e=d&&d.disableFeedSplitContainerAlignment||this.trcManager.global["disable-feed-split-container-alignment"],f=b===c;f&&e||(f||(a.style.width=b),e||this.setPublisherCardContainerMargin(a))},a.prototype.createPublisherCardsArr=function(a){this.publisherCards.push(a)},a.prototype.getPublisherCardsArr=function(){return this.publisherCards},TRC.PublisherCard=a}(),function(){TRC.RboxMap=function(){var a,b=7,c="14",d="trc_map",e={},f=!1;return this.isValidForMapping=function(a){var e,f,g,h,i=(new Date).getTime(),j=864e5*b;if(a){if(e=a.getValue(d),!e)return!0;if(h=e.split(";"),f=h[0],g=h[1],c>g)return a.removeKey(d),!0;if(i-f>j)return a.removeKey(d),!0}return!1},this.setStorage=function(){var b=(new Date).getTime();try{a.setValue(d,b+";"+c)}catch(e){}},this.init=function(){try{return a=TRC.pageManager.getLocalStorageImplementation("strict-w3c-storage","local"),this.isValidForMapping(a)?this:{disabled:!0}}catch(b){return{disabled:!0}}},this.sendDebugMap=function(a){try{f||(f=!0,this.setStorage()),e[a]?e[a]++:(e[a]=1,TRC.modDebug.logMessageToServer(4,a))}catch(b){}},this.init()}}(window.document),!function(a,b){function c(a,b,c){c=c||"en";var d={caption:a&&a.caption||b&&b.caption||p[c]&&decodeURIComponent(p[c])||"Read More",boxSelector:a&&a.boxSelector||b&&b.boxSelector||null,threshold:a&&a.threshold||b&&b.threshold||1100,backgroundColor:a&&a.backgroundColor||b&&b.backgroundColor||"#fff",minimizedSize:a&&a.minimizedSize||b&&b.minimizedSize||800,scrollSize:a&&a.scrollSize||b&&b.scrollSize||800,buttonTop:a&&a.buttonTop||b&&b.buttonTop||48,buttonBottom:a&&a.buttonBottom||b&&b.buttonBottom||28,divTop:a&&a.divTop||b&&b.divTop||38,gradient:a&&a.gradient||b&&b.gradient||40,cutoffType:a&&a.cutoffType||b&&b.cutoffType||"ARTICLE",anchorSelector:a&&a.anchorSelector||b&&b.anchorSelector||null,lengthFromAnchorElementType:a&&a.lengthFromAnchorElementType||b&&b.lengthFromAnchorElementType||"BELOW",lengthFromAnchorElement:a&&a.lengthFromAnchorElement||b&&b.lengthFromAnchorElement||30};return d}function d(a){var b=a.backgroundColor;return"."+m+" {max-height:inherit;}."+m+".tbl-forkorts-article-active  {max-height:"+a.minimizedSize+"px;overflow: hidden;position: relative;}.tbl-read-more-btn {display: inline-block!important;margin: "+a.buttonTop+"px 0 "+a.buttonBottom+"px !important;line-height: 38px!important;text-align: center!important;white-space: nowrap!important;vertical-align: middle!important;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer!important;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none!important;border: 1px solid #93abbc!important;color: #326891!important;background-color: #edf2f5!important;border-color: #2e6da4;height: 38px!important;width: 250px!important;font-size: 15px!important;font-weight: bold!important;border-radius: 3px!important;font-family: sans-serif!important;}.tbl-read-more-btn:hover {background-color: #bed0dc!important;border-color: #7399b3!important;color: #326891!important;}.tbl-read-more-box {position: absolute;z-index: 4;left: 0;right:0;bottom: 0;display: none;text-align: center;padding: "+a.divTop+"px 12px 12px;background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%,  "+b+"  "+a.gradient+"%,  "+b+"  100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(50%, "+b+" ), color-stop(100%, "+b+" ));background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='"+b+"',GradientType=0 );}."+m+"-active .tbl-read-more-box{display:block;}"}function e(){return a.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop}function f(a){var c=b.querySelector("."+m);a.preventDefault(),a.stopPropagation(),c.classList.remove(m+"-active"),c.style.maxHeight="",this.sendEvent("readmore",{},null,!0),TRC.EventsAPI.readmore("click",this.response&&this.response.trc)}function g(a,c){var d=b.createElement("div");return d.className="tbl-read-more-box",d.innerHTML="<a id ='"+o+"_"+c+"' class='tbl-read-more-btn' href='#'>"+a.caption+"</a>",d}function h(b,c){var d=a.trc_debug_level;a.trc_debug_level=3,__trcDebug("Read More : "+b+" - "+c),a.trc_debug_level=d}function i(c,d){var e=c.context||d.context;"parent"===e&&(a=a.parent,b=a.parent.document),"top"===e&&(a=a.top,b=a.top.document)}function j(a,c){var d=c||"kortWidgetCssStyle",e=b.querySelector("#"+d);e&&e.parentNode.removeChild(e),e=b.createElement("div"),e.id=d,e.innerHTML=["&shy;","<style>",a,"</style>"].join(""),b.documentElement.appendChild(e)}function k(a,c,d){var e,f;if("PAGE_ELEMENT"==a.cutoffType&&(f=b.querySelector(a.anchorSelector))){var g=f.getBoundingClientRect(),h=c.getBoundingClientRect();"ABOVE"===a.lengthFromAnchorElementType?e=g.top-h.top-a.lengthFromAnchorElement:(e=g.bottom-h.top+a.lengthFromAnchorElement,e+=d.getBoundingClientRect().height)}return e}function l(l){var p=!1;try{TRC.tlf&&console.time("init Read More");var q,r,s,t=c(l.readMorePageConfig,l.readMoreConfig,l.trc.language),u=l.isReadMoreDebug;i(l.readMorePageConfig,l.readMoreConfig),a.matchMedia&&t.boxSelector?(r=b.querySelector(t.boxSelector),r?b.querySelector("."+m)!==r?r.offsetHeight>=t.threshold&&e()<t.scrollSize?(r.className+=n,j(d(t)),q=g(t,l.id),r.appendChild(q),s=k(t,r,q),s&&(r.style.maxHeight=s+"px"),p=!0,TRC.EventsAPI.readmore("render",l.response&&l.response.trc),b.querySelector("#"+o+"_"+l.id).addEventListener("click",f.trcBind(l),!1)):u&&h("dimensions exception",l.mode_name):u&&h("box content already in use",l.mode_name):u&&h("box content not detected",l.mode_name)):u&&h("no box selector defined",l.mode_name),TRC.tlf&&console.timeEnd("init Read More")}catch(v){__trcError("Error read more init",v)}p||TRC.EventsAPI.readmore("none",l.response&&l.response.trc)}var m="tbl-forkorts-article",n=" "+m+" "+m+"-active",o="tbl-read-more-box-btn",p={de:"Weiterlesen",el:"%CE%94%CE%B9%CE%B1%CE%B2%CE%AC%CF%83%CF%84%CE%B5%20%CE%A0%CE%B5%CF%81%CE%B9%CF%83%CF%83%CF%8C%CF%84%CE%B5%CF%81%CE%B1",en:"Read%20More",es:"Leer%20M%C3%A1s",fr:"Lire%20La%20Suite",he:"%D7%A7%D7%A8%D7%90%20%D7%A2%D7%95%D7%93",hi:"%E0%A4%94%E0%A4%B0%20%E0%A4%AA%E0%A4%A2%E0%A4%BC%E0%A5%87%E0%A4%82",it:"Per%20saperne%20di%20pi%C3%B9",jp:"%E7%B6%9A%E3%81%8D%E3%82%92%E8%AA%AD%E3%82%80",ko:"%EC%9E%90%EC%84%B8%ED%9E%88%EB%B3%B4%EA%B8%B0",nl:"Lees%20Meer",pt:"Leia%20Mais",ru:"%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C%20%D0%B4%D0%B0%D0%BB%D0%B5%D0%B5",ta:"%E0%AE%AE%E0%AF%87%E0%AE%B2%E0%AF%81%E0%AE%AE%E0%AF%8D%20%E0%AE%AA%E0%AE%9F%E0%AE%BF%E0%AE%95%E0%AF%8D%E0%AE%95",th:"%E0%B8%AD%E0%B9%88%E0%B8%B2%E0%B8%99%E0%B9%80%E0%B8%9E%E0%B8%B4%E0%B9%88%E0%B8%A1%E0%B9%80%E0%B8%95%E0%B8%B4%E0%B8%A1"};TRC.setReadMore=l}(window,document),function(){TRC.ScriptRenderer={render:function(a,b){return a&&a.js?(a.normalizedTag=TRC.text.htmlUnescape(a.js),void this.renderInIframe(this.createIframe(b.container),a)):void __trcError("could not find script to render")},createIframe:function(a){if(!a)return void __trcError("could not find container to create Iframe within");var b=document.createElement("iframe");return b.style.border=b.frameBorder=b.border="0",b.style.display="block",b.scrolling="no",a.appendChild(b),b},renderInIframe:function(a,b){if(!a)return void __trcError("could not find iframe to render within");var c=a.contentWindow||a.contentDocument;c.document&&(c=c.document),this.setOuterIframeStyle(a,b),this.runTagInIframe(c,b.normalizedTag),this.resetStyleInIframe(c)},setOuterIframeStyle:function(a,b){a.style.width=b.w||"0px",a.style.height=b.h||"0px"},runTagInIframe:function(a,b){return"undefined"==typeof b||null===b?void __trcError("could not find normalizedTag to render"):(a.open(),a.write(b),void a.close())},resetStyleInIframe:function(a){var b=a.createElement("style"),c="body { margin: 0px }";b.type="text/css",b.styleSheet?b.styleSheet.cssText=c:b.appendChild(a.createTextNode(c)),a.getElementsByTagName("head")[0].appendChild(b)}}}(),function(){TRC.SingleVideoManagerUnitLoader=function(a,b){this.trcManager=b,this.videoConfig=a,this.parentFeedOptions=a.parentFeedOptions},TRC.SingleVideoManagerUnitLoader.prototype.loadUnit=function(videoCallbackData){var unit;return unit=eval(videoCallbackData.tags[0].url),this.setUnitParams(unit),unit},TRC.SingleVideoManagerUnitLoader.prototype.getVideoContainerSelector=function(){return null},TRC.SingleVideoManagerUnitLoader.prototype.setUnitParams=function(a){var b=this.videoConfig.distanceRepeat||0,c=TRC.util.isTrue(this.videoConfig.startFromSlider),d=TRC.util.isTrue(this.videoConfig.detachToSlider),e=TRC.util.isTrue(this.videoConfig.detachToSliderAnimation),f=this.videoConfig.videoAbTest||null,g=this.videoConfig.startCard||null,h=this.videoConfig.maxVideoCards||null,i=this.videoConfig.permanentCard||null,j=this.videoConfig.aggLevel||1,k={level:j},l=this.parentFeedOptions.feedDynamicParameters,m=l&&l.videoDisclosurePosition||this.parentFeedOptions.videoDisclosurePosition||this.trcManager.global["video-disclosure-position"];a.set("distanceRepeat",b),a.set("detachToSlider.isStartFromSlider",c),a.set("detachToSlider.isDetachToSlider",d),a.set("detachToSlider.animation",e),a.set("abTest",f),j>1&&a.set("preset",k),g&&a.set("startCard",g),h&&a.set("maxVideoCards",h),i&&a.set("permanentCard",i),m&&a.set("components.adChoice.position",m)}}(),function(a,b){var c="trc_slider",d=c+"_animate",e="vertical",f="horizontal",g="top",h="bottom",i="left",j="right",k=44,l=TRC.SliderManager=function(l){var m,n=b.createElement("div"),o=TRC.dom.createAugmentingContainers(3,n),p=TRC.dom.generateAugmentationPrefix(o);switch(this.rbox=l,this.sliderContainer=n,this.accumulatedScroll=0,this.scrollRefElement=l.trc.getFunction(l.mode_name,"slider-scroll-ref-element",l.propertiesOverride),this.slideFrom=l.trc.getProperty(l.mode_name,"slider-slide-from"),this.minEffectiveScrollSize=l.trc.getProperty(l.mode_name,"slider-min-effective-scroll-size"),this.transitionDuration=l.trc.getProperty(l.mode_name,"slider-transition-duration"),this.transitionDelay=l.trc.getProperty(l.mode_name,"slider-transition-delay"),this.backgroundColor=l.trc.getProperty(l.mode_name,"slider-background-color"),this.closeBtnFontSize=l.trc.getProperty(l.mode_name,"slider-close-btn-font-size"),this.closeBtnSize=l.trc.getProperty(l.mode_name,"slider-close-btn-size"),this.closeBtnColor=l.trc.getProperty(l.mode_name,"slider-close-btn-color"),this.sliderZIndex=parseInt(l.trc.getProperty(l.mode_name,"slider-z-index"),10),this.lastScrollTop=this.getScrollTop(),this.closeBtnNeedsTouchPadding=TRC.Device.isTouchDevice&&parseInt(this.closeBtnSize,10)<k,this.slideFrom){case g:case h:this.slideDirection=e;break;case i:case j:this.slideDirection=f}TRC.dom.injectStyle(this.createCSS(p)),TRC.dom.addClass(this.sliderContainer,c),this.createCloseBtn(),this.sliderContainer.appendChild(this.closeBtn),this.closeBtnNeedsTouchPadding?(this.sliderContainer.appendChild(this.closeBtnTouchPadding),m=this.closeBtnTouchPadding):m=this.closeBtn,this.sliderContainer.appendChild(l.outermostContainer),b.body.appendChild(o[0]),TRC.eventDelegator.subscribe("onrender",function(){this.slideOut(),TRC.dom.on(this.scrollRefElement,"scroll",this.sliderScrollHandler.trcBind(this).trcThrottle(10)),(/(iPad|iPhone|iPod touch);.*CPU.*OS (4|5|6|7)_\d/.test(navigator.userAgent)||/CriOS/.test(navigator.userAgent))&&(TRC.dom.on(a,"touchstart",this.sliderScrollHandler.trcBind(this)),TRC.dom.on(a,"touchend",this.sliderScrollHandler.trcBind(this)),TRC.dom.on(a,"touchmove",this.sliderScrollHandler.trcBind(this))),setTimeout(function(){TRC.dom.addClass(this.sliderContainer,d)}.trcBind(this),0)}.trcBind(this),l.container.id),TRC.dom.on(m,"click",this.closeClickHandler.trcBind(this))};l.prototype.sliderScrollHandler=function(){var c,d,e=this.getScrollTop(),f="up",g="down",h=b.body.scrollHeight-(a.innerHeight||b.documentElement.clientHeight),i=function(){var b=10;return TRC.Device.isTouchDevice&&Math.abs(Math.round(this.sliderContainer.clientWidth)-Math.round(a.innerWidth))>b};return i.trcBind(this)()?(this.slideOut(),!0):(e>this.lastScrollTop?c=g:e<this.lastScrollTop&&(c=f),void(e>=0&&(this.scrollRefElement!==a||h>=e)&&(this.lastScrollDir!=c&&(this.accumulatedScroll=0),d=c==g?-1:1,this.accumulatedScroll+=(this.lastScrollTop-e)*d,this.accumulatedScroll>=this.minEffectiveScrollSize&&(c==f?this.sliderShown||this.slideIn():c==g&&this.slideOut()),this.lastScrollTop=e,this.lastScrollDir=c,clearTimeout(this.scrollAccumulationTimer),this.scrollAccumulationTimer=setTimeout(function(){this.accumulatedScroll=0}.trcBind(this),200))))},l.prototype.getScrollTop=function(){return TRC.dom.getScrollTop(this.scrollRefElement)},l.prototype.closeClickHandler=function(){TRC.dom.addClass(this.sliderContainer,"trc_user_closed"),this.rbox.sendEvent("close",{},null,!0)},l.prototype.createCSS=function(a){var b=[],c=TRC.css.utils.generateCssRuleWithVendorPrefixes,d=this.slideDirection==e?"translateY":"translateX",f=-1!=[h,j].indexOf(this.slideFrom)?"100%":"-100%";return b.push(a+".trc_slider {position: fixed; z-index: "+this.sliderZIndex+";}"),b.push(a+".trc_slider .trc_related_container {padding: 5px 5px 0; }"),b.push(a+".trc_slider.trc_user_closed {display: none;}"),b.push(a+".trc_slider_close_btn { font-family: Arial, helvetica, sans-serif; float: right; font-size: "+this.closeBtnFontSize+"; font-weight: bold; height: "+this.closeBtnSize+"; width: "+this.closeBtnSize+"; line-height: "+this.closeBtnSize+"; vertical-align: baseline; text-align: center; color: "+this.closeBtnColor+"; background-color: "+this.backgroundColor+"; }"),this.slideFrom==g&&b.push(a+".trc_slider_close_btn {position: absolute; right: 0; top: 0; z-index: "+(this.sliderZIndex+1)+"; }"),this.closeBtnNeedsTouchPadding&&b.push(a+".trc_slider_close_touch_padding {position: absolute; right: 0; top: 0; height: "+k+"px; width: "+k+"px; z-index: "+(this.sliderZIndex+2)+"; }"),TRC.Browser.compatibility.cssTransforms&&(b.push(a+".trc_slider {"+this.slideFrom+": 0;"+c("transform",d+"("+f+")")+"}"),b.push(a+".trc_slider.trc_slide_in {"+c("transform",d+"(0)")+"}"),b.push(a+".trc_slider.trc_slider_animate { "+c("transition-duration",this.transitionDuration+"ms")+c("transition-delay",this.transitionDelay+"ms")+c("transition-property","transform")+"}"),b.push("@media only screen and (max-device-width: 600px) and (orientation: landscape) {"+a+".trc_slider.trc_slide_in {"+c("transform",d+"("+f+")")+"}}")),this.slideDirection==e?b.push(a+".trc_slider {width: 100%; left: 50%; margin-left: -50%; }"):b.push(a+".trc_slider { bottom: 0; }"),b.push(a+".trc_slider .trc_related_container {background-color: "+this.backgroundColor+"; }"),b.join("")},l.prototype.createCloseBtn=function(){this.closeBtn=b.createElement("div"),this.closeBtn.innerHTML="&times;",TRC.dom.addClass(this.closeBtn,"trc_slider_close_btn"),this.closeBtnNeedsTouchPadding&&(this.closeBtnTouchPadding=b.createElement("div"),TRC.dom.addClass(this.closeBtnTouchPadding,"trc_slider_close_touch_padding"))},l.prototype.slideIn=function(){TRC.Browser.compatibility.cssTransforms?/trc_slide_in/.test(this.sliderContainer.className)||TRC.dom.addClass(this.sliderContainer,"trc_slide_in"):this.sliderContainer.style[this.slideFrom]="0px",this.sliderShown=!0},l.prototype.slideOut=function(){var a=this.slideDirection==f?"clientWidth":"clientHeight";TRC.Browser.compatibility.cssTransforms?TRC.dom.removeClass(this.sliderContainer,"trc_slide_in"):this.sliderContainer.style[this.slideFrom]="-"+this.sliderContainer[a]+"px",this.sliderShown=!1}}(window,document),function(a,b){TRC.SpotlightLoader={load:function(a){this.shouldLoad(a)&&(this.loadedScript?TRC.dispatch("trc_afterRboxDraw"):(__trcDebug("Detected Spotlight Administrator("+a.trc.pi+")"),
TRC.backstageDomainPrefix=a.trc.bdp,this.loadedScript=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",TRC.PROTOCOL),TRC.Manager.prototype.loadExternal(this.loadedScript,"js")))},shouldLoad:function(a){return!(!b.querySelectorAll||TRC.Device.isTouchDevice||!a||!a.trc||"1"!=a.trc.sl)},registerOnMainContainer:function(a,b){a&&this.shouldLoad(b)&&a.setAttribute("data-spotlight-publisher-id",b.trc.pi)}}}(window,document),function(){TRC.StandaloneVideoUnitLoader=function(a,b){this.videoConfig=a,this.options=b},TRC.StandaloneVideoUnitLoader.prototype.loadUnit=function(videoCallbackData,videoContainer){var unit;return this.setCmTag(videoContainer),unit=eval(videoCallbackData.tags[0].url),this.setupVideo(videoContainer,unit),unit},TRC.StandaloneVideoUnitLoader.prototype.getVideoContainerSelector=function(a){return a&&a.id?"#"+a.id:(__trcWarn("Cannot get a selector for standalone video container - Taboola publisher container must be defined and have an ID"),null)},TRC.StandaloneVideoUnitLoader.prototype.setCmTag=function(a){window.cmTag.set("isCustomEvents",!0),window.cmTag.set("width",a.getBoundingClientRect().width),window.cmTag.set("customization",this.options.videoCssCustomization)},TRC.StandaloneVideoUnitLoader.prototype.setupVideo=function(a,b){var c=!1,d=TRC.util.isTrue(this.videoConfig.startFromSlider),e=TRC.util.isTrue(this.videoConfig.detachToSlider),f=TRC.util.isTrue(this.videoConfig.detachToSliderAnimation),g=function(){!c&&TRC.visibility.isInViewPortWithOffset(a,-50)&&(b.play(a),c=!0,TRC.dispatch("trcContentReady",{container:a}),TRC.dom.off(window,"scroll",g))};b.set("detachToSlider.isStartFromSlider",d),b.set("detachToSlider.isDetachToSlider",e),b.set("detachToSlider.animation",f),b.on("ready",function(){g(),c||TRC.dom.on(window,"scroll",g)})}}(),function(){function a(a,b){"available"===b&&TRC.dispatch("available::"+a.placementName,{container:a.container}),"click"===b&&TRC.dispatch("click::"+a.placementName)}function b(a,b){var c=a.indexOf("#");return c>0?a.replace("#","#tbcId="+b+"&"):a+"#tbcId="+b}function c(a,b,c){var d=b.config["max-height"]&&parseInt(b.config["max-height"]);d&&parseInt(c.height)>d&&(c.height=d),a.height=a.style.height=parseInt(c.height)+"px"}var d=TRC.taboolaConnect={},e=!1,f={};d.createIframe=function(a,c,d,e,g){if(!a)return void __trcError("could not find container to create Iframe within");var h=d||{},i=Math.floor(2147483648*Math.random()).toString(36),j=document.createElement("iframe");return j.style.border=j.frameBorder=j.border="0",j.style.display="block",j.style.height=parseInt(d.height)?parseInt(d.height)+"px":"0px",j.style.width="100%",j.scrolling="no",j.sandbox=h.sandbox||"allow-same-origin allow-scripts allow-popups allow-forms",j.src=b(c,i),f[i]={origin:e,placementName:g,frame:j,config:d,container:a},a.innerHTML="",a.appendChild(j),j},d.receiveMessage=function(a,b){var c=b.data;if(c&&f[c.id]){var d=void 0===a.origin?f[c.id].origin:a.origin;d===b.origin&&this[c.action]&&this[c.action](c.payload?c.payload:{sizeObject:c.sizeObject},f[c.id])}},d.getOrigin=function(a){return a.match(/^(https:|http:)?\/\/[^\/]+/i)[0]},d.postMessage=function(a,b,c){a.contentWindow.postMessage(b,c)},d.rendered=function(b,e){var f=e.frame,g=e.container,h=b.sizeObject;c(f,e,h),g.className+=" tbl-feed-card",a(e,"available"),d.postMessage(f,{action:"rendered",message:"rendered done",dimension:{height:f.style.height}},"*")},d.expand=function(a,b){var e=b.frame,f=a.sizeObject;c(e,b,f),d.postMessage(e,{action:"expand",message:"expand done",dimension:{height:e.style.height}},"*")},d.click=function(b,e){var f=e.frame,g=b.sizeObject;g&&c(f,e,g),a(e,"click"),d.postMessage(f,{action:"click",message:"click done",dimension:{height:f.style.height}},"*")},d.collapse=function(a,b){var e=b.frame,f=a.sizeObject;c(e,b,f),d.postMessage(e,{action:"collapse",message:"collapse done",dimension:{height:e.style.height}},"*")},d.maxHeight=function(a,b){var c=b.frame,e=b.config["max-height"]?b.config["max-height"]:"";d.postMessage(c,{action:"maxHeight",message:e,dimension:{height:c.style.height}},"*")},d.createCard=function(a,b,c,d){var f=this.getOrigin(c.origin||b);return f?(e||(window.addEventListener("message",this.receiveMessage.bind(this,c),!1),e=!0),void this.createIframe(a,b,c,f,d)):void __trcError("non valid origin for third party card")}}(),function(a,b){TRC.text={replaceAll:function(a,b,c,d){var e;return"undefined"!=typeof b&&"undefined"!=typeof c&&b!==c?(e=new RegExp(b,"gi"),a.replace(e,"function"==typeof c&&"object"==typeof d?c.trcBind(d):c)):a},lsplit:function(a,b,c){var d=a.split(b);return d.slice(0,c-1).concat(d.length>=c?d.slice(c-1).join(b):[])},parseCSV:function(a){for(var b=a.split(","),c=[];b.length;){var d=b.shift();if('"'==d[0]){do{if('"'==d.slice(1).replace(/""/g,"").slice(-1))break;d+=","+b.shift()}while(b.length);c.push(d.slice(1,d.length-1).replace(/""/g,'"'))}else c.push(d)}return c},toStringList:function(a){if(!a)return[];if(!(a instanceof Array))return[""+a];var b=[];return a.forEach(function(a){a&&b.push(""+a)}),b},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#34;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},encodeHTML:function(a){return"string"==typeof a&&a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}}(window,document),function(){function a(a,b){TRC.FeedReportingServiceBase.call(this,a,b),this.visibleCardsMap={},this.cardIndexToRequestId={},this.eventIntervals=b.global["card-observer-intervals"]||this.eventIntervals,this.defaultInterval=b.global["card-observer-default-interval"]||this.defaultInterval}a.prototype=Object.create(TRC.FeedReportingServiceBase.prototype),a.prototype.constructor=a,a.prototype.cardVisibleHandler=function(a){var b=this._getCardData(a)||this._createCardData(a);b.isVisible||this._updateCardData(a,{isVisible:!0,viewCount:b.viewCount+1,visibleTs:Date.now()})},a.prototype.cardInvisibleHandler=function(a){var b=this._getCardData(a);b&&b.isVisible&&1!==this.state&&b.visibleTs&&this._updateCardData(a,{accumulatedDisplayDuration:b.accumulatedDisplayDuration+(Date.now()-b.visibleTs),lastVisibilityDurationReported:!1,isVisible:!1})},a.prototype.cardAddedHandler=function(a,b){TRC.FeedReportingServiceBase.prototype.cardAddedHandler.call(a,b);var c=parseInt(a.getAttribute("data-card-index"),10);this.cardIndexToRequestId[c]=b.trcResponse.ri},a.prototype.update=function(){TRC.FeedReportingServiceBase.prototype.updateTimeOnFeed.call(this);var a,b={};for(a in this.visibleCardsMap)if(this.visibleCardsMap.hasOwnProperty(a)){var c=this._cardTocData(a);c&&(b[c.requestId]={toc:c.toc,vc:c.vc})}Object.keys(b).length>0&&this.sendUpdate(b)},a.prototype._cardTocData=function(a){var b=null,c=0,d=this.visibleCardsMap[a],e=d.visibleTs,f=d.viewCount,g=d.accumulatedDisplayDuration,h=d.isVisible,i=d.lastVisibilityDurationReported,j=this.cardIndexToRequestId[a];return(h||g>=0&&!i)&&(h&&(c=Date.now()-e,this._updateCardData(a,{accumulatedDisplayDuration:c+g}),1===this.state&&this._updateCardData(a,{isVisible:!1})),this._updateCardData(a,{lastVisibilityDurationReported:!0}),b={requestId:j,toc:this._getCardData(a).accumulatedDisplayDuration,vc:f}),b},a.prototype._updateCardData=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(this.visibleCardsMap[a][c]=b[c])},a.prototype._getCardData=function(a){return this.visibleCardsMap[a]},a.prototype._createCardData=function(a){return this.visibleCardsMap[a]={requestId:this.cardIndexToRequestId[a],viewCount:0,accumulatedDisplayDuration:0,visibleTs:0,isVisible:!1,lastVisibilityDurationReported:!1},this.visibleCardsMap[a]},a.prototype.sendUpdate=function(a){var b={d:__trcJSONify(a)};this.trcManager.sendEvent("card",b)},TRC.TimeOnCardService=a}(),function(){function a(a,b){TRC.FeedReportingServiceBase.call(this,a,b),this.visibleCardsMap={},this.maxDepth=0,this.eventIntervals=b.global["feed-observer-intervals"]||this.eventIntervals,this.defaultInterval=b.global["feed-observer-default-interval"]||this.defaultInterval}a.prototype=Object.create(TRC.FeedReportingServiceBase.prototype),a.prototype.constructor=a,a.prototype.cardVisibleHandler=function(a){this.maxDepth=Math.max(a,this.maxDepth),this.visibleCardsMap[a]=!0},a.prototype.cardInvisibleHandler=function(a){delete this.visibleCardsMap[a]},a.prototype.stop=function(){TRC.FeedReportingServiceBase.prototype.stop.call(this),this.visibleCardsMap={}},a.prototype.update=function(){TRC.FeedReportingServiceBase.prototype.updateTimeOnFeed.call(this);var a=0;Object.keys(this.visibleCardsMap).map(function(b){var c=+b;a=Math.max(c,a)}),this.sendUpdate(a)},a.prototype.sendUpdate=function(a){var b={tof:Math.floor(this.timeOnFeed/1e3),dpt:a,mdpt:this.maxDepth};this.trcManager.sendEvent("feed",b)},TRC.TimeOnFeedService=a}(),function(){function a(a,d){var e,f;f=document.createElement("span"),c(f,"span"),e=b(d),f.appendChild(e),a.appendChild(f)}function b(a){var b=document.createElement("iframe");return c(b,"iFrame"),b.src="javascript:'<html><head>"+a.join("\n")+"</head><body></body></html>'",b.jsScriptTagList=a,b}function c(a,b){a.id="script-tracking-"+b+"-"+parseInt(1e4*Math.random(),10),a.name=a.id,a.width=0,a.height=0,a.style.display="none"}TRC.TrackingScriptLoader={TRC_SCRIPT_TAGS_ATTRIBUTE:"viewability-tags",renderScriptTagIntoVideoBox:function(b,c){try{b&&c&&c[this.TRC_SCRIPT_TAGS_ATTRIBUTE]&&c[this.TRC_SCRIPT_TAGS_ATTRIBUTE].length>0?a(b,c[this.TRC_SCRIPT_TAGS_ATTRIBUTE]):__trcDebug("renderScriptTagIntoVideoBox: videoBox/recommendation is null or TRC_SCRIPT_TAGS_ATTRIBUTE not exist")}catch(d){__trcError("failed to add JS script tracking to single videoBox Container")}}}}(),function(a,b){TRC.TrcCache=function(a,b){var c,d=TRC.pageManager,e=a.storageType||"session",f=d.getLocalStorageImplementation("strict-w3c-storage",e),g=0,h=a.cacheSize||5,i=a.ttl||12e5,j=a.disableFeedCache,k=a.cacheName||"trc_cache",l="trc_cache_active";return f?(this.extractKey=function(a){for(var b=a.it,c=a.ii,d=b+"="+c,e=[],f=0;f<a.r.length;f++)e.push(","+a.r[f].uip+"="+a.r[f].uim);return this.sortByPlacements(e),d+=e.join()},this.cacheResponse=function(a,b){TRC.tlf&&console.time("in cacheResponse");var d=this.setCacheResponse(a,b);return g>h&&this.removeToLimit(),f.setValue(k,__trcJSONify(c.getData())),TRC.tlf&&console.timeEnd("in cacheResponse"),d},this.setCacheResponse=function(a,b){var e,f=(new Date).getTime();try{e=this.getFeedRelatedResponseFromCache(c,a,b),e?this.addNewFeedCardsToCachedResponse(b.trc.vl,e.r.trc.vl):(c.setValue(a,{s:f,r:b,vi:d.getPageData()}),g++,this.setCacheClean(a))}catch(h){return!1}return!0},this.getCacheResponse=function(a){TRC.tlf&&console.time("in getCacheResponse");var b=c.getValue(a);return b&&!this.isOverTtl(c.getValue(a).s)?(TRC.tlf&&console.timeEnd("in getCacheResponse"),{response:c.getValue(a).r,viewId:c.getValue(a).vi}):(TRC.tlf&&console.timeEnd("in getCacheResponse"),null)},this.isOverTtl=function(a){var b=(new Date).getTime();return b-a>i?!0:!1},this.setCacheClean=function(a){TRC.Timeout.set(function(){TRC.tlf&&console.time("in setCacheClean"),c.removeKey(a),f.setValue(k,__trcJSONify(c.getData())),TRC.tlf&&console.timeEnd("in setCacheClean")},i)},this.cleanCache=function(a){for(var b,d=a||TRC.util.keys(c.getData()),e=0;e<d.length;e++)b=d[e],this.isOverTtl(c.getValue(b).s)&&this.removeKey(b);f.setValue(k,__trcJSONify(c.getData()))},this.removeKey=function(a){c.getValue(a)&&(c.removeKey(a),g--)},this.getTrcCache=function(){var a=f.getValue(k)||{};try{if(a)return d.getDummyStorage(TRC.util.jsonParseWithNative(a))}catch(b){return d.getDummyStorage()}},this.removeToLimit=function(a){a=a||TRC.util.keys(c.getData());var b,d=g-h;this.sortByStamp(a);for(var e=0;d>e;e++)b=a.shift(),this.removeKey(b)},this.sortByPlacements=function(a){for(var b,c,d=1;d<=a.length-1;++d){for(b=a[d],c=d;c>0&&a[c-1]>=b;)a[c]=a[c-1],--c;a[c]=b}},this.sortByStamp=function(a){for(var b,d,e,f=1;f<=a.length-1;++f)for(b=c.getValue(a[f]).s,e=f;e>0&&c.getValue(a[e-1]).s>=d;)d=a[e],a[e]=this.keys[e-1],a[e]=d,--e},this.init=function(){TRC.tlf&&console.time("in init cache trc");var a;return b?void f.removeKey(k):(c=this.getTrcCache(),a=TRC.util.keys(c.getData()),g=a.length,this.cleanCache(a),g>h&&this.removeToLimit(a),void(TRC.tlf&&console.timeEnd("in init cache trc")))},this.enableCacheViaStorageFlag=function(){f.setValue(l,"true")},this.isCacheEnabledViaStorageFlag=function(){return"true"===f.getValue(l)},this.getFeedRelatedResponseFromCache=function(a,b){var c,d,e,f=a.getValue(b);if(!j){if(f)return f;if(c=a.getData(),d=b.split(","),!(d.length>2))for(var g in c)if(c.hasOwnProperty(g)&&(e=g.split(","),d[0]===e[0]&&e.indexOf(d[1])>0))return c[g]}},this.addNewFeedCardsToCachedResponse=function(a,b){a.forEach(function(a){for(var c,d=0;d<b.length;d++)if(a.uip===b[d].uip){c=!0;break}c||b.push(a)})},this.isValidCache=!0,void this.init()):{isValidCache:!1}}}(window,document),function(a,b){TRC.TRCParser={parseModeName:function(a){return a.mode||null},parsePlacementName:function(a){return a.placement||null},parseABModeName:function(a,b){var c=this.parseTestVariant(b);return null===c?null:"ab_"+a+"_"+c},parseBaseModeName:function(a){if("object"!=typeof a)return null;var b=a["video-list"];return"object"==typeof b&&b["base-mode"]?b["base-mode"]:null},parseTestVariant:function(a){var b;return"object"!=typeof a?null:(b=a["video-list"],a.uvpw&&"object"==typeof b&&b["test-variant"]?b["test-variant"]:"undefined"==typeof a["test-variant"]?null:a["test-variant"])},IsBaseModeAndABModeExist:function(a){var b=this.parseBaseModeName(a),c=this.parseTestVariant(a);return b&&c?!0:!1},parseBaseModeAndABModeName:function(a){var b=this.parseTestVariant(a),c=this.parseBaseModeName(a);return null!==c&&null!==b?"ab_"+c+"_"+b:null},getItemCount:function(a){return a["video-list"].video.length},hasVariantMismatch:function(a){var b=a["test-variant"],c=a["video-list"]["test-variant"];return b&&c?b!==c:!1}}}(window,document),function(a,b){var c="trc-transport-form-element",d=TRC.Manager=function(c,f){function g(b,c){var d=c?c.global:{};if(d["disable-yield"])return!1;if(TRC.URL.prototype.getParameter.call(a.location.href,"yield-batch"))return!0;for(var e in b){var f=b[e];if("undefined"!=typeof f.modeGroupOrder)return!0}return!1}function h(){if(document.body){var b="rbox-tracking",c=b+"-div";if(!document.getElementById(c)){var d=document.createElement("div");d.id=c,document.body.appendChild(d).style.display="none"}a._taboola.push({mode:b,container:c})}}this.totalModeCounter=0,this.renderedModeCounter=0;var i=500;return this.numOfResetCssDivs=3,this.eventLogger=[],this.eventCounter={},this.NO_CONTENT={noItems:"NO_ITEMS",mute:"MUTE",error:"ERROR",timeOut:"TIMEOUT"},this.feeds={},this.cloudinarySortedRatios,this.cachedResponses={},this.loadedJsTags=[],this.pendingRequests=[],this.iframePixelReporter,this.reset=function(){this.reset=!0,TRC.dispatch("trcReset"),this.daisyChainReset(),this.clearPageElements(),this.widgetContainerReset(),this.feedContainerReset();for(var b in TRC.callbacks)TRC.callbacks.hasOwnProperty(b)&&b.search("recommendations")>=0&&(TRC.callbacks[b]=function(){});this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null);try{delete a.trc_video_id,delete a.trc_article_id,delete a.trc_item_url,delete a.trc_testmode,delete a.trc_adPlayer}catch(c){a.trc_video_id=null,a.trc_article_id=null,a.trc_item_url=null,a.trc_testmode=null,a.trc_adPlayer=null}},this.renderRBox=function(a,b){var c=document.trcGetParentByClassName(a.getContainer(),"trc_rbox_container");c.style.display="block",a.load(function(){c.style.display="none"},b)},this.getConfig=function(b,c){return"undefined"!=typeof b[c]?b[c]:"undefined"!=typeof a["trc_"+c]&&null!=a["trc_"+c]?b[c]=a["trc_"+c]:"undefined"!=typeof this[c]&&null!=this[c]?b[c]=this[c]:b[c]=this[c]},this.getItemId=function(){var b=this.itemid;return a.trc_video_id||""==a.trc_video_id?b=a.trc_video_id:(a.trc_article_id||""==a.trc_article_id)&&(b=a.trc_article_id),""==b&&(b=this.getAutoItemMeta("item-id",null,this.urlPreNormalizer,this["normalize-item-id"])),this.itemid=b},this.getGlobalRequestId=function(){return TRC.events_ri},this.getGlobalSessionData=function(){return TRC.session_data},this.getSessionId=function(){return this.sessionId},this.getPlatformCode=function(){return TRC.platform_code},this.getReferrer=function(){var a="";if(this.referrer)return this.referrer;this.referrer=function(){for(var a=document.head.getElementsByTagName("link"),b=0;b<a.length;b++)if("referrer"==a[b].rel)return a[b].href;return null}();try{a=decodeURI(top.window.document.referrer)}catch(b){a="",__trcDebug("TRC.Manager.getReferrer : rendering in cross domain iframe")}return this.referrer=this.referrer?this.referrer:a&&!/https?:\/\/(\w+)\.taboola(syndication)?\.com/.test(a)?a.substr(0,400):a.split("?")[0]},this.getItemUrlQueryString=function(){if(this.itemUrlQueryString)return this.itemUrlQueryString;var a,b=TRC.pageManager.getTopMostWindow(),c=this.global["item-query-string-max-length"]||400;return this.itemUrlQueryString=b.location.search,this.itemUrlQueryString.length>c&&(a=this.itemUrlQueryString.substring(0,c-1),this.itemUrlQueryString=a.substring(0,a.lastIndexOf("&"))),this.itemUrlQueryString},this.getListSize=function(a){return a.visible?this.calculateAutoListSize(a):0},this.getExtraResponsiveRecom=function(a){var b=this.getProperty(a.mode_name,"responsive-extra-columns"),c=this.getProperty(a.mode_name,"rows");return b?b*(c?c:1):0},this.getResponsiveRecommendations=function(b){var c,d,e,f,g=0,h="function"==typeof a.matchMedia;c=this.getMatchMediaRuleMaxWidth(b,h);for(var i=0,j=b.length;j>i;i++)f=b[i],d=f.cells*f.rows,e=h&&(a.matchMedia("(min-width: "+f.minWidth+"px)"+(isNaN(f.maxWidth)?"":" and (max-width: "+f.maxWidth+"px)")).matches||a.matchMedia("screen and (min-height: "+f.minWidth+"px)"+(isNaN(f.maxWidth)?"":" and (max-height: "+f.maxWidth+"px)")+" and (orientation: portrait)").matches),(isNaN(c)||f.minWidth<=c||0>c||e)&&d>g&&(g=d);return{listSize:g,rule:g?f:null}},this.getMatchMediaRuleMaxWidth=function(b,c){var d,e;if(!c)return screen.width;for(var f=0,g=b.length;g>f;f++)if(e=b[f],d=a.matchMedia("screen and (min-device-width: "+e.minWidth+"px)"+(isNaN(e.maxWidth)?"":" and (max-device-width: "+e.maxWidth+"px)")),d.matches)return e.maxWidth},this.calculateAutoListSize=function(a){var b,c,d=this.getProperty(a.mode_name,"list-size"),e=0,f=this.getProperty(a.mode_name,"responsive-rules"),g=null;if(this.getProperty(a.mode_name,"mode-is-responsive")){if(f&&f.length)return g=this.getResponsiveRecommendations(f),a.matched_rule=g.rule,g.listSize;e=this.getExtraResponsiveRecom(a)}if(c=d+e,a.autoSize=this.getProperty(a.mode_name,"auto-size"),!a.autoSize)return a.autoSize=!1,c;if(b=Math.floor(a.container.clientWidth>0?a.container.clientWidth:a.container.offsetWidth),0==b)return a.autoSize=!1,c;for(var h=this.getProperty(a.mode_name,"auto-size-rules"),i=0;i<h.length;i++)parseInt(h[i].minWc)<=b&&b<=parseInt(h[i].maxWc)&&(a.AutoSizeRule=h[i]);return a.AutoSizeRule?(a.rows=this.getProperty(a.mode_name,"rows"),a.rows<=1?this.modes[a.mode_name]["list-size"]=a.AutoSizeRule.n+e:this.modes[a.mode_name]["list-size"]=a.AutoSizeRule.n*a.rows+e):0},this.calculateAutoSizeParameters=function(a){var b,c;if(this.calculateAutoListSize(a),a.AutoSizeRule)for(var d=Math.floor(a.container.clientWidth>0?a.container.clientWidth:a.container.offsetWidth),e=a.AutoSizeRule.minWsRange;e<=a.AutoSizeRule.maxWsRange;e++)if(b=(d-(a.AutoSizeRule.n-1)*e)/a.AutoSizeRule.n,c=parseInt(b),c==b){a.AutoSizeRule.Wi=b,a.AutoSizeRule.Ws=e;break}},this.getItemUrl=function(){var b=this.itemurl;return(a.trc_item_url||null==this.itemurl)&&(b=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"])),this.itemurl=b},this.urlPreNormalizer=function(b,c){var d,e=this["prenormalize-"+b];if(!e)return c;(e["truncate-at"]||[]).forEach(function(a){var b=c.search(a);b>=0&&(c=c.substr(0,b))});var f=new a.TRC.URL(c);for(var g in e)if(e.hasOwnProperty(g)){if(!e[g])continue;switch(g){case"host":delete f.host;break;case"trailing-dirsep":for(;"/"==f.pathname.substr(f.pathname.length-1);)f.pathname=f.pathname.substr(0,f.pathname.length-1);break;case"query":var h=[],i=f.search.replace(/^\?/,"").split("&");d=e[g],"string"==typeof d&&(d=new RegExp(d));var j=function(){return d instanceof Array?function(a){for(var b=0;b<d.length;b++)if(a==d[b])return!0;return!1}:d instanceof RegExp?d.test.trcBind(d):function(){return!1}}();i.forEach(function(a){j(decodeURIComponent(a.split("=")[0]))&&h.push(a)}),f.search=(h.length?"?":"")+h.join("&");break;case"fragment":var k=f.hash.replace(/^#/,"");d=e[g],"string"==typeof d&&(d=new RegExp(d)),f.hash="",d instanceof RegExp&&d.test(k)?f.hash="#"+k:d instanceof Array&&d.forEach(function(a){k.search(a)>=0&&(f.hash="#"+k)})}}return f.pathname||(f.pathname="/"),"item-id"==b?f.toString().toLowerCase():f.toString()},this.genCallback=function(a){var b="recommendations_"+(TRC.callbacks.auto_gen_callback_seq=TRC.callbacks.auto_gen_callback_seq+1||1);return TRC.callbacks[b]=a,"TRC.callbacks."+b},this.formatTRCRequest=function(a,b){try{a.hasOwnProperty("rbox-tracking")&&Object.keys&&Object.keys(a).length>1&&delete a["rbox-tracking"];var c=new this.GlobalRequetParams;return this.setGlobalParmas(c,b),this.setGlobalParamsDecorators(c),c.setPlacementsParamsArray(this.getPlacementsRequestParams(a,c)),TRC.pConsole("recommendations","debug","hook : normalize-request-param",this["normalize-request-param"].toString(),"string"),c.setAll(this["normalize-request-param"](c.getAll(),null)),this.setNewPlacementsInRequest(a,c),TRC.pConsole("recommendations","info","formatted request",c.getAll(),"object"),c.getAll()}catch(d){__trcError("TRC.formatTRCRequest",d)}},this.setGlobalParmas=function(a,b){var c=a,d=TRCImpl?TRCImpl.global:{};c.setItemId(this.getItemId()),c.setTemplate(TRC.pageTemplate),c.setItemType(b||this.getItemType()),c.setSessionData(TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data")),c.setUserId(TRC.pageManager.getValue("user-id")),d["store-userid-first-party-cookie"]&&c.setUserIdFirstPartyCookie(TRC.pageManager.getUserIdFirstPartyCookie()),c.setViewId(TRC.pageManager.getPageData()),c.setClientVersion(this.version),c.setPublisherVersion(this.getPublisherVersion()),c.setItemUrl(this.getItemUrl()),c.setDeviceId(this.deviceId),c.setUnifiedId(this.unifiedId),c.setUserType(this.userType),c.setExternalPageView(this.external_page_view),c.setBlockVideoLoader(this.blockVideoLoader?"1":"0"),c.setUserLanguages(this.getUserLanguages()),this.consentState&&(c.setCmpStatus(this.consentState.cmpStatus),c.setGdprApplies(this.consentState.gdprApplies),c.setConsentDaisyBit(this.consentState.consentData),c.setGdprWasTimeout(this.consentState.wasTimeout)),TRC.consentData&&(c.setCmpStatus(TRC.consentData.cmpStatus),c.setGdprApplies(TRC.consentData.gdprApplies),c.setConsentDaisyBit(TRC.consentData.consentDaisyBit)),c.setBlockThumbnailVideoLoader(this.blockThumbnailVideoLoader?"1":"0"),d["local-storage-piggyback"]!==!1&&c.setLocalStoragePiggyback(TRC.pageManager.getValue(TRC.LOCAL_STORAGE_PIGGYBACK)),"undefined"!=typeof navigator.connection&&(c.setConnectionType(navigator.connection.type),c.setConnectionSpeed(navigator.connection.effectiveType))},this.setNewPlacementsInRequest=function(a,b){var c,d,e=b.getPlacementsParamsArray();if(a)for(var f=0,g=e.length;g>f;f++)c=e[f].uip,d=e[f].orig_uip,a[c]||(a[c]=a[d],a[d]=a[c],a[d].new_uip=c)},this.setRequestMetaData=function(a){var b={};this.tags&&this.tags.length&&(b.k=this.tags.join(","));for(var c in this.metadata)this.metadata.hasOwnProperty(c)&&this.metadata[c]&&(b[this.parseMetaName(c)]=this.metadata[c]);TRC.util.hasKeys(b)&&a.setMetaData(b)},this.parseMetaName=function(a){switch(a){case"user":return"u";case"uploader":return"U";case"content-rating":return"c";case"publish-date":return"t";case"duration":return"d";case"category":return"x";case"v":case"r":default:return a}},this.getPlacementsRequestParams=function(a,b){for(var c,d,e,f=[],g=TRC.util.keys(a),h=0;h<g.length;h++)e=g[h],d=a[e],d.placement&&(this.setModeGlobalParamsDecorators(b,d),c=this.createNewPlacementParams(d,a[e]),c.setAll(this["normalize-request-param"](c.getAll(),d.mode_name)),f.push(c.getAll()));return f},this.createNewPlacementParams=function(a,b){var c=new this.PlacementParams;return c.setListId(a.list_id||"rbox-tracking"===a.mode?a.mode:"rbox-"+(a.visible?a.origin.toString():"tracking")),c.setListSize(this.getListSize(a)),c.setUIMode(this.computeUIM(b)),c.setUIPlacement(a.placement),c.setOriginalUIPlacement(a.placement),this.setPlacementParamsDecorators(c,a),c},this.setPlacementParamsDecorators=function(a,b){var c=this.getProperty(b.mode_name,"required-attributes");"string"==typeof c&&"none"!=c&&a.setRequiredAttr(c),b.dfp&&b.dfp.campaign_id&&a.setNativeCampaignID(b.dfp.campaign_id),b.category&&a.setAllowedCategories(b.category),this.enablePlacementGeometry&&this.addGeometryPlacementData(a,b.container),b.exclude&&a.setExclusions(TRC.text.toStringList(b.exclude)),b.fi&&a.setFeedIndex(b.fi),b.fb&&a.setFeedBatch(b.fb),b.fti&&a.setFeedTemplateId(b.fti)},this.addGeometryPageData=function(a,b){try{TRC.tlf&&console.time("page geometry"),a.setArticlePos(this.getGeometryPageData(b)),a.setBrowserWidth(TRC.dom.getWindowWidth()),a.setScreenWidth(window.screen.availWidth),a.setScreenHeight(window.screen.availHeight),TRC.tlf&&console.timeEnd("page geometry")}catch(c){a.bad=-5}},this.addGeometryPlacementData=function(a,b){try{TRC.tlf&&console.time("mode geometry - "+a.getAll().uim),a.setContainerPos(this.getPosFromDocTop(b,"top")),a.setContainerWidth(this.getModeWidth(b)),TRC.tlf&&console.timeEnd("mode geometry - "+a.getAll().uim)}catch(c){a.cd=-5}},this.getModeWidth=function(a){return a.getBoundingClientRect().width},this.getGeometryPageData=function(a){var c,d;switch(!0){case"function"!=typeof b.querySelector:return-4;case"string"==typeof a:return this.computeGeometryPageData(a);case a instanceof Array&&a.length>0:for(d=0;d<a.length;d++)if(c=this.computeGeometryPageData(a),c>-1)return c;return-2;default:return-1}},this.computeGeometryPageData=function(a){try{var c=b.querySelector(a);return c?this.getPosFromDocTop(c,"bottom"):-2}catch(d){return-3}},this.getPosFromDocTop=function(a,b){return a.getBoundingClientRect()[b]+TRC.dom.getPageVerticalScroll()},this.setGlobalParamsDecorators=function(b){TRC.pageManager.getValue("past-exclusions")&&b.setPastExclusions(TRC.pageManager.getValue("past-exclusions")),this.excludedItems&&b.setExclusions(TRC.text.toStringList(this.excludedItems)),a.trc_testmode&&b.enableTrcTesMode(),this.getReferrer()&&b.setReferrer(this.referrer),TRC.rtbUserIds&&this.setRTBUserId(TRC.rtbUserIds,b),this.enablePageGeometry&&this.addGeometryPageData(b,this.global["page-geometry-selectors"]),this.setRequestMetaData(b),this.global["send-item-query-string-in-req"]===!0&&b.setItemUrlQueryString(this.getItemUrlQueryString()),TRC.networkId&&b.setNetworkID(TRC.networkId),this.tracking_codes&&b.setUTMParams(this.buildUTMParams(this.tracking_codes)),this.additional_data&&b.setAdditionalData(this.additional_data)},d.prototype.buildUTMParams=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},this.setModeGlobalParamsDecorators=function(a,b){this.setPlayerGlobalParams(a,b),0==b.origin.toString().indexOf("h2")&&a.setItemId("_homepage_")},this.setPlayerGlobalParams=function(a,b){a.setItemId(b.item_id),a.setItemType(b.item_type),a.setItemUrl(b.item_url)},this.computeUIM=function(a){var b=a.mode_name,c=this.global["disable-network-uim"]||"undefined"==typeof TRC.networkId?"":":pub="+TRC.networkId,d=TRC.blocker.blockedState>-2&&this.global["use-abp-uim"]?":abp="+TRC.blocker.blockedState:"",e=this.global["use-calibration-uim"]&&this.getProperty(b,"mode-is-responsive")?this.computeCalbUIM(a):"";return b+c+d+e},this.computeCalbUIM=function(a){if(!a.matched_rule)return"";var b=TRC.implClasses.TRCRBox,c=this.modes[a.mode_name],d=a.matched_rule,e="none"!=c["thumbnail-position"]&&c["thumbnail-position"]||void 0,f=e?TRC.math.round10(b.prototype.getRuleAspectRatio(d,"ratio")||b.prototype.getThumbAspectRatio(c,"ratio")||b.prototype.DEFAULT_THUMB_RATIO,-1):void 0,g=e?this.caclculateThumbnailWidth(a.container,d):void 0;return":type=responsive,rows="+d.rows+",cells="+d.cells+",thumb-pos="+e+(e&&"none"!=e?",thumb-ratio="+f+",thumb-width="+g:"")},this.caclculateThumbnailWidth=function(a,b){var c,d=TRC.css.responsive.getRulePercentageWidth(b.cells,b.margin.h)/100,e=50;return a&&d?(c=parseInt(a.clientWidth>0?a.clientWidth:a.offsetWidth,10),TRC.math.roundByDecimal(c*d,e)):null},this.setRTBUserId=function(a,b){var c,d=TRC.util.keys(a);for(c=0;c<d.length;c++)a[d[c]].ui&&b.setRtui(a[d[c]])},this.dispatchLoadRequest=function(a){if(!(TRC.isKilled&&TRC.isKilled()||!TRC.util.hasKeys(a))){var b,c,d=this.getProperty(null,"timeout")||8e3,e=!1;if(this.preloadRequest=a,null==this.getItemId())return void(this.delayedDispatchLoadRequest=this.dispatchLoadRequest.trcBind(this,a));this.delayedDispatchLoadRequest=null;try{if(b=this.formatTRCRequest(this.preloadRequest),TRC.utm.push((new Date).getTime()-TRC.utm.start),this.isValidForCache(b.it)&&(e=this.activateTrcCache(b,this.trcCache,this.trcCacheItemType,this.handleLoadResponse,this)))return;b.cb=this.genCallback(this.handleLoadResponse.trcBind(this,b.cacheKey)),c=this.createRequestUrl(b),this.preloadRequestLoader=this.loadExternal(c,"js",this.handleLoadResponseFailure.trcBind(this),!0),this.preloadRequestLoader.timeout=TRC.Timeout.set(this.abortLoadRequest.trcBind(this,!0),d),this.lastReqId=b.id,TRC.performance&&TRC.performance.mark("5.1.0",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.START),TRC.pConsole("","time","dispatch recommendation request","")}catch(f){__trcError("TRC.dispatchLoadRequest: Error in request processing",f)}}},this.isValidForCache=function(a){return!!(this.trcCache&&this.trcCache.isValidCache&&(this.trcCache.isCacheEnabledViaStorageFlag()||this.trcCacheItemType[a]&&(""===this.trcParams||TRC.pageManager.getForceTrcCache())))},this.activateTrcCache=function(a,b,c,d,e){if(!a.r&&!a.r.length)return!1;var f=b.extractKey(a),g=b.getCacheResponse(f);if(g&&g.response&&!this.cachedResponses[f]){if("c"===c[a.it]||b.isCacheEnabledViaStorageFlag())return this.setCachedResponse(g,d,e,f),this.cachedResponses[f]=!0,!0;"d"===c[a.it]&&(a.cache=1,a.cacheKey=f)}else a.cacheKey=f,g&&g.response&&this.cachedResponses[f]&&(a.vi=g.viewId);return!1},this.setCachedResponse=function(a,b,c,d){a.response.cached=!0,a.response.cachedViewId=a.viewId,TRC.Timeout.set(b.trcBind(c,null,a.response,!0),0),TRC.pConsole("recommendations","warn","using cached recommendations","")},this.createRequestUrl=function(b){this.systemFlags&&this.systemFlags.loaderType&&(b.lt=this.systemFlags.loaderType),delete b.cacheKey;var c="";b.cache&&(c="&cache=1",delete b.cache);var d=e+"//"+this.domain+"/"+encodeURIComponent(TRC.publisherId)+"/trc/3/json?tim="+encodeURIComponent(__trcClientTimestamp())+(this.trcByPass?"&trc_skip_failover=yes&":"&")+"data="+encodeURIComponent(__trcJSONify(b))+this.getOptOut()+TRC.pageManager.additionalDispatchParams()+c+(a.trc_debug_level>1?"&llvl="+a.trc_debug_level:"");return d},this.abortLoadRequest=function(a){var b;this.preloadRequestLoader&&(this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null),a?TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.timeOut):TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.error);for(b in this.preloadRequest)if(this.preloadRequest.hasOwnProperty(b)){if(b.search("rbox-tracking")>=0)continue;a&&(a=!1,__trcWarn("TRC.abortLoadRequest: pv3 timeout"));var c=this.preloadRequest[b];delete this.preloadRequest[b],c.loadRBoxRequestFailed=!0,this.internalDrawRBox(c)}},this.getOptOut=function(){
return this.userOptOut?"&user.opt_out=true":""},this.handleLoadResponseFailure=function(){TRC.performance&&TRC.performance.mark("5.1.8",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.STOP),null==this.preloadRequestLoader||this.isWaitingForModes||(TRC.Timeout.clear(this.preloadRequestLoader.timeout),__trcError("Server did not respond to loadRBox"),this.abortLoadRequest())},this.isActivePlacementData=function(a,b){return a.new_uip?b===a.new_uip?!0:!1:!0},this.handleLoadResponse=function(b,c,d){function e(){this.parseResponse(c,d);for(var b in this.preloadRequest)if(this.preloadRequest.hasOwnProperty(b)){if(f=this.preloadRequest[b],this.placementShouldHaveResponseData(f,b)&&!this.placementHasResponseData(f)){__trcWarn("Server did not provide response for '"+b+'"!');var e=f;delete this.preloadRequest[b],__trcDebug("Recovering internalDrawRBox("+b+")"),this.internalDrawRBox(e)}this.isActivePlacementData(f,b)&&1!=f.pv2&&f.dc&&f.dc.renderAd(),f.scriptData&&TRC.ScriptRenderer.render(f.scriptData,f),f.iframeData&&TRC.taboolaConnect.createCard(f.container,f.iframeData.url,f.iframeData.config,f.placement)}this.global["smart-ellipsis"]&&TRC.dom.on(a,"resize",TRC.util.debounce(this._repaintEllipsis,500,!1,this)),this.preloadRequestLoader&&(this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null);try{TRC.SpotlightLoader.load(c)}catch(g){__trcError("Error while trying to load Spotlight")}TRC.dispatch("trcResponseHandled"),TRC.tlf&&console.timeEnd("in handleLoadResponse"),TRC.tlf&&console.timeStamp("end handleLoadResponse"),TRC.performance&&TRC.performance.mark("6.0.9",null,"TrcPv3","","pv3prase",TRC.PerfEvenType.STOP)}try{TRC.tlf&&console.timeStamp("start handleLoadResponse(pv3)"),TRC.tlf&&console.time("in handleLoadResponse"),TRC.performance&&TRC.performance.mark("6.0.1",null,"TrcPv3","","pv3prase",TRC.PerfEvenType.START),TRC.pConsole("recommendations","info","recommendations response",c,c.trc.verbose?"verbose":"object"),TRC.pConsole("","time","recommendations loaded","");var f,g=TRCImpl?TRCImpl.global:{};if(TRC.utm.push((new Date).getTime()-TRC.utm.start),this.preloadRequestLoader&&TRC.Timeout.clear(this.preloadRequestLoader.timeout),c&&c.trc&&c.trc.ui&&(this.watchedItem=c.trc.wi,this.globaleRequestId=c.trc.vl&&c.trc.vl.length?c.trc.vl[0].ri:this.globaleRequestId,TRC.events_ri=this.globaleRequestId,TRC.session_data=c&&c.trc?c.trc.sd:null,TRC.platform_code=c&&c.trc?c.trc.plc:null,TRC.eventDelegator.dispatch("user_id_ready"),c.trc.stp&&TRC.dispatch("send_user_id",c.trc.stp),c.trc.jst&&TRC.dispatch("load_script_tags",c.trc.jst),TRC.responseLoaded=!0,TRC.alertVVResponseLoaded&&TRC.alertVVResponseLoaded(TRC.version)),!(c&&c.trc&&c.trc.vl&&c.trc.vl.length))return __trcError("Invalid response from server: "+c),void this.abortLoadRequest();c.trc.tc&&!TRC.taboolaConsole&&TRC.Manager.prototype.loadExternal("//c2.taboola.com/console/console_loader.js","js"),TRC.UserIdMerger.notifyPossibleUserChange(this,TRC.publisherId,c.trc.ui,c.trc.sd),TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",c.trc.sd),g["local-storage-piggyback"]!==!1&&c&&c.trc&&c.trc[TRC.LOCAL_STORAGE_PIGGYBACK]&&TRC.pageManager.storeValue(TRC.LOCAL_STORAGE_PIGGYBACK,c.trc[TRC.LOCAL_STORAGE_PIGGYBACK]),c.trc.DNT&&"TRUE"===c.trc.DNT.toUpperCase()?(TRC.doNotTrack=!0,TRC.pageManager.removeAllKeys(),TRC.pageManager.removeUserId()):(TRC.pageManager.storeUserId(c.trc.ui),TRC.pConsole("page","debug","Storing user-id: "+c.trc.ui)),b&&(this.trcCache.cacheResponse(b,c,TRC.pageManager.state.moreDispatchParams),this.cachedResponses[b]=!0);var h=this;TRC.mdl.yieldDynamicModeLoad(c,this,function(){e.call(h),h.handleLoadResponseFailure()})}catch(i){__trcError("Error in TRC.handleLoadResponse : ",i)}},this.parseResponse=function(a,b){var c,d,e,f,h,i={};for(this.yieldingEnabled=g(this.preloadRequest,this),this.feedConfigs=a.trc.f,this.testData=a.trc.td,e=0;e<a.trc.vl.length;e++)f=a.trc.vl[e],c=f.dc?f.dc:f.uip,this.sessionId=a.trc.si,d=this.getOrCreatePlacementData(c,f),"undefined"!=typeof d?(d.unifiedPlacement=f.uuip,c.search("rbox-tracking")>=0?d.response=this.formatPlacementRecommendations(a,e):this.hasFeedConflict(c,f.fpl)?(__trcWarn("Feed conflict detected for "+c+"with feed placement "+f.fpl+"and test data "+this.td),TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,c)):(f.et&&(d.expandOptions=this.getExpandOptions(f)),d.isCache=b,a.cachedViewId&&(d.cachedViewId=a.cachedViewId),f.fpl&&this.handleFeedCardPlacement(f,d),d.scriptData||d.publisherCardData||(f.es?TRC.ExternalContainerAppender.move(f.es,d.container):this.isStandaloneVideo(f)?(d.videoTagLoader=new TRC.VideoTagLoader(this,f.vtag,d,null,{"session-data":a.trc.sd,req:f.ri}),d.videoTagLoader.loadVideo()):(h=this.formatPlacementRecommendations(a,e,i),f.dc&&("tbl"!==f.typ||1!=f.pr||!f.v||f.v.length<1)?(d.dc||(d.dc=new TRC.DaisyChain(this,d),this.daisyChains.push(d.dc)),d.dc.addToChain(h,f.pr)):(d.response=h,this.addFormattedResponseToWidgetAddedFromTrc(f,h,d.addWidget)),d.response&&(d.dc&&delete d.dc,h.trc["video-list"]&&(d["container-selectors"]=h.trc["video-list"]["container-selectors"],d["render-on-orig-container"]=h.trc["video-list"]["render-on-orig-container"]),d.pv2||"undefined"==typeof d.container&&!d.addWidget||(this.yieldingEnabled?this.loadRBoxDrawQueue(d):this.internalDrawRBox(d))))))):__trcWarn("Invalid placement in server response",c);if(i.text&&(TRC.cssStack?TRC.cssStack.addStyle("override",i.text,TRC.styleInjected):TRC.dom.injectStyle(i.text)),this.yieldingEnabled){var j=this.global?this.global:{},k=j["yield-delay"]?j["yield-delay"]:0;this.executeRBoxDrawQueue(k)}},this.addFormattedResponseToWidgetAddedFromTrc=function(a,b,c){c&&(this.preloadRequest[a.uip].response=b)},this.getWidgetContainer=function(a){var c=a.container,d=!(0==a["render-on-orig-container"]);if(!b.querySelectorAll)return c;var e=this.getOrCreateContainerForMoveOrAddWidget(a["container-selectors"],c);return e?e:d?c:(__trcWarn("TRC.getWidgetContainer: Not falling back to original container even though could not find valid container when trying to move a widget"),null)},this.getOrCreateContainerForMoveOrAddWidget=function(a,c){if(a)try{for(var d=0;d<a.length;d++){var e=a[d].container,f=a[d].shouldCreateContainer,g=b.querySelectorAll(e);if(g&&1===g.length){1==f&&(a[d].shouldCreateContainer=!1,g=[this.createNewContainer(a[d].location,g[0])]);var h=this.ensureValidContainer(g[0]);if(h===c)return c;if(h)return this.cleanContainerClasses(c),h}}__trcWarn("TRC.extractValidContainer: Could not find any valid container when trying to move or add a widget")}catch(i){__trcError("TRC.extractValidContainer: Error occured while trying to find valid container",i)}return null},this.createNewContainer=function(a,c){var d;return d=b.createElement("div"),d.id=(new Date).getTime(),a&&"first"===a?c.insertBefore(d,c.firstChild):a&&"last"===a&&c.appendChild(d),d},this.cleanContainerClasses=function(a){a&&(a.className="")},this.formatPlacementRecommendations=function(a,b,c){var d,e=a.trc.vl[b],f=this.preloadRequest[e.uip]||{},g={trc:{req:e.ri,"session-id":a.trc.si,"session-data":a.trc.sd,"user-id":a.trc.ui,"watched-item":a.trc.wi,"country-code":a.trc.cc,"test-variant":a.trc.t,"is-provider":a.trc.iframeData?!0:!1,uvpw:a.trc.uvpw,placement:e.uip,mode:f.mode,DNT:a.trc.DNT,cpb:a.trc.cpb,sl:a.trc.sl,pi:a.trc.pi,bdp:a.trc.bdp,ppb:e.ppb,"test-data":a.trc.td,"placement-group":e.pg}};return a.cached&&(g.cached=!0,g.cachedViewId=a.cachedViewId),e.dc&&"tbl"!==e.typ?g.trc.tag=e:g.trc["video-list"]={video:e.v,"base-mode":e.m,"test-variant":e.t,"properties-override":e.po?TRC.util.jsonParseWithEval("{"+e.po+"}"):null,"container-selectors":e.cs,"render-on-orig-container":e.rooc,vtag:e.vtag,pvc:e.pvc,"content-hub-forced-placement":e.chf?!0:!1},(d=e.csso)&&(c.text=this.getModeOverrideCss(c,d,f)),e.fpl&&(g.feedPlacement=e.fpl),g},this.getModeOverrideCss=function(a,b,c){if(b.indexOf("$container_id$")>-1)try{b=TRC.text.replaceAll(b,"\\$container_id\\$","#"+c.container.id,null)}catch(d){b=TRC.text.replaceAll(b,"\\$container_id\\$","",null)}return a.text?a.text+b:b},this.loadSpotlight=function(){document.querySelectorAll&&(this.spotlightLoaded?TRC.dispatch("trc_afterRboxDraw"):(this.spotlightLoaded=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",e),this.loadExternal(this.spotlightLoaded,"js")))},this.setCssDivsIds=function(a,b){var c=4;for(var d in a)a.hasOwnProperty(d)&&(a[d].cssDivsArr=[],d&&TRC.util.getRandomIds({arr:a[d].cssDivsArr,len:b,strength:c,prefix:"t",suffix:"_r"}))},this.setLBCssDivsIds=function(a,b){var c=4;TRC.util.getRandomIds({arr:a.iframe,len:b,strength:c,prefix:"t",suffix:"_r"}),TRC.util.getRandomIds({arr:a.topDiv,len:b,strength:c,prefix:"t",suffix:"_r"})},this.getModesCache=function(){if(TRC.modesCache)return TRC.modesCache;TRC.modesCache={};for(var a in this.modes)this.modes.hasOwnProperty(a)&&(TRC.modesCache[a]={});return TRC.modesCache},this.sendUserIdTags=function(a){this.sendExternalTracking(a.data)},this.initFrameworks=function(a){return"amp"===a&&TRC.amp?void TRC.amp.setAMPmodule(this):"mobile-sdk"===a?void(this.manualVisibilityTrigger=!0):void 0},this.init=function(b){TRC.tlf&&console.timeStamp("init TRCImpl");var c=TRC.URL.prototype.getParameter.call(location.href,"trc_css-isolation")||TRC.pageManager.getValue("trc_css-isolation"),d=TRC.URL.prototype.getParameter.call(location.href,"trc_abp"),e=!0;__trcCopyProps(b,this),f.framework&&this.initFrameworks(f.framework),this.boxes={},this.daisyChains=[],this.unique_placement_count={},this.tags=[],this.metadata={},this.cssReset="yes"===c||"no"!==c&&this.global["css-isolation"]!==!1?!0:!1,this.trcRequestDelay=this.global["trc-request-delay"]||i,this.trcByPass=this["trc-skip-failover"]===!0?!0:!1,this.enablePageGeometry=this.global["has-page-geometry"],this.enablePlacementGeometry=this.global["has-mode-geometry"],c&&TRC.pageManager.storeValue("trc_css-isolation",c),this.configForPostEvent={available:this.global["send-avail-as-post"],visible:this.global["send-event-as-post"],"new-visible":this.global["send-event-as-post"],explore:this.global["send-explore-as-post"],"content-hub-available":this.global["send-avail-as-post"],"content-hub-visible":this.global["send-event-as-post"],"content-hub-explore":this.global["send-explore-as-post"]},this.configForGetEvent={available:this.global["send-avail-as-get"],visible:this.global["send-visible-as-get"],"new-visible":this.global["send-visible-as-get"],explore:this.global["send-explore-as-get"],"content-hub-available":this.global["send-avail-as-get"],"content-hub-visible":this.global["send-visible-as-get"],"content-hub-explore":this.global["send-explore-as-get"]},this.isDeferredAvailable=this.global["enable-deferred-available"],this.unifiedVisibility=this.global["enable-unified-visibility"],this.trcParams=TRC.pageManager.additionalDispatchParams(),this.trcCacheClean=this.global["clean-trc-cache"],this.trcCache=this.global["enable-trc-cache"]?new TRC.TrcCache(this.global["trc-cache-conf"]||{}):null,this.trcCacheItemType=this.global["trc-cache-it"],this.disableReadMore=this.global["enable-read-more"]===!1||this.disableReadMore===!1,this.blockVideoLoader=this.shouldBlockVideoLoader(this.global["block-video-prob"]),this.blockThumbnailVideoLoader=this.shouldBlockThumbnailVideoLoader(this.global["block-thumbnail-video-prob"]),this.global["enable-consent"]&&this.setConsentConfig(this.consentConfigOverride,this.global["consent-presets"]),TRC.getBackstageUrl=function(){var a=TRC.backstageDomainPrefix||"backstage";return this["backstage-domain-url"]||"https://"+a+".taboola.com/backstage/"}.trcBind(this),d?this.setABPEmulation(d):this.global["abp-detection-enabled"]?TRC.blocker.blockedState=TRC.blocker.getBlockedState(this.global["abp-detection-class-names"]||["banner_ad","sponsored_ad"],this.global["abp-ignore-cached-state"]):TRC.blocker.blockedState=TRC.blocker.states.ABP_DETECTION_DISABLED,TRC.styleInjected||(this.isThinLoaderMode()?this.stackedStyleInjection(this.defaults.style,this.global.style,this.global.rtlStyle,e):this.bakedStyelInjection()),TRC.pageManager.setDomainConfiguration(this.global["publisher-domains"]),this.domain=this.global["requests-domain"]?this.global["requests-domain"]:"trc.taboola.com",this.origin instanceof Array||(this.origin=[this.origin]),null!=this.userMetadata?this.metadata.user=__trcJSONify(this.userMetadata):"undefined"==typeof a.trc_user_id?this.metadata.user=this["get-user"]():this.metadata.user=a.trc_user_id,TRC.util.hasKeys(this["trc-network-mapping"])&&(TRC.networkId=TRC.publisherId,this.shiftPublisherId(this["trc-network-mapping"]));try{TRC.pConsole("page","debug","Hook : publisher_start",this["publisher-start"].toString()),this["publisher-start"]()}catch(g){__trcError("Error running publisher-start",g)}this.metadata.uploader=this["get-creator"](),this.tags=this["get-tags"]();try{this.metadata.v=this["get-views"](),this.metadata.r=this["get-rating"](),this.metafields.split(",").forEach(function(a){a&&(this.metadata[a]=this["get-"+a]?this["get-"+a]():this.readMetaTag(a))}.trcBind(this))}catch(g){}this.gt=new Gettext({domain:"rbox",locale_data:this.global.locale}),a.trc_testmode=!!a.trc_testmode||TRC.pageManager.isStagingView(),this.shouldEnableFraudDetection()&&this.enableFraudDetection(),TRC.listen("send_user_id",this.sendUserIdTags.trcBind(this)),TRC.listen("load_script_tags",this.loadScriptTags.trcBind(this)),this.init=function(){},TRC.isInteractive=!1,TRC.isPageLoaded=!1,this.trcCacheClean&&!this.trcCache&&(this.trcCache=new TRC.TrcCache({},!0),this.trcCache=null),this.setInteractiveHandlers(),this.setPageOnloadHandlers(),this.listenToRenderedModes(),this.global["enable-always-track"]&&!TRC.pushedRboxTracking&&(h(),TRC.pushedRboxTracking=!0)},this.ABPswap=function(a){return TRC.text.replaceAll(a,"\\."+TRC.SYNDICATED_CLASS_NAME+"|\\."+TRC.SPONSORED_CONTAINER_CLASS_NAME,function(a){return"."+this[a.slice(1)]},this.global["switch-abp-class"])},this.stackedStyleInjection=function(a,b,c,d){TRC.cssStack||(TRC.cssStack=new TRC.css.Stack({idPrefix:"tab_",stack:[{type:"default",cssText:a+(c?c:"")},{type:"mode",cssText:""},{type:"publisher",cssText:b},{type:"custom",cssText:""}]},d))},this.bakedStyelInjection=function(){var a=this.defaults.style+this.global.style;TRC.blocker.blockedState>0&&this.global["switch-abp-class"]&&(a=this.ABPswap(a)),this.cssReset?(this.setLBCssDivsIds(TRC.lightBoxCssReset={iframe:[],topDiv:[]},this.numOfResetCssDivs),this.setCssDivsIds(this.getModesCache(),this.numOfResetCssDivs),TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(a,TRC.modesCache,TRC.lightBoxCssReset)),__trcInfo("CSS Isolation is active")):this.global["css-ie-split"]&&TRC.Browser.ieUpto(9)?TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(a,null,TRC.lightBoxCssReset)):TRC.dom.injectStyle(a)},this.setABPEmulation=function(a){TRC.blocker.blockedState=a,this.global["abp-detection-enabled"]=!0,this.global["use-abp-uim"]=!0,TRC.pConsole("page","warn","emulating Ad Blocker Plus detection.")},this.setInteractiveHandlers=function(){var c,d=TRC.EVENT_PAGE_INTERACTIVE,e=["resize","scroll"],f=["scroll","mousedown","keydown","touchstart"],g=function(c){var h;if(c=c||window.event,!TRC.Browser.ie||"resize"!==c.type||null!=c.srcElement){for(h=0;h<e.length;h++)TRC.dom.off(a,e[h],g);for(h=0;h<f.length;h++)TRC.dom.off(b,f[h],g);TRC.isInteractive=!0,TRC.dispatch(d)}};for(c=0;c<e.length;c++)TRC.dom.on(a,e[c],g);for(c=0;c<f.length;c++)TRC.dom.on(b,f[c],g)},this.setConsentConfig=function(a,b){TRC.consent.hasCMP()||(b&&TRC.consent.setPresets(b),a?TRC.consent.setConsentSource(TRC.util.merge({source:"iab_override"},a)):"function"==typeof window.__cmp&&TRC.consent.setConsentSource({source:"iab"}))},this.setPageOnloadHandlers=function(){var b=TRC.EVENT_PAGE_LOAD,c=function(){TRC.dom.off(a,"load",c),TRC.isPageLoaded=!0,TRC.dispatch(b)};"complete"===document.readyState?(TRC.isPageLoaded=!0,TRC.dispatch(b)):TRC.dom.on(a,"load",c)},this.pollTillContainerAvailable=function(a,b){var c=1e3,d=40,e=this,f=a.container,g=function(){e.internalDrawRBox(a)};if(b="undefined"==typeof b?c:b,a.player||a.slider===!0||TRC.dom.isReady)return TRC.dom.onReady(g);try{a.container=this.ensureValidContainer(a.container,!0)}catch(h){}return a.container?this.internalDrawRBox(a):(a.container=f,b--?(b=TRC.dom.isReady?Math.min(b,1):b,TRC.Timeout.set(function(){e.pollTillContainerAvailable.call(e,a,b)},d),null):TRC.dom.onReady(g))},this.countTrcContainerMissingError=0,this.ensureValidContainer=function(a,b){var c="trc_related_container",d=TRC.dom.isInIframe(!0)?" trc_in_iframe":"";if("string"==typeof a&&(a=document.getElementById(a),b&&!a))return null;if("object"!=typeof a&&(a=null),null!=a){if(a.className.match(c))return a;for(;a.hasChildNodes();)a.removeChild(a.firstChild);return a.origClassName=a.className,a.className+=" "+c+" trc_spotlight_widget"+d,a}if(null!=(a=document.getElementById(c)))return a.className.search(c)<=0&&(a.origClassName=a.className),a.className+=" "+c+" trc_spotlight_widget"+d,a;if(!document.body)return null;for(var e=null,f=document.body.getElementsByTagName("script"),g=0;g<f.length;g++)if(!f[g].src&&/TRC\.drawRBox\(/.test(f[g].innerHTML)){e=f[g];break}if(!e||!e.parentNode)return this.countTrcContainerMissingError<2&&(this.countTrcContainerMissingError+=1,__trcError("Didn't manage to find TRC container for R-Box ("+this.countTrcContainerMissingError+") "+(TRC.dom.isReady?"(Document is Ready)":"")+"!")),null;var h=document.createElement("div");return h.id=h.className=c+" trc_spotlight_widget"+d,e.parentNode.insertBefore(h,e),h},this.getPublisherVersion=function(){try{if(TRC.baseDomain.search(TRC.publisherId)>=0){var a=TRC.baseDomain.split("/");if(""==a[a.length-1]&&a.pop(),a[a.length-1]!=TRC.publisherId)return a[a.length-1]}}catch(b){}return"default"},this.getItemType=function(){switch(TRC.listOrigin.getSource()){case"h":return"home";case"c":return"category";case"t":return"text";case"s":return"search";case"p":return"photo";case"o":return"other";case"z":return"content_hub";case"v":default:return"video"}},this.getUserLanguages=function(){return navigator.languages||(navigator.language?[navigator.language]:[])},this.playVideo=function(b){var c,d=!1;try{TRC.dispatch("videoPlaying",b)}catch(e){__trcError("Problem in playVideo:videoPlaying",e)}if("undefined"!=typeof b.id&&a.trc_video_id!=b.id){var f=TRC.listOrigin.getSource();if("undefined"==typeof b.url&&(a.trc_video_id||"v"!=f?b.url=null:(b.url=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"]),this.trc_url_auto_detection=b.id)),a.trc_video_id=b.id,a.trc_item_url=b.url,null!=this.delayedDispatchLoadRequest&&(this.delayedDispatchLoadRequest(),d=!0),0!=a.TRC.trc_drawRBox){var g=0;for(var h in this.boxes)if(this.boxes.hasOwnProperty(h)){if(!/(rbox-blended|rplayer|rbox-v2)/.test(this.boxes[h].getListId()))continue;this.boxes[h].updateRecommendations("video")&&g++}if(1>g&&!d){var i={};c=this.computeRBoxOptions({mode:"rbox-tracking",item_id:b.id,item_url:b.url,item_type:"video",visible:!1}),delete c.container,i[c.placement]=c,this.dispatchLoadRequest(i)}}}},this.setUser=function(a){this.userMetadata=a,TRC.pConsole("page","info","user meta data ",a,"object")},this.getUIInstance=function(b){var c=this.getProperty(b,"impl-class");return c&&c in a.TRC.implClasses?a.TRC.implClasses[c]:TRC.implClasses.TRCRBox},this.calculatePlacement=function(a){if(a.mode_name.search("rbox-tracking")>=0)return a.mode_name;var b=a.mode_name+(a.category?"!"+a.category:"");return"undefined"!=typeof this.unique_placement_count[b]&&(b+="#"+ ++this.unique_placement_count[b]),b},this.computeRBoxOptions=function(b){return"string"==typeof b&&(b={mode_name:b}),b.pubOpts?b:(b.pubOpts=__trcCopyProps(b,{}),a.trc_testmode=!!a.trc_testmode||!!b.testmode,b.tracking=(this.tracking?this.tracking:"")+(b.tracking?b.tracking:""),b.target_type=b.target_type||this.target_type||this.getProperty(b.mode_name,"target_type")||"video",b.origin=new TRC.ListOriginBuilder(TRC.listOrigin.getSource(),b.target_type),b.mode_name=!!b.mode&&b.mode||!!b.mode_name&&b.mode_name||!!a.trc_mode_name&&a.trc_mode_name||"rbox-"+b.origin.toString(),b.mode_name=b.mode_name.replace(/\s+/g,""),b.category=!!b.category&&b.category,b.link_target=b.link_target||this.link_target,"undefined"==typeof b.placement&&(b.placement=this.calculatePlacement(b)),this.unique_placement_count[b.placement]=0,b.visible="boolean"==typeof b.visible?b.visible:!this.invisible,"string"==typeof b.autoplaybox&&(b.autoplaybox=document.getElementById(b.autoplaybox)),!b.player&&b.slider!==!0&&b.visible&&(b.original_container=b.container,b.container=this.ensureValidContainer(b.container)),b.addWidget||(b.response=null),b.computed=!0,b)},this.listenToPlayer=function(a,b){var c,d="trc_related_container";c=TRC.listen("videoPlaying",function(e){var f,g=document.getElementById(e.player_id);return g?void(TRC.dom.isAncestor(b,g,!0)?(c.remove(),TRC.listen("videoPlaying",function(a){a.player_id===b.player_id?f.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for videoPlaying")}),b.player_id=e.player_id,a.container&&("string"==typeof a.container&&(a.container=document.getElementById(a.container)),f=a.container),f||(a.container=f=document.createElement("div")),f.className=d+" trc-inplayer-rbox",f.style.left="-999999em",f.style.width=g.offsetWidth+"px",f.style.marginTop="-"+g.offsetHeight+"px",TRC.Browser.ieUpto(6)&&(b.style.position="absolute"),b.appendChild(f),TRC.kaltura_API&&TRC.Browser.firefox&&(delete TRC.kaltura_API,TRC.kaltura_support()),a.getListId=function(){return"rplayer-after"},a.list_id=a.getListId(),a.loaded=!0,this.internalDrawRBox(a)):__trcError("TRC.listenToPlayer: object with player_id wasn't found in playerContainer that was passed")):void __trcError("TRC.listenToPlayer: wrong player_id was passed")}.trcBind(this)),TRC.listen("videoDone",function(c){var d=a.container;return d?void(c.player_id===b.player_id?d.style.left="0":__trcError("TRC.listenToPlayer: wrong player_id was used for videoDone")):void __trcError("TRC.listenToPlayer:videoDone mainContainer wasn't found")}),TRC.ooyala_API&&(TRC.listen("ooyala_stateChanged",function(c){var d=a.container;d&&(c.player_id===b.player_id?d.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_stateChanged"))}),TRC.listen("ooyala_activePanelChanged",function(c){var d=a.container;d&&(c.player_id===b.player_id?d.style.left="more"===c.activePanel||"info"===c.activePanel?"0":"-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_activePanelChanged"))}))},this.loadRBoxDrawQueue=function(b){function c(b){if(!this.urlOverrideYieldArr){var c=TRC.URL.prototype.getParameter.call(a.location.href,"yield-batch");this.urlOverrideYieldArr=c?c.split("|"):[]}return this.urlOverrideYieldArr.indexOf(b)>-1}if(c(b.placement)&&(b.modeGroupOrder=0),this.itemsToDraw=this.itemsToDraw||[],this.itemsToDrawWithoutOrder=this.itemsToDrawWithoutOrder||[],void 0!==b.modeGroupOrder){var d=parseInt(b.modeGroupOrder,10);isNaN(d)?this.itemsToDrawWithoutOrder.push(b):(this.itemsToDraw[d]=this.itemsToDraw[d]||[],this.itemsToDraw[d].push(b))}else this.itemsToDrawWithoutOrder.push(b)},this.executeRBoxDrawQueue=function(a,b){TRC.yieldingOrderArr=TRC.yieldingOrderArr||[];var b=b?b:0;TRC.taboola_yield_report&&0==b&&(console.time("executeRBoxDrawQ"),performance.mark("start executeRBoxDrawQueue")),this.itemsToDrawWithoutOrder.length>0&&(this.itemsToDraw.push(this.itemsToDrawWithoutOrder),this.itemsToDrawWithoutOrder=[]);var c=this.itemsToDraw.shift();if(TRC.yieldingOrderArr.push(c?c.length:0),c){TRC.taboola_yield_report&&(console.time("executeRBoxDrawQueue batch-"+b),performance.mark("start executeRBoxDrawQueue batch-"+b));var d={};for(var e in c){var f=this.internalDrawRBox(c[e]);d[f.id]=f}TRC.dispatch("batchrender",{data:{boxes:d}}),TRC.taboola_yield_report&&(console.timeEnd("executeRBoxDrawQueue batch-"+b),performance.mark("end executeRBoxDrawQueue batch-"+b))}var g=function(a,b){this.executeRBoxDrawQueue(a,b)}.bind(this);if(this.itemsToDraw.length>0)return c?void TRC.Timeout.set(function(){g(a,++b)},a):void g(a,++b);TRC.taboola_yield_report&&(console.timeEnd("executeRBoxDrawQ"),performance.mark("end executeRBoxDrawQueue"),performance.measure("total rbox rendering time","start executeRBoxDrawQueue","end executeRBoxDrawQueue"));var h=this;b>0&&(h={boxes:{}}),TRC.dispatch("allrender",{data:h})},this.internalDrawRBox=function(c){var d,e;if(c.container=this.getWidgetContainer(c),c=this.computeRBoxOptions(c),c.player){var f=c.player;return delete c.player,void this.listenToPlayer(c,document.getElementById(f))}if(c.slider===!0&&(c.container=document.createElement("div"),c.container.id="trc_rbox_slider_"+Math.floor(2147483648*Math.random()).toString(36),c.container.className="trc_related_container",this.cssReset&&b.body.appendChild(c.container)),d=c.container){if(c.visible||(d.style.display="none"),c.spotlight&&d.setAttribute("data-spotlight-publisher-id",c["spotlight-publisher-id"]),null==c.response&&this.loadCalled&&"undefined"!=typeof this.preloadRequest[c.placement]&&(c.response=this.preloadRequest[c.placement].response,__trcCopyProps(c,this.preloadRequest[c.placement]),null==c.response))return void(this.preloadRequest[c.placement].container=c.container);try{TRC.SpotlightLoader.registerOnMainContainer(d,c.response)}catch(g){__trcError("Error while trying to register Spotlight data on main container")}var h=new(this.getUIInstance(c.mode_name))(c.origin.toString(),c,this);return this.boxes[h.id]=h,d._trc_container||(d._trc_container=document.createElement("div"),d._trc_container.className="trc_rbox_container",d._trc_anonbox=document.createElement("div"),d._trc_container.appendChild(d._trc_anonbox),d.appendChild(d._trc_container),this.cssReset&&"rbox-tracking"!==h.mode_name?(e=b.createElement("div"),TRC.dom.swapElements(d,e,!1),h.outermostContainer=this.createCssResetContainers(d,h.mode_name),TRC.dom.swapElements(e,h.outermostContainer,!1),TRC.pConsole("page","info","CSS reset is enabled on all widgets")):h.outermostContainer=d),h.render(d._trc_anonbox),this.renderRBox(h,c),a.TRC.trc_drawRBox=!0,h}},this.createCssResetContainers=function(a,b){for(var c,d=TRC.modesCache[b]?TRC.modesCache[b].cssDivsArr:[],e=d.length,f=a,g=e-1;g>=0;g--)c=document.createElement("div"),c.id=d[g],c.className="trc_isolation",c.appendChild(f),f=c;return f},this.daisyChainReset=function(){var a,b=this.daisyChains.length;for(a=0;b>a;a++)this.daisyChains[a].removeIframe()},this.dispatchRequestWrapper=function(a){this.loadCalled=!0,this.dispatchLoadRequest(a),this.isPendingLoadRBox=!1},this.dispatchCMPRequest=function(a,b){var c=parseInt(1e5*Math.random());this.pendingRequests[c]=1,TRC.cmp("getConsentData",null,function(d){a.pendingRequests[c]&&(delete a.pendingRequests[c],a.consentState=d,a.dispatchRequestWrapper(b))}),this.global["max-wait-for-cmp"]&&TRC.Timeout.set(function(){a.pendingRequests[c]&&TRC.consent.setConsent({wasTimeout:!0})},this.global["max-wait-for-cmp"])},this.loadRBox=function(){function a(a,b){a[b.placement]=b,this.internalDrawRBox(b)}var b,c=arguments,d=Array.prototype.slice.call(arguments),e={},f=40,g=this;if(!(d.length<1))try{if(this.isPendingLoadRBox||this.preloadRequestLoader)return void setTimeout(function(){this.loadRBox.apply(this,c)}.trcBind(this),100);d[0]instanceof Array&&(d=d[0]),this.till_request_count=0;for(var h=0;h<d.length;h++)d[h].player||d[h].slider===!0||this.till_request_count++;for(;d.length;)if(b=this.computeRBoxOptions(__trcCopyProps(d.shift(),{})),b.player||b.slider===!0)TRC.Timeout.set(a.trcBind(this,e,b),0);else{if(e[b.placement])throw new Error("Placement '"+b.placement+"' is not unique in loadRBox()!");e[b.placement]=b,function(a,b,c){if(this.isPendingLoadRBox=!0,a.container&&1===a.container.nodeType)this.till_request_count--;else{if(!TRC.dom.isReady)return!a.player&&a.slider!==!0&&a.visible&&(a.container=this.ensureValidContainer(a.original_container)),void TRC.Timeout.set(arguments.callee.trcBind(this,a,b,c),b);this.error("Invalid container provided for request "+a.placement+" ("+a.container+")!"),delete c[a.placement],this.till_request_count--}this.till_request_count<=0&&(TRC.consent.hasCMP()?this.dispatchCMPRequest(g,c):this.dispatchRequestWrapper(c))}.trcBind(this,b,f,e)()}}catch(i){throw __trcError("Error in loadRBox()",i),i}},this.parseLoaderParams(f),TRC.dom.init(),this.init(c),this},e=TRC.PROTOCOL;d.prototype["list-size"]=0,d.prototype.MAX_RETRY=2,d.prototype.drawInterface=!1,d.prototype.delayedDispatchLoadRequest=null,d.prototype.invisible=!1,d.prototype.excludedItems=null,d.prototype.boxes={},d.prototype.itemid=null,d.prototype.itemurl=null,d.prototype.tags=[],d.prototype.metadata={},d.prototype.gt={},d.prototype.userMetadata=null,d.prototype.loadCalled=!1,d.prototype.unique_placement_count={},d.prototype.trc_url_auto_detection=null,d.prototype.shiftPublisherId=function(b){var c,d,e,f,g,h,i=TRC.URL.prototype.getParameter.call(location.href,"taboola_sim_domain")||TRC.URL.prototype.getParameter.call(location.href,"fakeurl"),j=a.trc_item_url?new TRC.URL(a.trc_item_url):null,k=(i||(j?j.host:null)||location.host).toLowerCase(),l=(i||(j?j.href:null)||location.href).toLowerCase(),m=b[k],n="/",o=["m","mobile","www2","www3"];if(!m){for(__trcToArray(b,c=[]),c.sort(function(a,b){return a[0].length>b[0].length?-1:a[0].length<b[0].length?1:0}),d=0,e=c.length;e>d;d++)if(f=c[d][0].toLowerCase(),f.indexOf(n)>0){if(l.match(f)){m=c[d][1];break}if(f.indexOf("www.")>-1&&l.match(f.replace("www.",""))){m=c[d][1];break}}else if(k.match(f)){m=c[d][1];break}if(!m&&k.indexOf("www.")<0){for(d=0,e=o.length;e>d&&(g=new RegExp("(https://|http://|^)"+o[d]+"."),h=k.replace(g,"www."),!(m=b[h]));d++);m||(h="www."+k,m=b[h])}}TRC.publisherId=m?m:"unknown-site-on-"+TRC.publisherId,TRC.pConsole("page","info","in 'Network-Solution' : publisher-id was set to - "+TRC.publisherId,"")},d.prototype.widgetContainerReset=function(){for(var a in this.boxes)if(this.boxes.hasOwnProperty(a)){var b,c=this.boxes[a].container;if(c){for(b=c.getAttribute(TRC.intersections.TARGET_ATTRIB),c.className=c.origClassName,delete c._trc_container,delete c._trc_anonbox;c.hasChildNodes();)c.removeChild(c.lastChild);b&&this.removeObserver(b)}TRC.Timeout.reset(),TRC.Interval.reset(),delete this.boxes[a]}},d.prototype.feedContainerReset=function(){for(var a in this.feeds)if(this.feeds.hasOwnProperty(a))for(var b,c,d=this.feeds[a].mainContainerId,e=document.querySelectorAll("[data-feed-main-container-id="+d+"]"),f=0;f<e.length;f++)b=e[f],c=b.getAttribute(TRC.intersections.TARGET_ATTRIB),f>0?b.remove():(b.className=b.origClassName,b.innerHTML="",c&&this.removeObserver(c))},d.prototype.removeObserver=function(a){for(var b=a.split(" "),c=0;c<b.length;c++)TRC.intersections.unobserve(b[c])},d.prototype.getProperty=function(a,b,c){return c&&c.hasOwnProperty(b)&&"undefined"!=typeof c[b]?c[b]:"undefined"==typeof this.modes||"undefined"==typeof this.modes[a]||"undefined"==typeof this.modes[a][b]?this[b]:this.modes[a][b]},d.prototype.getFunction=function(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=this.getProperty(a,b,c);return"function"==typeof e?(TRC.pConsole(a,"debug","Hook : "+b,e.toString(),"function"),e.apply(this,d)):void 0},d.prototype.readMetaTag=function(a){for(var b=document.head.getElementsByTagName("meta"),c=null,d=0;d<b.length;d++)if(b[d].name){if(b[d].name.toLowerCase()=="item-"+a.toLowerCase())return b[d].content;b[d].name.toLowerCase()==a.toLowerCase()&&(c=b[d].content)}return c},d.prototype.get_intent=function(){var b=a.location.href,c=TRC.pageManager.getPublisherValue(TRC.publisherId,"auto-play-intent");if(null!=c){var d=c.split(":");if(parseInt(d[0])>(new Date).getTime()-3e4&&d[1]==this.getItemId())return"undefined"!=typeof d[2]?d[2]:"n"}return b.search(this.getItemId())>=0?"s":"u"},d.prototype["get-creator"]=function(){return this.readMetaTag("uploader")||this.readMetaTag("creator");
},d.prototype["get-tags"]=function(){},TRC.implClasses=TRC.implClasses||{},d.prototype.logTrcEvent=function(b,c,d,e,f){var g,h,i,j,k,l=!1;if(c.tim=__trcClientTimestamp(),c.id=parseInt(1e4*Math.random()),c.llvl=a.trc_debug_level,this.global["tmp-disable-cv"]||(c.cv=this.version),!TRC.isKilled||!TRC.isKilled()){if(this.configForPostEvent[b])try{if(g=this.global["send-full-list"]&&d?__trcCopyProps(c,{},d):c,j=this.shouldPostEventAsAjax(b),k=this.global["rbox-ajax-post-events-full-rollout"],h=k?"":"new-",i=h+b,j)try{this.logPostTrcEventAsAjax(i,g)}catch(m){this.configForGetEvent[b]!==!1&&k||(c.fbe=1,this.logGetTrcEvent(i,c,e,d,f))}k||this.logPostTrcEvent(b,g)}catch(m){l=!0,__trcError("Error in sending post event",m)}(l||this.configForGetEvent[b]!==!1||this.configForPostEvent[b]!==!0)&&((this.configForGetEvent[b]===!1||l)&&(c.fbe=1),this.logGetTrcEvent(b,c,e,d,f))}},d.prototype.isValidForFill=function(a,b){try{if(("available"==a||"visible"==a)&&this.global["enable-get-fil"]&&this.global["get-fil-n-items"]>=this.preloadRequest[b].response.trc["video-list"].video.length)return!0}catch(c){}return!1},d.prototype.shouldEnableFraudDetection=function(){var a,b,c=this.global.test_for_fraud;return c?(a=this.global["fraud-traffic-percentage"],0===a?!1:(a=a||10,b=Math.floor(100*Math.random()),a>=b)):!1},d.prototype.enableFraudDetection=function(){if(!TRC.clickFraudDetect.isInitialized)try{TRC.clickFraudDetect.init(TRC.publisherId,TRC.pageManager.getValue("user-id"),this.referrer,this)}catch(a){__trcWarn("failed to init fraud detection")}},d.prototype.logGetTrcEvent=function(a,b,c,d,f){TRC.tlf&&console.time("in logGetTrcEvent - "+a);var g,h,i,j,k,l;for(g in b)b.hasOwnProperty(g)&&(b[g]=this["normalize-log-param"](g,b[g]));h=this["normalize-log-param"]("publisher",TRC.publisherId),a=this["normalize-log-param"]("type",a),this.isValidForFill(a,f)&&(b=__trcCopyProps(b,{},d));try{i=e+"//"+this.domain+"/"+h+"/log/3/"+escape(a)+"?",i+=this.trcByPass?"trc_skip_failover=yes&":"";for(j in b)b.hasOwnProperty(j)&&(k="_"==j.charAt(0)?j.substr(1):j,"undefined"!=typeof b[j]&&null!=b[j]&&(i+=0==j.indexOf("unescape-")?j.replace("unescape-","")+"="+b[j]+"&":escape(k)+"="+escape(b[j])+"&"));l=new Image,this.eventLogger.push(l),c&&(l.onload=l.onerror=function(){if("function"==typeof c)try{c()}catch(a){__trcError("Error in event callback",a)}return!0}),l.src=i}catch(m){__trcError("Error in sending event",m)}TRC.tlf&&console.timeEnd("in logGetTrcEvent - "+a),TRC.performance&&"available"===a&&TRC.performance.mark("8.1.9"),TRC.performance&&"visible"===a&&TRC.performance.mark("9.1.9")},d.prototype.logPostTrcEvent=function(a,c){TRC.tlf&&console.time("in logPostTrcEvent - "+a);var d,f,g=this["normalize-log-param"]("publisher",TRC.publisherId),a=this["normalize-log-param"]("type",a),h="tb-trc-transportFrame-"+a+"-"+c.id,i=this.getTransportForm(h),j=document.getElementById(h);for(var k in c)c.hasOwnProperty(k)&&(d=b.createElement("input"),d.name=("_"==k.charAt(0)?k.substr(1):k).replace(/unescape-/g,""),d.type="hidden",d.value=this["normalize-log-param"](k,c[k]),i.appendChild(d));if(!j)throw new Error("post iframe can be created");TRC.Browser.ie&&(f=j.contentDocument?j.contentDocument:j.contentWindow.document,f.write(""),f.close()),i.action=e+"//"+this.domain+"/"+g+"/log/3/"+escape(a)+(this.trcByPass?"?trc_skip_failover=yes":""),i.submit(),TRC.tlf&&console.timeEnd("in logPostTrcEvent - "+a),TRC.performance&&"available"===a&&TRC.performance.mark("8.2.9"),TRC.performance&&"visible"===a&&TRC.performance.mark("9.2.9")},d.prototype.getTransportForm=function(a){var d,e;return e=b.createElement("form"),e.className="trc-hidden "+c,e.target=a,e.style.display="none",e.method="post",b.body.appendChild(e),d=b.createElement("span"),d.className=c,d.innerHTML='<iframe class="trc-hidden" id="'+a+'" name="'+a+'" width="0" height="0" style="display:none"></iframe>',b.body.appendChild(d),e},d.prototype.shouldPostEventAsAjax=function(a){var b=this.global["rbox-post-events-as-ajax"];return b&&("boolean"==typeof b||-1!==b.indexOf(a))},d.prototype.logPostTrcEventAsAjax=function(b,c){var d=!1,f=a.XDomainRequest||TRC.Browser.ieUpto(9);if(!f)try{TRC.TRCLogger.post(e+"//"+this.domain,b,c)}catch(g){d=!0,__trcError("Error in sending post event as ajax",g)}(f||d)&&this.logPostTrcEvent(b,c)},d.prototype.log1=function(a,b,c,d,e){var f=a+":"+(e?e:b.li+b.ii)+b.ri;return b.ii&&b.it&&(f=a+":"+b.li+b.ii+b.ri),this.eventCounter[f]?void this.eventCounter[f]++:(this.logTrcEvent(a,b,c,d,e),void(this.eventCounter[f]=1))},d.prototype.loadExternal=function(){return TRC.net.loadScript.apply(null,arguments)},d.prototype.parseLoaderParams=function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("unknown"==d)continue;switch("auto"==d&&(d=""),c){case"visible":this.invisible=!("boolean"==typeof d?d:"false"!=d);break;case"video":a.trc_video_id=d,TRC.listOrigin.setSource("v");break;case"url":a.trc_item_url=d;break;case"article":a.trc_article_id=d,TRC.listOrigin.setSource("t");break;case"category":a.trc_article_id=d,TRC.listOrigin.setSource("c");break;case"home":a.trc_article_id=d,TRC.listOrigin.setSource("h");break;case"search":a.trc_article_id=d,TRC.listOrigin.setSource("s");break;case"photo":a.trc_article_id=d,TRC.listOrigin.setSource("p");break;case"other":a.trc_article_id=d,TRC.listOrigin.setSource("o");break;case"content_hub":a.trc_article_id=d,TRC.listOrigin.setSource("z");break;case"link_target":this.link_target=d;break;case"video_source":this.video_source=d;break;case"callback":this.video_player_callback=d;break;case"player_reference":this.video_player_reference=d;break;case"target_type":TRC.listOrigin.setTarget(this.target_type=d);break;case"exclude":this.excludedItems=d instanceof Array?d:[d];break;case"tracking":this.tracking=d;break;case"referrer":this.referrer=d;break;case"amp_disable_resize":this.amp_disable_resize=d;case"user_opt_out":d&&"false"!=d&&"0"!=d?this.userOptOut=!0:this.userOptOut=!1;break;case"device":this.deviceId=d;break;case"unified_id":this.unifiedId=d;break;case"user_type":this.userType=d;break;case"external_page_view":this.external_page_view=d;break;case"tracking_codes":this.tracking_codes=d;break;case"additional_data":this.additional_data=d;break;case"framework":this.framework=d;break;case"app":this.appName=d;break;case"iab_alternative_config":this.consentConfigOverride=d;break;case"consentMessage":TRC.consent.setConsent(d)}}},d.prototype.getItemByMetaValue=function(a){for(var b=document.head.getElementsByTagName("meta"),c=0;c<b.length;c++)if(b[c].name==a)return b[c].content;return null},d.prototype.getItemByCanonicalValue=function(a,b){for(var c=document.head.getElementsByTagName("link"),d=0;d<c.length;d++)if("canonical"==c[d].rel)return b.call(this,a,c[d].href);return null},d.prototype.getItemByOgValue=function(a,b){for(var c=document.head.getElementsByTagName("meta"),d=0;d<c.length;d++)if("og:url"==c[d].getAttribute("property")&&c[d].content.length>5)return b.call(this,a,c[d].content);return null},d.prototype.getItemByLocationValue=function(a,b){return b.call(this,a,TRC.pageManager.getCurrentURL().toString())},d.prototype.getItemByParamUrl=function(b,c){return!a.trc_item_url||"item-id"!=b&&"item-url"!=b?null:c.call(this,b,a.trc_item_url)},d.prototype.getAutoItemMeta=function(b,c,d,e){var f,g,h,i=["paramUrl","meta","canonical","og","location"],j={paramUrl:"getItemByParamUrl",meta:"getItemByMetaValue",canonical:"getItemByCanonicalValue",og:"getItemByOgValue",location:"getItemByLocationValue"},k=this.global["url-extract-order"]?this.global["url-extract-order"]:i,l=0;for(k.push("location"),c=c?d.call(this,b,c):null;l<k.length&&TRC.util.isEmptyString(c);){g=k[l],f=this[j[k[l]]];try{c=f?f.call(this,b,d):null}catch(m){if(!this.global["tmp-catch-item-url-err"])throw new Error(m.message);c=""}l++}return"item-url"==b&&"getItemByParamUrl"==g?c:(h="getItemByLocationValue"!=g,c=e?e.call(this,c,a.trc_video_id?"video":"text",h):c)},d.prototype.sendEvent=function(a,b,c,d,e,f){var g=!1,h={ri:TRC.events_ri,sd:this.getSessionData(TRC.session_data),ui:TRC.pageManager.getValue("user-id"),pi:this.getItemId(),wi:this.watchedItem?this.watchedItem:null,pt:this.getItemType(),vi:TRC.pageManager.getPageData()},i=function(){g||(g=!0,e&&e())};__trcCopyProps(b,h),d?(this.log1(a,h,c,i,this.placement),TRC.pConsole("page","info","event type : "+a+" - this event will be sent only once for the widget",h,"object")):(this.logTrcEvent(a,h,c,i),TRC.pConsole("page","info","sending event type : "+a,h,"object")),"number"==typeof f&&TRC.Timeout.set(i,f)},d.prototype.getSystemFlag=function(a){return this.systemFlags&&"undefined"!=typeof this.systemFlags[a]?this.systemFlags[a]:null},d.prototype.isThinLoaderMode=function(){return"thin"===this.getSystemFlag("loaderType")},d.prototype.getSessionData=function(a){var b=TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),c=this.global["prefer-response-session-data"]===!0,d=c||!b;return d&&a?a:b},d.prototype.GlobalRequetParams=function(){var a={id:parseInt(1e3*Math.random())};this.setItemId=function(b){b&&(a.ii=b)},this.setTemplate=function(b){b&&(a.tmpl=b)},this.setItemType=function(b){b&&(a.it=b)},this.setSessionData=function(b){a.sd=b},this.setUserId=function(b){a.ui=b},this.setUserIdFirstPartyCookie=function(b){a.uifp=b},this.setUserLanguages=function(b){b&&(a.ul=b)},this.setCmpStatus=function(b){"number"==typeof b&&(a.cmps=b)},this.setConsentDaisyBit=function(b){"string"==typeof b&&(a.cdb=b)},this.setCmpStatus=function(b){"number"==typeof b&&(a.cmps=b)},this.setGdprApplies=function(b){"boolean"==typeof b&&(a.ga=b)},this.setGdprWasTimeout=function(b){"boolean"==typeof b&&(a.gwto=b)},this.setViewId=function(b){a.vi=b},this.setClientVersion=function(b){a.cv=b},this.setPublisherVersion=function(b){a.uiv=b},this.setItemUrl=function(b){b&&(a.u=b)},this.setPlacementsParamsArray=function(b){a.r=b},this.getPlacementsParamsArray=function(){return a.r},this.setPastExclusions=function(b){a.px=b},this.setScreenHeight=function(b){a.sh=b},this.setScreenWidth=function(b){a.sw=b},this.setBrowserWidth=function(b){a.bw=b},this.setArticlePos=function(b){a.bad=b},this.setExclusions=function(b){a.ex=b},this.enableTrcTesMode=function(){a.y=!0},this.setReferrer=function(b){a.e=b},this.setMetaData=function(b){a.m=b},this.setItemUrlQueryString=function(b){b&&(a.qs=b)},this.setNetworkID=function(b){a.nsid=b},this.getId=function(){return a.id},this.setAll=function(b){b&&(a=b)},this.getAll=function(){return a},this.setRtui=function(b){a.rtui=a.rtui||[],"object"==typeof b&&a.rtui.push(b)},this.setDeviceId=function(b){b&&(a.did=b)},this.setUnifiedId=function(b){b&&(a.unuid=b)},this.setUserType=function(b){b&&(a.usrtyp=b)},this.setExternalPageView=function(b){b&&(a.extpvid=b)},this.setUTMParams=function(b){b&&(a.pp=b)},this.setBlockVideoLoader=function(b){b&&(a.bv=b)},this.setLocalStoragePiggyback=function(b){b&&(a[TRC.LOCAL_STORAGE_PIGGYBACK]=b)},this.setBlockThumbnailVideoLoader=function(b){b&&(a.btv=b)},this.setConnectionType=function(b){b&&(a.con=b)},this.setConnectionSpeed=function(b){b&&(a.cos=b)},this.setAdditionalData=function(b){b&&(a.ad=b)}},d.prototype.PlacementParams=function(){var a={};this.setListId=function(b){a.li=b},this.setListSize=function(b){a.s=b},this.setUIMode=function(b){a.uim=b},this.setUIPlacement=function(b){a.uip=b},this.setContainerPos=function(b){a.cd=b},this.setContainerWidth=function(b){a.mw=b},this.setOriginalUIPlacement=function(b){a.orig_uip=b},this.setRequiredAttr=function(b){a.ra=b},this.setAllowedCategories=function(b){a.ac=b},this.setNativeCampaignID=function(b){a.nvcid=b},this.setExclusions=function(b){a.ex=b},this.setFeedIndex=function(b){a.fi=b},this.setFeedBatch=function(b){a.fb=b},this.setFeedTemplateId=function(b){a.fti=b},this.setAll=function(b){a=b},this.getAll=function(){return a}},d.prototype.log=__trcLog,d.prototype.error=__trcError,d.prototype.warn=__trcWarn,d.prototype.info=__trcInfo,d.prototype.debug=__trcDebug,TRC.EVENT_PAGE_INTERACTIVE="trcPageInteractive",TRC.EVENT_PAGE_LOAD="trcPageLoad",d.prototype._repaintEllipsis=function(a){var b=a.data&&a.data.boxes;TRC.Ellipsis.doEllipsis(TRC.util.filterObj(function(a){return a.shouldUseSmartEllipsis()},b||this.boxes))},d.prototype.sendExternalTracking=function(a){if(!TRC.botDetected){var c,d=this.generatePixelsMarkup(a),e=!TRC.Browser.ieUpto(8);try{d&&(e&&(e=this.appendPixelsToIFrame(d)),e||(c=b.createElement("span"),c.innerHTML=d,b.body.appendChild(c)))}catch(f){__trcError("Error in Manager.sendExternalTracking")}}},d.prototype.loadScriptTags=function(a){var b,c,d=a.data;for(c=0;d&&c<d.length;c++)if(b=d[c],!this.loadedJsTags.hasOwnProperty(b))try{b=TRC.URL.prototype.switchProtocol.call(b,TRC.PROTOCOL),TRC.net.loadScript(b,"js",null,null,!0),this.loadedJsTags[b]=!0}catch(e){__trcWarn("Error appending script at position "+c+", url="+b,e)}},d.prototype.listenToRenderedModes=function(){TRC.eventDelegator.subscribe("onrender",function(){this.renderedModeCounter++,this.renderedModeCounter!==this.totalModeCounter||TRC.yieldingEnabled||TRC.dispatch("allrender",{data:this})}.trcBind(this))},d.prototype.generatePixelsMarkup=function(a){for(var b,c="",d=0;a&&d<a.length;d++)b=TRC.text.encodeHTML(a[d]),b&&(c+='<img width="0" height="0" src="'+TRC.URL.prototype.switchProtocol.call(b,e,!0)+'">');return c},d.prototype.appendPixelsToIFrame=function(a){var c,d,e,f="trc-pixel-iframe-"+parseInt(1e4*Math.random(),10),g=!1;if(a){try{!this.iframePixelReporter||this.global["disable-unified-iframe-pixel-reporter"]?(c=b.createElement("span"),c.innerHTML='<iframe class="trc-hidden" id="'+f+'" name="'+f+'" width="0" height="0" style="display:none"></iframe>',b.body.appendChild(c),d=b.getElementById(f),this.iframePixelReporter=d):d=this.iframePixelReporter,e=d.contentDocument?d.contentDocument:d.contentWindow.document,e.body.innerHTML+=a,g=!0,e.close()}catch(h){__trcDebug("Failed to create IFrame for external tracking")}return g}},d.prototype.placementShouldHaveResponseData=function(a,b){return 1!=a.pv2&&b.search("rbox-tracking")<0&&!a.isFeed&&!a.isIframeCard&&!a.externalContainerSelector&&!a.isStandaloneVideo&&!a.scriptData&&!a.publisherCardData},d.prototype.placementHasResponseData=function(a){return null!=a.response||a.dc},d.prototype.handleFeedCardPlacement=function(a,b){b.trcResponse=a,b.isFeedCard=!0,b.parentFeed=this.getOrCreateFeed(a),b.parentFeed.handlePlacement(b)},d.prototype.getOrCreateFeed=function(a){var b=a.fpl,c=a.uuip,d=this.preloadRequest[b],e=this.feeds[b],f=this.getFeedConfig(b),g={nextBatchDistanceThreshold:f.nbdt,feedCss:f.css,feedCssOverride:f.fcss,mobileLayout:f.fml,videoSingleManager:f.vsm,feedDynamicParameters:f.drp,wasWidget:TRC.util.isTrue(f.ww),hasFeedUI:"undefined"==typeof f.hfu||TRC.util.isTrue(f.hfu),videoDisclosurePosition:f.vdp};return e||(d.fti=f.fti,d.unifiedPlacement=c,e=new TRC.Feed(this,d,g),this.feeds[b]=e,d.isFeed=!0),f.eof&&e.stopScrolling(),f.nb&&e.updateNextBatchNumber(f.nb),e},d.prototype.getOrCreatePlacementData=function(a,b){var c=this.preloadRequest[a];return c||(c=this.createPlacementData(a,b),c&&(this.preloadRequest[a]=c)),c},d.prototype.createPlacementData=function(a,b){return this.isRegularWidget(b)?this.createAddedWidgetData(a,b):this.isFeedIframe(b)?this.createFeedIframe(a,b):this.isFeedScriptWidget(b)?this.createFeedScriptWidgetData(a,b):this.isExternalContainerWidget(b)?this.createExternalWidgetData(a,b):this.isStandaloneVideo(b)?this.createStandaloneVideoWidgetData(a,b):this.isPublisherCard(b)?this.createPublisherCardData(a,b):void 0},d.prototype.isRegularWidget=function(a){return a.m},d.prototype.createAddedWidgetData=function(a,b){return{placement:a,mode:b.m,mode_name:b.m,addWidget:!0}},d.prototype.isFeedScriptWidget=function(a){return a.fpl&&a.js},d.prototype.isFeedIframe=function(a){return a.fpl&&a.ifr},d.prototype.isPublisherCard=function(a){return a.fpl&&a.pcp},d.prototype.createFeedScriptWidgetData=function(a,b){return{placement:a,addWidget:!0,scriptData:b}},d.prototype.createFeedIframe=function(a,b){return{placement:a,addWidget:!0,iframeData:b,isIframeCard:!0}},d.prototype.createPublisherCardData=function(a,b){return{placement:a,addWidget:!0,publisherCardData:b.pcp}},d.prototype.isExternalContainerWidget=function(a){return"undefined"!=typeof a.es&&null!==a.es},d.prototype.createExternalWidgetData=function(a,b){return{placement:a,externalContainerSelector:b.es}},d.prototype.isStandaloneVideo=function(a){return a.vtag&&a.vtag.position===TRC.VideoTagLoader.prototype.LOCATION_TYPES.STANDALONE},d.prototype.createStandaloneVideoWidgetData=function(a,b){return{placement:a,isStandaloneVideo:!0}},d.prototype.getFeedConfig=function(a){return this.feedConfigs&&this.feedConfigs[a]?this.feedConfigs[a]:{}},d.prototype.hasFeedConflict=function(a,b){return this.feeds[a]||this.hasFeedTestDataMismatch(b)},d.prototype.hasFeedTestDataMismatch=function(a){var b=this.feeds[a];return b&&b.getTestData()!==this.testData?!0:!1},d.prototype.getSortedCloudinaryRatios=function(){var a,b;if(!this.cloudinarySortedRatios){a=this.global["cloudinary-aspect-ratios-list"]||[[1,2],[1,1.9],[1,1.8],[9,16],[1,1.7],[1,1.6],[1,1.5],[1,1.4],[3,4],[1,1.3],[1,1.2],[1,1.1],[1,1],[1,.9],[6,5],[1,.8],[4,3],[1,.7],[3,2],[1,.6],[16,9],[2,1]];for(var c=0;c<a.length;c++)b=a[c],a[c]=b[0]/b[1];this.cloudinarySortedRatios=a.sort()}return this.cloudinarySortedRatios},d.prototype.getExpandOptions=function(a){var b={expandType:a.et};return a.ch&&(b.collapsedHeight=a.ch),a.ebc&&(b.expandButtonCaption=a.ebc),a.cbc&&(b.collapseButtonCaption=a.cbc),b},d.prototype.clearPageElements=function(){this.clearTransportFrames(),this.clearUserXElements(),this.clearStyleSheets()},d.prototype.clearTransportFrames=function(){if(document.querySelector){var a=[].slice.call(document.querySelectorAll("."+c));a.forEach(function(a){a.parentNode.removeChild(a)})}},d.prototype.clearUserXElements=function(){TRC.userX&&TRC.userX.reset()},d.prototype.clearStyleSheets=function(){this.global["clear-styles-on-reset"]&&TRC.dom.removeAllInjectedStyleSheets()},d.prototype.shouldBlockVideoLoader=function(a){var b=!1;return isNaN(a)||(b=Math.random()<a/100),TRC.pConsole("page","info","Blocked video: "+b+", block-video-prob: "+a,"string"),b},d.prototype.shouldBlockThumbnailVideoLoader=function(a){var b=!1;return isNaN(a)||(b=Math.random()<a/100),TRC.pConsole("page","info","Blocked thumbnail video: "+b+", block-Thumbnail-video-prob: "+a,"string"),b}}(window,document),function(win,doc){TRC.implClasses=TRC.implClasses||{};var TRCRBox=TRC.implClasses.TRCRBox=function(a,b,c){return this._id=Math.floor(1e5*Math.random()),this.fixHeight=b.height,this.domain=c.domain,this.origin=a,this.header=!1,this.id="trc_"+this._id,this.response=this.request=null,__trcCopyProps(b,this),this.loaded=this.loaded?this.loaded:!1,this.element=null,this.listContainer=null,this.retryCount=0,this.drawList=!1,this.forceItemType=!1,this.trc=c,this.util=TRC.util,this.timeoutId=null,this.errorHandler="",this.boxes=[],this.visible_boxes={},this.synd_visible_boxes={},this.network_visible_boxes={},this.native_visible_boxes={},this.new_visible_boxes={},this.synd_new_visible_boxes={},this.network_new_visible_boxes={},this.native_new_visible_boxes={},this.recommendationList=null,this.MIN_VISIBLE_ITMES=this.trc.global["min-visible-items"]||1,this.visibilityIntersectionApiFullRollout=this.trc.global["visibility-intersection-api-full-rollout"],this.visibilityIntersectionApiEventName=this.visibilityIntersectionApiFullRollout?"visible":"new-visible",this.use_cdn=this.trc.getProperty(this.mode_name,"use-cdn-recommendations",this.propertiesOverride)===!0,this.postRenderQueue=new TRC.PostRenderQueue,this.pager=null,this.src=null,this.fullEventItemsHash={},this.isCssImportant=this.trc.getProperty(this.mode_name,"use-css-important",this.propertiesOverride),this.publisher=TRC.publisherId,this.auto_scroll_interval=null,this.auto_scroll=null,this.smallIOSDevice=this.trc["small-ios-device"]||"iPhone|iPod",this.isSmallIOS=this.smallIOSDevice.indexOf(TRC.Device.deviceType)>=0?!0:!1,this.iosLinkTarget=this.trc.getProperty(this.mode_name,"ios-sc-link-target-mode",this.propertiesOverride)||this.trc.global["ios-sc-link-target"],this.defaultLinkTarget=this.trc.global["link-target-conf"]||{NAV:"_self",NT:"_blank",SP:"_blank"},this.linkTargetConf=this.isSmallIOS&&this.iosLinkTarget?this.iosLinkTarget:this.trc["link-target-conf"],this.ntHandlerEnabled=this.trc.global["publisher-onclick-nt-enabled"],this.organicRedirParam=this.trc.global["organic-redirect-param"],this.shiftRedirOnclick=this.trc.global["shift-redir-onclick"],this.manualVisibility=(b.isFeedCard||window.AMP_MODE)&&"mobile-sdk"!==this.trc.framework||!b.manualVisibilityTrigger&&!this.trc.manualVisibilityTrigger||!this.trc.global["enable-manual-visible"]?!1:!0,this.useRedirect=this.trc.global["enable-organic-redirect"],this.useRedirectOnLink=this.trc.global["use-redirect-on-link"],this.adcItemTypes=this.trc.global["adchoice-item-types"]||{"is-organic":!1,"is-in-network":!1,"is-syndicated":!0,"is-native":!0},this.sendClickPiggyBack=this.trc.global["send-pb-in-click"],this.sendModeDebugData=this.trc.global["send-debug-mode"],this.imagesAltUrls=this.trc.global["images-alt-urls"]||[],this.lazyImageLoadMethdos={PAGE_LOAD:"regLazyImageLoadOnPageLoad",PAGE_INTERACTIVE:"regLazyImageLoadOnPageInteractive",RBOX_VISIBLE:"regLazyImageLoadOnRboxVisibile"},this.reqParams={"item-type":this.trc.getItemType(),"item-id":this.trc.getItemId()},this.apiData=[],this.lazyLoadImageObserversIds=[],this.resetVisibilityData=function(){this.visible_boxes={},this.synd_visible_boxes={},this.network_visible_boxes={},this.native_visible_boxes={},this.new_visible_boxes={},this.synd_new_visible_boxes={},this.network_new_visible_boxes={},this.native_new_visible_boxes={}},this},IMAGE_LAZY_SRC_DATA_NAME="data-img-src",IMAGE_URL_PREFIX="https://images.taboola.com/taboola/image/fetch/f_jpg%2Cq_80%2Ch_{h}%2Cw_{w}%2Cc_fill%2Cg_faces%2Ce_sharpen/",RTB_IMAGE_URL_PREFIX="https://images.taboola.com/taboola/image/fetch/$pw_{w}%2C$ph_{h}/t_tbl-cnd/",protocol=TRC.PROTOCOL;TRCRBox.prototype.DEFAULT_THUMB_RATIO=.8,TRCRBox.prototype.genRBoxURL=function(a,b){if(a=a||null,win.trc_testmode)return this.getRetryUrl("static-preview");var c={};return c[this.placement]=this,this.formatedTRCRequest=b||this.trc.formatTRCRequest(c,this.forceItemType),this.formatedTRCRequest.cb=this.trc.genCallback(this.loadScriptCallback.trcBind(this,a)),this.trc.createRequestUrl(this.formatedTRCRequest)},TRCRBox.prototype.getListId=function(){return this.visible?"rbox-"+this.origin:"rbox-tracking"},TRCRBox.prototype.getSessionId=function(){return this.response&&this.response.trc?this.response.trc["session-id"]:null},TRCRBox.prototype.getItemType=function(){return this.forceItemType?this.forceItemType:this.trc.getItemType()},TRCRBox.prototype.generateRDiv=function(){var a=document.createElement("div");return a.id=this.getListId(),a.className="trc_rbox_div trc_rbox_border_elm","none"!=this.element.style.display&&(a.style.display="none"),a.style.overflowX="hidden",a.style.overflowY="hidden",a},TRCRBox.prototype.generateHeader=function(a){var b=this.getWidgetToFeedHelper(),c=document.createElement("div"),d=document.createElement("span"),e=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride),f=this.trc.getProperty(this.mode_name,"header-right",this.propertiesOverride),g="No Header"!==f;if(c.id=this.id.replace("trc_","trc_header_"),c.className="trc_rbox_header trc_rbox_border_elm",d.className="trc_rbox_header_span",this.generateHeaderIcon(d),c.ext=document.createElement("div"),c.ext.className="trc_header_ext",c.appendChild(c.ext),g)this.generateHeaderPart(d,e,"trc_header_left_column trc_header_left_part"),this.generateHeaderPart(d,f,"trc_header_right_column trc_header_right_part");else{var h="No Header"!==e?e:"";d.insertAdjacentHTML("beforeend",h)}return c.titleBox=d,c.appendChild(d),b&&!b.getHeader()?b.addHeaderToFeed(c):a.appendChild(c),c},TRCRBox.prototype.generateHeaderIcon=function(a){var b,c,d,e=this.trc.getProperty(this.mode_name,"header-icon",this.propertiesOverride)||"NONE";"CUSTOM"===e?d=this.trc.getProperty(this.mode_name,"header-icon-url",this.propertiesOverride):"PUBLISHER_LOGO"===e&&(d=this.trc["publisher-logo"][TRC.publisherId]||TRC.networkId&&this.trc["publisher-logo"][TRC.networkId]),d&&(c=document.createElement("img"),c.className="trc_rbox_header_icon_img trc_img",c.src=TRC.URL.prototype.switchProtocol.call(d,protocol),b=document.createElement("div"),b.className="trc_rbox_header_icon_div",b.appendChild(c),a.appendChild(b),a.className+=" trc_rbox_header_icon_span")},TRCRBox.prototype.generateHeaderPart=function(a,b,c){var d=document.createElement("span");d.className="trc_inner_header "+(c||""),d.insertAdjacentHTML("beforeend",b),a.appendChild(d)},TRCRBox.prototype.render=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui render");var b=this.trc.getProperty(this.mode_name,"auto-scroll",this.propertiesOverride);this.element=document.createElement("div"),this.element.id=this.id.replace("trc_","trc_wrapper_"),this.element.className="trc_rbox "+this.mode_name,this.element.style.overflow="hidden","undefined"!=typeof b&&"none"!=b&&(this.element.onmouseover=function(){null!=this.auto_scroll_interval&&TRC.Interval.clear(this.auto_scroll_interval)},this.element.onmouseout=function(){"function"==typeof this.auto_scroll&&(null!=this.auto_scroll_interval&&TRC.Interval.clear(this.auto_scroll_interval),this.auto_scroll_interval=TRC.Interval.set(this.auto_scroll,parseInt(b)))}),a.appendChild(this.element),this.element.style.display="none",this.trc.getProperty(this.mode_name,"has-expand-animation",this.propertiesOverride)===!0&&new TRC.ExpandAnimationManager(this)},TRCRBox.prototype.generateVisibleParts=function(){if(null==this.listContainer){this.header=this.generateHeader(this.element);var a=document.createElement("div");a.id=this.id.replace("trc_","outer_"),a.className="trc_rbox_outer",a.style.overflow="hidden",this.listContainer=this.generateRDiv(),a.appendChild(this.listContainer),this.element.appendChild(a),this.element.style.display="block",this.trc.global["disclosure-enabled"]===!0?this.addTaboolaLogo():this.addTaboolaLogoNoDisclosure()}},TRCRBox.prototype.getRetryUrl=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui getRetryUrl");var b=protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/";return"preview"==a?b+"trc-"+a+".js":b+"trc-"+this.getListId()+"-"+a+".js"},TRCRBox.prototype.check_preview_size_error=function(a,b){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui check_preview_size_error");var c=b.trc["video-list"].video;return c instanceof Array||(c=[c]),a!=this.getRetryUrl("preview")&&c.length<10?(this.src=this.getRetryUrl("preview"),!0):!1},TRCRBox.prototype.setTargetItemsList=function(a,b,c){if(b)for(var d=0,e=b.length;e>d;d++)a[b[d]["item-id"]]={tii:b[d]["item-id"],tipt:this.getProviderType(b[d]),tit:b[d].type,tids:c}},TRCRBox.prototype.getJsonTargetItemsList=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c},TRCRBox.prototype.PostData=function(){var a={};this.setFullItemlist=function(b){"object"==typeof b?a.fil=__trcJSONify(b):"string"==typeof b&&(a.fil=b)},this.setScreenHeight=function(b){a.sh=b},this.setScreenWidth=function(b){a.sw=b},this.setBrowserWidth=function(b){a.bw=b},this.setArticlePos=function(b){a.bad=b},this.setContainerPos=function(b){a.cd=b},this.setContainerWidth=function(b){a.mw=b},this.getAll=function(){return a}},TRCRBox.prototype.getProviderType=function(a,b){return a["is-syndicated"]?b?"sponsored":"SP":a["is-in-network"]?b?"exchange":"NT":a["is-native"]?b?"native":"NAV":b?"organic":"RC"},TRCRBox.prototype.setApiItemsData=function(a){this.apiData.push({url:a.url,slot:a.itemIndex,id:a.id,type:this.getProviderType(a,!0),title:a.title})},TRCRBox.prototype.isReadMoreDevice=function(a){for(var b=a.split("|"),c={smart_phone:TRC.dom.isSmartPhone(),tablet:TRC.dom.isTablet(),desktop:TRC.dom.isDesktop()},d=0;d<b.length;d++){if("all"===b[d])return!0;if(c[b[d]])return!0}return!1},TRCRBox.prototype.getReadMoreConfig=function(){var a=this.trc.getProperty(this.mode_name,"read-more-config",this.propertiesOverride)||{};return a.boxSelector=this.trc.getProperty(this.mode_name,"read-more-box-selector",this.propertiesOverride),a.threshold=this.trc.getProperty(this.mode_name,"read-more-threshold",this.propertiesOverride),a.minimizedSize=this.trc.getProperty(this.mode_name,"read-more-minimized-size",this.propertiesOverride),a.caption=this.trc.getProperty(this.mode_name,"read-more-caption",this.propertiesOverride),a.cutoffType=this.trc.getProperty(this.mode_name,"read-more-cutoff-from-type",this.propertiesOverride),a.anchorSelector=this.trc.getProperty(this.mode_name,"read-more-anchor-selector",this.propertiesOverride),a.lengthFromAnchorElementType=this.trc.getProperty(this.mode_name,"read-more-cutoff-length-type",this.propertiesOverride),a.lengthFromAnchorElement=this.trc.getProperty(this.mode_name,"read-more-cutoff-length-from-anchor-element",this.propertiesOverride),a.modeDevices=this.trc.getProperty(this.mode_name,"read-more-mode-devices",this.propertiesOverride),a},TRCRBox.prototype.loadScriptCallback=function(a,b){function c(){this.trc.parseResponse(b),this.trc.preloadRequest[this.placement].dc?this.trc.preloadRequest[this.placement].dc.renderAd(this):(this.loadScriptCallback(null,this.trc.preloadRequest[this.placement].response),TRC.dom.on(win,"resize",TRC.util.debounce(this.trc._repaintEllipsis.trcBind(this.trc,[this]),500,!1,this.trc)),TRC.dispatch("ellipsis",{data:[this]}))}var d,e,f,g,h,i,j,k,l,m=this.trcResponse&&this.trcResponse.hasOwnProperty("ifr")&&this.trcResponse.ifr,n="TRCRBox.loadScriptCallback(retry="+this.retryCount+")",o=b.trc,p=this.response&&this.response.trc.DNT&&"TRUE"===this.response.trc.DNT.toUpperCase(),q=this.trc.global["has-userx"],r=TRC.TRCParser,s=TRC.Device.isTouchDevice,t=null,u=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride);this.sendModeDebugData&&(t=this.getModeDebugData("object")),__trcDebug("Enter "+n),this.abortRequest(),this.utm=this.requestTime&&[this.requestTime,(new Date).getTime()-TRC.utm.start];var v=win.trc_testmode?!0:!1;if(a&&(this.trc.trcCache.cacheResponse(a,b,TRC.pageManager.state.moreDispatchParams),this.trc.cachedResponses[a]=!0),o.vl&&o.vl.length){TRC.tlf&&console.timeStamp("start loadScriptCallback(pv2)"),this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null);var w=this;return void TRC.mdl.yieldDynamicModeLoad(b,this.trc,function(){c.call(w)})}if(o&&o["video-list"]&&o["video-list"].pvc&&(this.pVideoLoader=new TRC.PVideoLoader(this,o["video-list"].pvc,this.response.trc,this.trc)),!(o&&o["video-list"]&&o["video-list"].video||m))return __trcError("Exit "+n+": pv2 format error"),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement);if(v&&this.check_preview_size_error(this.src,b))return __trcDebug("Exit "+n+": preview with not enough items"),void this.getData();if(TRC.UserIdMerger.notifyPossibleUserChange(this.trc,TRC.publisherId,o["user-id"],o["session-data"]),TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",o["session-data"]),b.trc.DNT&&"TRUE"===b.trc.DNT.toUpperCase()?(TRC.doNotTrack=!0,TRC.pageManager.removeAllKeys(),TRC.pageManager.removeUserId()):TRC.pageManager.storeUserId(o["user-id"]),this.drawList)return void __trcWarn("Exit "+n+": got another response after already drawing");if(this.response=b,this.response.cached&&(this.cachedViewId=this.response.cachedViewId),this.setTargetItemsList(this.fullEventItemsHash,o["video-list"].video,"a"),k=new this.PostData,k.setFullItemlist(this.getJsonTargetItemsList(this.fullEventItemsHash)),l=this.createUtmParam(),void 0!==this.modeGroupOrder&&this.util.merge(l,{mgo:this.modeGroupOrder}),o["video-list"].video&&o["video-list"].video.length<1&&"rbox-tracking"!=this.getListId())return __trcError("Exit "+n+": no items in response - "+this.mode_name),TRC.EventsAPI.dispatchRender(o),this.abortRendering(),this.trc.isDeferredAvailable?(TRC.performance&&TRC.performance.mark("8.0.1."+this._id),
TRC.Timeout.set(this.sendEvent.trcBind(this,"available",this.util.merge(l,{df:1}),this.util.merge(k.getAll(),t),!0),0)):this.sendEvent("available",l,this.util.merge(k.getAll(),t),!0),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement);if(this.recommendationList=o["video-list"].video||[],m?TRC.listen("available::"+this.placement,function(a){this.trcResponse.config["send-events"]!==!1&&(this.sendEvent("available",l,this.util.merge(k.getAll(),t),!0),TRC.intersections.isInViewPort({targetElement:a.container,enableDelayedVisibilityCheck:!0,onTrigger:function(){this.recommendationList.length&&this.newVisibleItemsCollection(!0,this.recommendationList),this.sendNewVisibility()}.trcBind(this)}),this.registerProviderClicks(this.recommendationList)),this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList().i)}.trcBind(this)):this.trc.isDeferredAvailable?(TRC.performance&&TRC.performance.mark("8.0.1."+this._id),this.postRenderQueue.pushBack("available",this.sendEvent.trcBind(this,"available",this.util.merge(l,{df:1}),this.util.merge(k.getAll(),t),!0))):this.sendEvent("available",l,this.util.merge(k.getAll(),t),!0),this.itemsTypes=this.getItemsTypesList(this.recommendationList),this.hasSyndicatedContent=this.hasSyndicated(this.itemsTypes),this.privacyId=this.getPrivacyId(this.recommendationList),this.orig_name=this.mode_name,this.orig_placement=this.placement,m||this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList().i),r.IsBaseModeAndABModeExist(o)?(f=r.parseBaseModeAndABModeName(o),this.changeModeName(f,!0,"base mode named: "+f+" has no configuration. using fallback - "+this.mode_name)):(g=r.parseBaseModeName(o))?(TRC.pConsole(this.mode_name,"info","base mode = "+g),this.changeModeName(g,!0,"base mode - "+g+": has no configuration. using fallback - "+this.mode_name)):(e=r.parseTestVariant(o))&&(TRC.pConsole(this.mode_name,"info","test variant = "+e,d),d=r.parseABModeName(this.mode_name,o),this.changeModeName(d,!1,"variant -  "+e+" : has no configuration. using fallback - "+this.mode_name),r.hasVariantMismatch(o)&&this.trc.global["send-variant-warning"]&&__trcWarn("UI variant mismatch detected for publisher={pub}, page type={page}, UI mode={mode}, pacement={placement}. Using header variant resulted with variant={header}, Using per widget variant resulted with variant={widget}.".replace("{pub}",TRC.publisherId).replace("{page}",this.trc.getItemType()).replace("{mode}",this.mode_name).replace("{placement}",this.placement).replace("{header}",b&&b["test-variant"]||"").replace("{widget}",b&&b["video-list"]&&b["video-list"]["test-variant"]||""))),!m&&"rbox-tracking"!=this.getListId()&&"undefined"==typeof this.trc.modes[this.mode_name])return void __trcError("TRCRBox.loadScriptCallback: Mode name '"+this.mode_name+"' doesn't exist in configuration file ");if(this.trc.isThinLoaderMode()&&!TRC.mdl.isLoaded(this.mode_name))return void __trcError("TRCRBox.loadScriptCallback: Mode name '"+this.mode_name+"' isn't loaded (thin loader) ");this.propertiesOverride=o["video-list"]["properties-override"],h=this.trc.getProperty(this.mode_name,"auto-size",this.propertiesOverride),i="none"!=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride),j=this.trc.getProperty(this.mode_name,"mode-has-userx",this.propertiesOverride),this.useNativeLineClamp=TRC.Browser.compatibility.lineClamp&&!this.trc.getProperty(this.mode_name,"details-inline-with-title",this.propertiesOverride)&&this.trc.getProperty(this.mode_name,"use-browser-line-clamp",this.propertiesOverride),this.widgetCreatorLayout=this.trc.getProperty(this.mode_name,"widget-creator-layout",this.propertiesOverride),this.isWCTextLinks="autowidget-template-text-links"===this.widgetCreatorLayout,this.isResponsive=this.trc.getProperty(this.mode_name,"mode-is-responsive",this.propertiesOverride),this.isCarousel="scrolling"===this.trc.getProperty(this.mode_name,"navigation-type",this.propertiesOverride),this.shouldLazyLoadImages=this.trc.getProperty(this.mode_name,"has-thumbs-image-lazy-load",this.propertiesOverride)||this.trc.global["thumbnail-image-lazy-load"],this.link_target=this.link_target||this.trc.getProperty(this.mode_name,"link-target")||"normal",TRC.pConsole(this.mode_name,"info","has user X = "+j,""),__trcDebug("Exit "+n+": success"),this.drawList=!0,this.hasReadMore=this.trc.disableReadMore===!0?!1:this.trc.getProperty(this.mode_name,"enable-read-more",this.propertiesOverride),this.isReadMoreDebug=this.trc.global["read-more-debug"]||this.trc["read-more-debug"],this.readMorePageConfig=this.read_more||{},this.readMoreConfig=this.getReadMoreConfig(),this.readMoreDevices=this.trc.getProperty(this.mode_name,"read-more-mode-devices",this.propertiesOverride)||this.trc["read-more-devices"],this.getWidgetToFeedHelper()&&this.getWidgetToFeedHelper().applyWidgetHeaderAndFooterStylesToFeed(this.mode_name),this.callPreRenderHooks(),TRC.setReadMore&&this.hasReadMore&&this.isReadMoreDevice(this.readMoreDevices)?TRC.setReadMore(this):TRC.EventsAPI.readmore("none",this.response&&this.response.trc),this.trc.yieldingEnabled||this.trc.totalModeCounter++;var x=null;try{this.reqId=this.response.trc.req}catch(y){this.reqId=-1}if(TRC.performance&&TRC.performance.mark("7.0.1."+this._id,x,this.mode_name,this.reqId,"rendering",TRC.PerfEvenType.REQ_LEVEL_START),this.container&&this.container.setAttribute("data-placement-name",this.placement),m||(this.isResponsive&&!this.isWCTextLinks?(this.generateResponsiveOuters(this.element),this.drawResponsiveList(o)):(h&&this.container&&0==this.container.clientWidth&&(this.container.style.width="100%"),this.generateVisibleParts(),this.drawListBody(o))),this.shouldLazyLoadImages&&(this.lazyLoadViewportMarginThreshold=this.trc.getProperty(this.mode_name,"thumbs-image-lazy-load-margins",this.propertiesOverride)||this.trc.global["thumbs-image-lazy-load-margins"]||"600px 1500px 600px 1500px",this.isCarousel&&"none"!==u&&this.createCarouselContainerImgLazyLoadObserver()),TRC.performance&&TRC.performance.mark("7.0.9."+this._id,x,this.mode_name,this.reqId,"rendering",TRC.PerfEvenType.REQ_LEVEL_STOP),TRC.dispatch("trcContentReady",{container:this.container}),o&&o["video-list"]&&o["video-list"].vtag&&this.trc["mode-before-video-load"](this)){TRC.performance&&TRC.performance.mark("10.0.1."+this._id,null,"videotag","","videoTagLoad",TRC.PerfEvenType.START);var z={placement:this.placement,container:this.container};this.videoTagLoader=new TRC.VideoTagLoader(this.trc,o["video-list"].vtag,z,this,this.response.trc),this.videoTagLoader.loadVideo(),TRC.performance&&TRC.performance.mark("10.0.9."+this._id,null,"videotag","","videoTagLoad",TRC.PerfEvenType.STOP)}try{TRC.SpotlightLoader.registerOnMainContainer(this.container,b),TRC.SpotlightLoader.load(this.response)}catch(A){__trcError("Error while trying to load Spotlight")}if(this.trc.global["show-rtb-ad-choices-icon"]&&i&&!p&&!TRC.SpotlightLoader.loadedScript){if(!TRC.userAdChoice.isInitialized)try{TRC.userAdChoice.init(this.trc.language)}catch(A){__trcDebug("failed to init RTB Choice")}try{TRC.userAdChoice.initForMode(this)}catch(A){__trcDebug("failed to init RTB Choice for mode "+this.mode_name)}}if(j&&q&&i&&!p&&!TRC.Browser.ieUpto(8)&&!s&&!TRC.SpotlightLoader.loadedScript){if(!TRC.userX.isInitialized)try{TRC.userX.init(this.trc.language)}catch(A){__trcDebug("failed to init Taboola Choice")}try{TRC.userX.initForMode(this)}catch(A){__trcDebug("failed to init Taboola Choice for mode "+this.mode_name)}}!TRC.SliderManager||this.slider!==!0&&this.trc.getProperty(this.mode_name,"slider",this.propertiesOverride)!==!0||this.trc.slider===!1||new TRC.SliderManager(this)},TRCRBox.prototype.callPreRenderHooks=function(){var a=this.trc.getProperty(this.mode_name,"mode-start"),b=this.trc["mode-pub-start"];try{"function"==typeof b&&b(this,this.container),"function"==typeof a&&a(this,this.container)}catch(c){__trcError("Error in pre rendered hooks - "+c.message)}},TRCRBox.prototype.registerProviderClicks=function(a){for(var b,c=0;c<a.length;c++){b=a[c],TRC.listen("click::"+this.placement,function(){this.sendEvent("click",{it:b.type,ii:b["item-id"],p:b["is-syndicated"]?b.publisher:"",li:this.getListId()},null,!1),this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList().c)}.trcBind(this));break}},TRCRBox.prototype.changeModeName=function(a,b,c){"undefined"!=typeof this.trc.modes[a]?(this.trc.cssReset&&this.switchCSSResetDivIds(this.mode_name,a),this.mode_name=a,this.element.className="trc_rbox "+this.mode_name):this.trc.global["send-variant-warning"]&&(b?__trcWarn(c):__trcDebug(c))},TRCRBox.prototype.switchCSSResetDivIds=function(a,b){var c=TRC.modesCache[a]?TRC.modesCache[a].cssDivsArr:[],d=TRC.modesCache[b]?TRC.modesCache[b].cssDivsArr:[],e=c.length;try{for(var f=0;e>f;f++)doc.getElementById(c[f]).id=d[f]}catch(g){__trcError("TRCRBox.prototype.switchCSSResetDivs : ",g.message)}},TRCRBox.prototype.loadFailureHandler=function(){TRC.performance&&TRC.performance.mark("5.2.8."+this._id,null,"TrcPv2","","pv2call",TRC.PerfEvenType.STOP),TRC.pConsole(this.mode_name,"debug","handleing TRC request failure","");var a="TRCRBox.loadFailureHandler(retry="+this.retryCount+")";if(__trcDebug("Enter "+a),!this.request)return void __trcDebug("Exit "+a+": request was aborted");if("object"==typeof window.trc_json_response)return __trcWarn("Exit "+a+": old style response"),this.loadScriptCallback(null,window.trc_json_response),void delete window.trc_json_response;if(this.abortRequest(),this.response||this.dc)return void __trcDebug("Exit "+a+": response already received");if(win.trc_testmode)this.src=this.getRetryUrl("preview"),__trcDebug("Exit "+a+": preview");else{if(!this.use_cdn)return __trcError("Aborting on error due to use-cdn=false",null),void this.abortRendering();this.src=this.getRetryUrl("error"),__trcWarn("Exit "+a+": retrying with "+this.src.split("/")[2].split(".")[0].toUpperCase())}this.getData()},TRCRBox.prototype.abortRequest=function(){this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.request&&(this.request.parentNode.removeChild(this.request),this.request=null)},TRCRBox.prototype.sendRequest=function(){var a="TRCRBox.sendRequest(retry="+this.retryCount+")";if(__trcDebug("Enter "+a),this.response)return __trcDebug("Exit "+a+": already have response"),void this.loadScriptCallback(null,this.response);if(this.loadRBoxRequestFailed){if(!this.use_cdn)return __trcError("loadRBox failed and not using CDN, aborting."),void this.abortRendering();this.retryCount++,this.src=this.getRetryUrl("error")}var b=this.trc.getProperty(this.mode_name,"timeout",this.propertiesOverride)||8e3;this.timeoutId=TRC.Timeout.set(function(){return this.timeoutHappened=this.timeoutHappened+1||1,this.use_cdn?(this.abortRequest(),this.src=this.getRetryUrl("timeout"),__trcWarn("Called TRCRBox.sendRequest.timeout("+this.timeoutHappened+"): retrying with "+this.src.split("/")[2].split(".")[0].toUpperCase()),void this.getData()):void __trcError("Timedout waiting for server but not aborting")}.trcBind(this),b),this.response=null;try{if(this.requestTime=(new Date).getTime()-TRC.utm.start,this.trc.isValidForCache(this.formatedTRCRequest.it)){var c=this.trc.activateTrcCache(this.formatedTRCRequest,this.trc.trcCache,this.trc.trcCacheItemType,this.loadScriptCallback,this);if(c)return;this.src=this.genRBoxURL(this.formatedTRCRequest.cacheKey,this.formatedTRCRequest)}this.request=this.trc.loadExternal(this.src,"js",this.loadFailureHandler.trcBind(this),!0),TRC.performance&&TRC.performance.mark("5.2.0."+this._id,null,"TrcPv2","","pv2call",TRC.PerfEvenType.START)}catch(d){return void __trcError("Exit "+a+": error in loadExternal",d)}__trcDebug("Exit "+a+": success")},TRCRBox.prototype.abortRendering=function(){var a="TRCRBox.abortRendering(retry="+this.retryCount+")";switch(__trcDebug("Called "+a),this.drawList=!0,typeof this.errorHandler){case"string":return void(null!=this.listContainer&&this.listContainer.appendChild(document.createTextNode("Error getting recommendations: "+this.errorHandler)));case"function":return void this.errorHandler()}},TRCRBox.prototype.getData=function(){this.loaded=!0,this.retryCount++;var a="TRCRBox.getData(retry="+this.retryCount+")";return __trcDebug("Enter "+a),this.cdnEventHandler||(this.cdnEventHandler=TRC.listen("staticRecommendationsReceived",function(a){this.response||this.loadScriptCallback(null,a.response)}.trcBind(this))),this.retryCount>this.trc.MAX_RETRY?(__trcError("Exit "+a+": max retry - last call was to "+this.src.split("/")[2].split(".")[0].toUpperCase()),void this.abortRendering()):(TRC.dom.onReady(this.sendRequest.trcBind(this),TRC.Browser.ie?!1:!0),void __trcDebug("Exit "+a+": success"))},TRCRBox.prototype.getContainer=function(){return this.element.parentNode},TRCRBox.prototype.sendEvent=function(a,b,c,d,e,f){var g=!1,h=this.formatedTRCRequest&&this.formatedTRCRequest.tmpl,i=this.response.trc["placement-group"],j=this.response&&this.response.trc?this.response.trc["session-data"]:null,k={ri:this.response?this.response.trc.req:null,sd:this.trc.getSessionData(j),ui:TRC.pageManager.getValue("user-id"),pi:this.trc.getItemId(),wi:this.response?this.response.trc["watched-item"]:null,pt:this.getItemType(),vi:this.cachedViewId||TRC.pageManager.getPageData(),li:this.getListId()},l=function(){g||(g=!0,e&&e())};this.response.cached&&(k.cache="1"),(this.trc.global["tmp-use-pb-params"]&&this.trc.configForPostEvent[a]||"click"===a&&this.sendClickPiggyBack)&&(this.response.trc&&this.response.trc.ppb&&(b.ppb=this.response.trc.ppb),this.response.trc&&this.response.trc.cpb&&(b.cpb=this.response.trc.cpb)),"click"==a&&"nt"==b.prt&&(k={}),h&&(k.tmpl=h),i&&(k.pg=i),__trcCopyProps(b,k),this.response.trc["video-list"]["content-hub-forced-placement"]!==!0||"available"!==a&&"explore"!==a&&"visible"!==a||(a="content-hub-"+a),d?(TRC.pConsole(this.mode_name,"info","sending event type : "+a,k,"object"),this.trc.log1(a,k,c,l,this.placement)):this.trc.logTrcEvent(a,k,c,l);var m=null;TRC.performance&&"visible"==a&&TRC.performance.mark("11.0."+this._id,m,this.mode_name,this.reqId,"visible",TRC.PerfEvenType.MARK),"number"==typeof f&&TRC.Timeout.set(l,f)},TRCRBox.prototype.load=function(a,b){if(!this.loaded){this.trc.preloadRequest=this.trc.preloadRequest||{},"object"==typeof b&&"undefined"==typeof this.trc.preloadRequest[b.placement]&&(b.pv2=!0,this.trc.preloadRequest[b.placement]=b);var c=this.trc.getItemId(),d="undefined"!=typeof c&&null!=c&&0!=c.length;d?(this.src=this.genRBoxURL(),this.errorHandler=a,this.getData()):this.loaded=!0}},TRCRBox.prototype.updateRecommendations=function(a){return this.retryCount=0,this.drawList=!1,this.loadRBoxRequestFailed=!1,this.response=null,this.forceItemType=a,this.reqParams={"item-type":this.trc.getItemType(),"item-id":this.trc.getItemId()},this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.loaded=!1,this.trc.renderRBox(this),!0},TRCRBox.prototype.isVisible=function(a,b){function c(a,b){return!a.parentNode||a.parentNode==document.documentElement&&a!=b?!1:a==b||c(a.parentNode,b)}a=a?a:this.container;var d=a.getBoundingClientRect();if(!this.hasVolume(d))return!1;var e=this.getBoundingClientRect(d,b),f=e.left+Math.round((e.right-e.left)/2),g=e.top+Math.round((e.bottom-e.top)/2),h=TRC.Browser.operaUpto(10.1)||TRC.Browser.safariUpto(4)?document.elementFromPoint(f+document.body.scrollLeft,g+document.body.scrollTop):document.elementFromPoint(f,g),i=this.getRootBounds(b),j=f>0&&f<i.maxX&&g>0&&g<i.maxY;return b?j:j&&h&&c(h,a)},TRCRBox.prototype.hasVolume=function(a){return a.top===a.bottom?!1:!0},TRCRBox.prototype.getBoundingClientRect=function(a,b){if(b){var c={left:b.boundingClientRect.left+a.left,right:b.boundingClientRect.right+a.left,top:b.boundingClientRect.top+a.top,bottom:b.boundingClientRect.top+a.bottom,width:b.boundingClientRect.width,height:b.boundingClientRect.height};return c}return a},TRCRBox.prototype.getRootBounds=function(a){var b={};return a?(b.maxX=a.rootBounds.width,b.maxY=a.rootBounds.height,b):(b.maxX="CSS1Compat"===document.compatMode&&document.documentElement.clientWidth||document.body.clientWidth,b.maxY="CSS1Compat"===document.compatMode&&document.documentElement.clientHeight||document.body.clientHeight,b)},TRCRBox.prototype.visible_items_collection=function(a){var b,c,d,e,f=0;for(b=0;b<this.boxes.length;b++)c=this.boxes[b].video_data,d=this.fullEventItemsHash[c["item-id"]],e=this.isVisible(this.boxes[b],a),e?(c["is-syndicated"]?this.pushVisibleItem(this.synd_visible_boxes,c,this.visibilityArr,"is-syndicated"):c["is-in-network"]?this.pushVisibleItem(this.network_visible_boxes,c,this.visibilityArr,"is-in-network"):c["is-native"]?this.pushVisibleItem(this.native_visible_boxes,c,this.visibilityArr,"is-native"):this.pushVisibleItem(this.visible_boxes,c,this.visibilityArr,"is-organic"),d.tids="vp",f++):"vp"!=d.tids&&(d.tids="nvp");return f},TRCRBox.prototype.pushVisibleItem=function(a,b,c,d){a[b["item-id"]]={id:b["item-id"],type:b.type,publisher:b.publisher}},TRCRBox.prototype.clearChilds=function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)},TRCRBox.prototype.hasSyndicated=function(a){for(var b,c=0;b=a[c];c++)if(b["is-syndicated"]||b["is-in-network"]||b["is-native"])return!0;return!1},TRCRBox.prototype.rePositionDurationElement=function(a,b,c){TRC.Browser.ieUpto(6)?(a.style.marginLeft=b/2-3+"px",a.style.top=c/2-15+"px"):7===TRC.Browser.ie?(a.style.left=b-3+"px",a.style.top=c-15+"px"):(a.style.marginLeft=b-3+"px",a.style.top=c-15+"px")},TRCRBox.prototype.getFirstVideoItem=function(a){var b,c=a.boxes,d=null;for(b=0;b<c.length;b++)if(!c[b].isSyndicated){d=c[b].video_data;break}return d},TRCRBox.prototype.hasDuration=function(){for(var a,b=this.trc.getProperty(this.mode_name,"detail-order",this.propertiesOverride).split(","),c=0;a=b[c];c++)if("duration"==a)return!0;return!1},TRCRBox.prototype.cleanStyleDimensions=function(a){var b=null;try{__trcDOMWalker(a,function(a){a.style.cssText&&(a.style.width="",a.style.height=""),-1!==(a.className+"").indexOf("video-duration")&&(b=a)})}catch(c){}return b},TRCRBox.prototype.createBillboard=function(){var a=__trcGetElementsByClass("trc_rbox_outer","div",this.element)[0];if(!a)return null;var b=document.createElement("div");return this.billboard=b,b.className="trc_billboard",b.style.width="auto",a.parentNode.insertBefore(b,a),a.style.clear="both",b},TRCRBox.prototype.checkForBlocking=function(){var a,b,c,d,e,f,g,h,i="",j=[],k=[],l=[];for(a=0;b=this.boxes[a];a++){try{e=b.video_data["is-in-network"]||b.video_data["is-native"],e||(d=b.video_data["is-syndicated"])}catch(m){}f=e?k:d?l:j,b&&1===b.nodeType&&b.childNodes.length?(g=document.trcGetCurrentStyle(b,"-moz-binding"),c=document.trcGetCurrentStyle(b,"orphans"),h=document.trcGetCurrentStyle(b,"visibility"),"hidden"!=h&&("none"==document.trcGetCurrentStyle(b,"display")?("4321"==document.trcGetCurrentStyle(b,"orphans")&&(i=i||"adblockplus"),f.push(1)):g&&"none"!=g&&(i=i||"adblockplus",f.push(1)))):f.push(1)}(j.length||l.length||k.length)&&__trcWarn("blocked:"+j.length+"-"+k.length+"-"+l.length+"-"+(i||"unknown"))},TRCRBox.prototype.createEmbedThumb=function(a){var b,c,d,e=this["player-container-id"]&&document.getElementById(this["player-container-id"]),f=this.trc.getProperty(this.mode_name,"player-detail-order",this.propertiesOverride),g=document.createElement("DIV"),h=this.trc.getProperty(this.mode_name,"render-player-info",this.propertiesOverride),i=this,j=this.trc.getProperty(this.mode_name,"player-thumbnail-height",this.propertiesOverride)||300,k=this.trc.getProperty(this.mode_name,"player-thumbnail-width",this.propertiesOverride)||400;return(a=a||this.getFirstVideoItem(this))?(e=e||this.createBillboard())?(e.innerHTML="",e.className+=" "+this.mode_name,e.hasDuration=this.hasDuration(),g.style.height="100%",g.style.cssFloat="left",g.className="playerCube",e.appendChild(g),b=this.drawVideoBox(a,e.hasDuration,f,"top"),g.appendChild(b),d=b.getElementsByTagName("A"),h?b.fixTextOverflow():d[1]&&d[1].parentNode.removeChild(d[1]),void(b.thumb&&b.img&&b.img_src&&(b.thumb.appendChild(b.img),b.img.onload=function(){var a=h?k:b.clientWidth,c=h||this.billboard?j:b.clientHeight;b.img.offsetWidth+b.img.offsetHeight?this.FixVideoImage(a,c,b.img):TRC.Timeout.set(function(){a=h?k:b.clientWidth,c=h||this.billboard?j:b.clientHeight,i.FixVideoImage(a,c,b.img)},10)}.trcBind(this),c=this.cleanStyleDimensions(b),b.style.marginLeft="0",b.style.width="auto",b.style.height="100%",b.style.cssFloat="none",b.style.styleFloat="none",b.thumb.style.width=h||this.billboard?k+"px":"100%",b.thumb.style.height=h||this.billboard?j+"px":"100%",b.thumb.style.marginRight="0",b.thumb.style.position="relative",this.setImageLoad(b.img,b,this.getThumbnailURL(a,b.thumb.offsetWidth,b.thumb.offsetHeight),100,b.thumb,this.trc.global["thumb-lazy-load-switch"]),TRC.Browser.ieUpto(6)&&(b.onmouseover=function(){this.className+=" playerCube_hover"},b.onmouseout=function(){this.className=this.className.replace(/\b\s+playerCube_hover\b/g,"")}),e.videoBlock=d[0],d[0].onclick=function(b){var c=this.trc.getProperty(this.mode_name,"player-embed-code",this.propertiesOverride);return b=b||event,"function"==typeof c&&e&&!win.trc_testmode?this.playInsideHostingContainer(a,c,e):win.open(a.logger_url),b.preventDefault&&b.preventDefault(),b.returnValue=!1}.trcBind(this),b.visCheckDone=!0,c&&this.rePositionDurationElement(c,b.thumb.clientWidth,b.thumb.clientHeight)))):void __trcError("Can't find container element for createEmbedThumb!"):void __trcError("outerbox.js: video item was not found")},TRCRBox.prototype.setVideoPlayerLoad=function(a,b,c,d,e){try{this.pVideoLoader.loadVideo({playerContainer:a,url:b,poster:c,itemIndex:d,itemId:e}),TRC.tlf&&console.time("in setVideoPlayerLoad")}catch(f){__trcWarn("Error in setVideoPlayerLoad",f)}},TRCRBox.prototype.getThumbnailsDimensions=function(a){var b=a.boundingClientRect,c={width:Math.ceil(b.width),height:Math.ceil(b.height)};return c},TRCRBox.prototype.removeCarouselItemImgLazyLoadObserver=function(a){for(var b,a=a.split(" "),c=0;c<a.length;c++)b=this.lazyLoadImageObserversIds.indexOf(a[c]),-1!==b&&(TRC.intersections.unobserve(this.lazyLoadImageObserversIds[b]),this.lazyLoadImageObserversIds.splice(b,1))},TRCRBox.prototype.createCarouselContainerImgLazyLoadObserver=function(){var a={targetElement:this.container,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,disableCheckOverlay:!0,onEnter:this.createCarouselItemImgLazyLoadObserver.trcBind(this)};this.lazyLoadImageObserversIds.push(TRC.intersections.observe(a))},TRCRBox.prototype.loadCarouselItemImage=function(a,b,c,d,e,f,g,h,i,j){var k=this.getThumbnailsDimensions(g),l=h.getAttribute(TRC.intersections.TARGET_ATTRIB);this.setImageLoad(a,b,c,d,e,f,!0,k),l&&this.removeCarouselItemImgLazyLoadObserver(l)},TRCRBox.prototype.createCarouselItemImgLazyLoadObserver=function(a,b,c,d){for(var e,f=b.getAttribute(TRC.intersections.TARGET_ATTRIB),g=0;g<this.boxes.length;g++)e={rootSelector:"#"+this.outerBox.id,targetElement:this.boxes[g].thumbBlock,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,onEnter:this.loadCarouselItemImage.trcBind(this,this.boxes[g].img,this.boxes[g],this.boxes[g].img_src,100,this.boxes[g].thumbBlock,this.trc.global["thumb-lazy-load-switch"])},this.lazyLoadImageObserversIds.push(TRC.intersections.observe(e));f&&this.removeCarouselItemImgLazyLoadObserver(f)},TRCRBox.prototype.lazyLoadImage=function(a,b,c,d,e,f,g,h,i,j){var k=this.getThumbnailsDimensions(g),l=h.getAttribute(TRC.intersections.TARGET_ATTRIB);this.setImageLoad(a,b,c,d,e,f,!0,k),l&&this.removeCarouselItemImgLazyLoadObserver(l)},TRCRBox.prototype.alternateImgBaseUrl=function(a){return TRC.imageCounter++,a.replace("images.taboola.com",this.imagesAltUrls[TRC.imageCounter%this.imagesAltUrls.length])},TRCRBox.prototype.setImageLoad=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p=this.trc.global["tmp-image-utf8-encode"]?encodeURIComponent(c):escape(c);if(!g&&this.shouldLazyLoadImages){if(this.isCarousel)return;return n={targetElement:e,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,disableCheckOverlay:!0,onEnter:this.lazyLoadImage.trcBind(this,a,b,c,d,e,f)},void this.lazyLoadImageObserversIds.push(TRC.intersections.observe(n))}if(m=g?h:this.getContainerDim(e,b,this.isHiddenItem(b)))l=this.getImageOptimizationUrlByItemRtbProp(b.video_data),c=this.getImageOptimizePrefix(c,l,m)+p;else if(d)return void TRC.Timeout.set(this.setImageLoad.trcBind(this,a,b,c,d--,e,f,g,h),50);i=b.video_data["pvideo-url"],j=b.video_data.itemIndex,k=b.video_data["item-id"],this.imagesAltUrls.length>0&&(c=this.alternateImgBaseUrl(c)),b.img_src=c=TRC.URL.prototype.switchProtocol.call(c,protocol),f&&!g?this.setLazyImageLoad(a,c):a.src=c,o=Date.now(),TRC.performance&&TRC.performance.mark("imgLoad"+o+"start",null,"",o,"imgLoadTime",TRC.PerfEvenType.START),TRC.dom.on(a,"load",function(a){return TRC.performance&&TRC.performance.mark("imgLoad"+o+"stop",null,"",o,"imgLoadTime",TRC.PerfEvenType.STOP),!0}),this.pVideoLoader&&i&&(e=this.isResponsive?e:e.firstChild,this.setVideoPlayerLoad(e,i,c,j,k))},TRCRBox.prototype.getImageOptimizationUrlByItemRtbProp=function(a){return this.imageOptimizePrefixFlag=!0,a["is-rtb"]?this.rtbImageOptimizePrefix=this.rtbImageOptimizePrefix||this.getImageOptimizationUrl(a):this.imageOptimizePrefix=this.imageOptimizePrefix||this.getImageOptimizationUrl(a)},TRCRBox.prototype.setImagePrefixUrl=function(a){var b=a["is-rtb"]?"rtb-image-url-prefix":"image-url-prefix",c=a["is-rtb"]?RTB_IMAGE_URL_PREFIX:IMAGE_URL_PREFIX;return this.trc.getProperty(this.mode_name,b,this.propertiesOverride)||this.trc.global[b]||c},TRCRBox.prototype.handleGifPrefixParams=function(a){var b,c=this.trc.global["gif-fade-effect-in-ms"],d=",e_fade:{fade},e_fade:-{fade}";return a=a.replace(/(f_png|f_jpg)/,"f_gif"),c&&"0"!==c&&(b=encodeURIComponent(d.replace(new RegExp("{fade}","g"),c)),a=a.substr(0,a.length-1)+b+(a.lastIndexOf("/")===a.length-1?"/":"")),a},TRCRBox.prototype.getImageOptimizationUrl=function(a){var b,c=this.setImagePrefixUrl(a),d=this.trc.global["images-host"],e=this.trc.getProperty(this.mode_name,"images-radius",this.propertiesOverride),f=a["is-gift"];return d&&d.length>2&&(b=new TRC.URL(c),b.host=d,c=b.toString()),e&&"0"!=e&&(c=c.replace(/f_jpg(%2C)?/,""),c=c.replace(/fetch\//,"fetch/f_png%2Cr_"+e+"%2C")),f&&(c=this.handleGifPrefixParams(c)),c},TRCRBox.prototype.isHiddenItem=function(a){return"none"===doc.trcGetCurrentStyle(a,"display",null)},TRCRBox.prototype.getContainerDim=function(a,b,c){var d,e,f=100;if(c){if(this.cachedImageDim)return this.cachedImageDim}else if(d=TRC.dom.getElementRect(a),e=Math.ceil(d.right-d.left))return f=Math.ceil(d.bottom-d.top||this.getAspectHeight(b)||e*this.getThumbAspectRatio(this.trc.modes[this.mode_name],"ratio")||f),this.cachedImageDim={width:e,height:f};return null},TRCRBox.prototype.getAspectHeight=function(a){var b;return a.thumbnail_aspect?(b=TRC.dom.getElementRect(a.thumbnail_aspect),b.bottom-b.top):0},TRCRBox.prototype.getImageOptimizePrefix=function(a,b,c){TRC.performance&&TRC.performance.mark("7.1.1."+this._id);var d=this.getImageSizeFactor(),e=this.trc.getProperty(this.mode_name,"image-min-width",this.propertiesOverride)||110,f=this.trc.getProperty(this.mode_name,"image-max-dimension",this.propertiesOverride)||1500,g=this.trc.getProperty(this.mode_name,"image-size-round",this.propertiesOverride)||20,h=this.trc.getProperty(this.mode_name,"image-max-ratio",this.propertiesOverride)||2.5,i=Math.min(Math.ceil(Math.max(c.width*d,e)/g)*g,f),j=Math.max(Math.min(this.getAllowedRatio(c),h),1/h),k=Math.ceil(i*j);return b=b.replace(new RegExp("{w}","g"),i.toString()).replace(new RegExp("{h}","g"),k.toString()),TRC.performance&&TRC.performance.mark("7.1.9."+this._id),b},TRCRBox.prototype.getImageSizeFactor=function(){var a=this.trc.getProperty(this.mode_name,"image-size-factor",this.propertiesOverride)||1.2;return this.trc.getProperty(this.mode_name,"use-dpr-images",this.propertiesOverride)&&TRC.dom.isHighDensity()&&(a=this.trc.getProperty(this.mode_name,"image-dpr-factor",this.propertiesOverride)||a),a},TRCRBox.prototype.getAllowedRatio=function(a){for(var b=this.trc.getSortedCloudinaryRatios(),c=this.trc.getProperty(this.mode_name,"image-allowed-ratio-diff",this.propertiesOverride)||.01,d=1*a.height/a.width,e=Math.abs(d-c),f=0;f<b.length;f++){var g=b[f];if(!isNaN(g)&&g>=e)return g}return d},TRCRBox.prototype.setLazyImageLoad=function(a,b){a.setAttribute(IMAGE_LAZY_SRC_DATA_NAME,b)},TRCRBox.prototype.setLazyImageLoadMethod=function(){var a,b=this.trc.global["thumb-lazy-load-method"]?this.trc.global["thumb-lazy-load-method"].split(","):[],c=0,d=b.length;for(a=0;d>a;a++)this.lazyImageLoadMethdos[b[a]]&&(c=1,this[this.lazyImageLoadMethdos[b[a]]]());if(!c)for(a in this.lazyImageLoadMethdos)this.lazyImageLoadMethdos.hasOwnProperty(a)&&this[this.lazyImageLoadMethdos[a]]()},TRCRBox.prototype.regLazyImageLoadOnPageInteractive=function(){var a=TRC.EVENT_PAGE_INTERACTIVE;TRC.listen(a,this.lazyImageLoader.trcBind(this)),TRC.isInteractive&&TRC.dispatch(a,void 0)},TRCRBox.prototype.regLazyImageLoadOnPageLoad=function(){var a=TRC.EVENT_PAGE_LOAD;TRC.listen(a,this.lazyImageLoader.trcBind(this)),TRC.isPageLoaded&&TRC.dispatch(a,void 0)},TRCRBox.prototype.regLazyImageLoadOnRboxVisibile=function(){var a=this.trc.global["thumb-lazy-load-space"]||100;this.isInViewPort(this.container,a)&&this.lazyImageLoader.trcBind(this)},TRCRBox.prototype.isInViewPort=function(a,b){var c=TRC.visibility.getMinViewPortOffsets(this.container);return!(0>c&&Math.abs(c)>b)},TRCRBox.prototype.lazyImageLoader=function(){var a,b,c=this.thumbnailImageStack||this.container.getElementsByTagName("img"),d=c.length;if(this.imagesLazyLoaded)this.imagesLazyLoaded=!0;else for(a=0;d>a;a++)b=c[a].getAttribute(IMAGE_LAZY_SRC_DATA_NAME),b&&(c[a].src=b)},TRCRBox.prototype.createUtmParam=function(){return{utm:TRC.utm.join(",")+(this.utm?","+this.utm.join(","):"")}},TRCRBox.prototype.drawListBody=function(trc){function autoHeight(elm){var oldVal=parseInt(document.trcGetCurrentStyle(elm,"height"));if(isNaN(oldVal))return!0;var p=document.createElement("span");with(p.style)display="block",height="10px",width="10px";elm.appendChild(p);var newVal=parseInt(document.trcGetCurrentStyle(elm,"height"));return elm.removeChild(p),newVal!=oldVal}function setHeight(a,b){a.style.height=b+"px";for(var c=0;a.clientHeight>b;)a.style.height=b-++c+"px"}if(TRC.tlf&&console.timeStamp("start mode - "+this.mode_name),TRC.tlf&&console.group("mode - "+this.mode_name),TRC.tlf&&console.time("mode rendering"),"object"==typeof trc){if(this.element.offsetTop<=0&&this.element.offsetWidth<=0)return void TRC.Timeout.set(this.drawListBody.trcBind(this,trc),1e3);win._tblConsole=win._tblConsole||[],TRC.pConsole(this.mode_name,"debug","start drawing widget","");var listContainer=this.listContainer;this.boxes=[];var internalc_width=0,TRCobj=this.trc;if(this.navigationType=TRCobj.getProperty(this.mode_name,"navigation-type",this.propertiesOverride),this.trc.calculateAutoSizeParameters(this),this.element.className+=this.autoSize?" trc-auto-size":"",this.isWCTextLinks){var trc_container=doc.trcGetParentByClassName(this.getContainer(),"trc_related_container");if(TRC.dom.addClass(trc_container,"trc_tl"),this.isClassFilter=TRC.Browser.ieUpto(8),this.isClassFilter?TRC.listen("IE_ClassShift",this.fixWCTextLinksVideoBoxes.trcBind(this)):TRC.dom.on(win,"resize",this.fixWCTextLinksVideoBoxes.trcBind(this).trcThrottle(500)),TRC.listen("videoCubeChange",this.fixWCTextLinksVideoBoxes.trcBind(this)),this.isResponsive){var TEXT_LINKS_RESP_CSS_NAME="trc_tl_responsive";TRC.dom.addClass(trc_container,TEXT_LINKS_RESP_CSS_NAME+" "+TEXT_LINKS_RESP_CSS_NAME+"_"+this.id),this.setResponsiveRules(TEXT_LINKS_RESP_CSS_NAME+"_"+this.id,this.recommendationList.length)}}var has_duration_label=!1,detail_order=this.trc.getProperty(this.mode_name,"detail-order",this.propertiesOverride),orientation=this.orientation=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride);
detail_order=detail_order.split(",");for(var j=0;j<detail_order.length;j++)"duration"==detail_order[j]&&(has_duration_label=!0);var explore_delay=0;this.exploreTimeoutId=null,"undefined"!=typeof this.trc.global&&(explore_delay=this.trc.global["explore-delay"]?this.trc.global["explore-delay"]:explore_delay);var self=this;this.container.onmouseover=function(a){var b=null;win.event?b=win.event.srcElement:a&&(b=a.target),b!=this.container&&null!=this.exploreTimeoutId||b==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},null,!0,null,null)}.trcBind(this),explore_delay))}.trcBind(this),0!=explore_delay&&(this.container.onmouseout=function(a){a=a||win.event;var b=this.container.getBoundingClientRect();a.clientX>=b.left&&a.clientX<b.right&&a.clientY>=b.top&&a.clientY<b.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)}.trcBind(this));var internalc=document.createElement("div");for(internalc.id="internal_"+this.id,this.internalContainer=internalc;listContainer.firstChild;)listContainer.removeChild(listContainer.firstChild);listContainer.appendChild(internalc),("none"==listContainer.style.display||"none"==listContainer.parentNode.style.display)&&(this.listContainer.style.display="block",this.listContainer.parentNode.style.display="block");var trcmeta={};__trcCopyProps(trc,trcmeta),delete trcmeta["video-list"],internalc.meta=trcmeta,this.firstVideo=null;var listSize=this.isResponsive?this.recommendationList.length:TRCobj.getProperty(this.mode_name,"list-size",this.propertiesOverride);listSize=Math.min(listSize,this.recommendationList.length),"horizontal"==orientation?(listContainer.style.overflowY="hidden",listContainer.style.overflowX="auto",internalc.style.width="5000px"):(listContainer.style.overflowX="hidden",listContainer.style.overflowY="auto");for(var i=0;listSize>i;i++){TRC.tlf&&0==i&&console.time("item rendering");var cur=this.recommendationList[i];cur.itemIndex=i,null==this.firstVideo&&"video"==cur.type&&(this.firstVideo=cur);try{this.trc.getFunction(this.mode_name,"item-data-filter",this.propertiesOverride,cur);var box=this.drawVideoBox(cur,has_duration_label);if(i>=this.recommendationList.length/2&&this.isWCTextLinks&&!this.isResponsive&&(box.className+=" trc_tl_right_col"),"vertical"==orientation){var clear_div=document.createElement("div");clear_div.style.clear="both",box.appendChild(clear_div)}if(internalc.appendChild(box),"scrolling"!=this.navigationType){var thumbnail_position=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride);if(this.rows>1&&this.autoSize&&("top"==thumbnail_position||"bottom"==thumbnail_position)&&(this.itemMaxHeight=this.itemMaxHeight?this.itemMaxHeight<box.clientHeight?box.clientHeight:this.itemMaxHeight:box.clientHeight),box.offsetHeight>listContainer.offsetHeight){var diff=box.offsetHeight-listContainer.offsetHeight;box.style.height=parseInt(document.trcGetCurrentStyle(box,"height"))-diff+"px"}internalc.removeChild(box)}else{box.fixTextOverflow(),"undefined"==typeof box.image_div?box.thumb.appendChild(box.img):(box.thumb.appendChild(box.image_div),box.image_div.appendChild(box.img)),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,box.img,box,box.img_src,100,box.thumb,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(box.img,box,box.img_src,100,box.thumb,this.trc.global["thumb-lazy-load-switch"]);var mrg_right=parseInt(document.trcGetCurrentStyle(box,"margin-right"));internalc_width=box.clientWidth+box.offsetLeft+(isNaN(mrg_right)?0:mrg_right),"horizontal"==orientation&&autoHeight(box)&&setHeight(box,listContainer.offsetHeight)}this.boxes.push(box)}catch(e){__trcError("Error in drawVideoBox",e)}TRC.tlf&&0==i&&console.timeEnd("item rendering")}if("scrolling"!=TRCobj.getProperty(this.mode_name,"navigation-type",this.propertiesOverride)){internalc.style.width="auto";var pagerDiv=self.drawPager(),auto=TRCobj.getProperty(self.mode_name,"auto-scroll",this.propertiesOverride);"undefined"!=typeof auto&&"undefined"!=typeof pagerDiv&&null!=pagerDiv&&"none"!=auto&&(self.auto_scroll=function(){var a=0;for(i=0;i<pagerDiv.pages.length;i++)if(pagerDiv.pages[i]==pagerDiv.current&&i!=pagerDiv.pages.length-1){a=++i;break}pagerDiv.pages[a].page_switch()},null!=self.auto_scroll_interval&&TRC.Interval.clear(self.auto_scroll_interval),self.auto_scroll_interval=TRC.Interval.set(self.auto_scroll,parseInt(auto)))}else internalc.style.width=internalc_width+"px",TRC.Browser.ieUpto(6)&&1.1*listContainer.parentNode.parentNode.clientWidth<listContainer.clientWidth&&(listContainer.style.width="99%"),function(a){if(!(listContainer["client"+a]+1>=listContainer["scroll"+a])){if(TRC.Browser.ie&&TRC.Browser.ie<8)return listContainer.style[a.toLowerCase()]=internalc["client"+a]+18+"px",void("Width"==a&&(this.element.style.width=listContainer.style[a.toLowerCase()]));var b=Math.floor(Math.max(1,listContainer["scroll"+a]-listContainer["client"+a]));b-=Math.max(0,listContainer["scroll"+a]-listContainer.parentNode["scroll"+a]);var c=parseInt(listContainer.style[a.toLowerCase()]),d=Math.max(listContainer["scroll"+a],isNaN(c)?0:c)+b+"px";listContainer.style[a.toLowerCase()]=d,"Width"==a&&(this.element.style.width=d),this.postRenderQueue.pushFront("adapt to scrollbar",arguments.callee.trcBind(this,a))}}.call(this,"horizontal"==TRCobj.getProperty(this.mode_name,"orientation",this.propertiesOverride)?"Height":"Width"),TRCobj.getProperty(this.mode_name,"shade-scroll",this.propertiesOverride)&&this.postRenderQueue.pushBack("drawShade",function(a){this.drawShade(a)}.trcBind(this,orientation)),listContainer.onscroll=function(){this.sendEvent("explore",{},null,!0),this.check_visibility()}.trcBind(this),this.check_visibility();if(this.shouldAddRowsClearingDivs())for(var i=0;i<this.boxes.length;i++)this.isBeginningOfNewRow(i,this.boxes.length)&&this.addAutoSizeRowClearingDiv(this.boxes[i]);this.boxes[0].className+=" trc-first-recommendation trc-spotlight-first-recommendation",this.hasSyndicatedContent&&this.postRenderQueue.pushBack("syndication hint icon",this.addSyndicationHintIcon.trcBind(this,internalc)),"embed"===this.link_target&&this.postRenderQueue.pushBack("createEmbedThumb",this.createEmbedThumb.trcBind(this)),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(a){this.trc.getFunction(this.mode_name,"list-suffix",this.propertiesOverride,a,this),this.trc["publisher-end"](this.id)}.trcBind(this,internalc)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.trc.global["thumb-lazy-load-switch"]&&this.setLazyImageLoadMethod();var visible_delay=0,visible_cycle=1e3;this.visibleTimeoutId=null,"undefined"!=typeof this.trc.global&&(visible_delay=this.trc.global["visible-delay"]?this.trc.global["visible-delay"]:visible_delay,visible_cycle=this.trc.global["visible-cycle"]?this.trc.global["visible-cycle"]:visible_cycle),this.setVisibility(this.manualVisibility,this.trc.global["enable-deferred-visible"],this.trc.global["visible-defer-timeout"],visible_delay,visible_cycle,internalc),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container,placement:this.orig_placement}),TRC.EventsAPI.dispatchRender(trc,this),TRC.tlf&&console.timeEnd("mode rendering"),TRC.tlf&&console.groupEnd()}},TRCRBox.prototype.postRender=function(a){if(a){var b=this.postRenderQueue.popFront();if(null==b)return void __trcDebug("TRCRBox.postRender: finished");try{b.func.call(this),TRC.pConsole(this.mode_name,"debug","executing postRender functions - see info",b.func.toString())}catch(c){__trcError("Error in TRCRBox.postRender while executing "+b.name,c)}}TRC.Timeout.set(this.postRender.trcBind(this,!0),0)},TRCRBox.prototype.getPopupUrl=function(){return this.trc.getProperty(this.mode_name,"popup-custom-url",this.propertiesOverride)||"popup.taboola.com/"+(this.trc.language||"en")},TRCRBox.prototype.addSyndicationHintIcon=function(a){var b,c=this.trc.getProperty(this.mode_name,"syndicated-attribution",this.propertiesOverride),d=this.trc.getProperty(this.mode_name,"syndicated-attribution-tooltip",this.propertiesOverride),e=this.trc.getProperty(this.mode_name,"syndicated-attribution-position",this.propertiesOverride),f=document.createElement("a"),g=/\btrc_rbox\b/;for(f.href=TRC.PROTOCOL+"//"+this.getPopupUrl()+"/?"+this.getAttributionLinkParams(),f.rel="nofollow",f.appendChild(document.createTextNode(c)),f.title=d,f.style.display="block",f.className="whatsThisSyndicated a-"+e,f.target="_blank";!g.test(a.className);)a=a.parentNode;b=f.cloneNode(!0),b.className+=" trc_mobile_attribution_link",f.className+=" trc_desktop_attribution_link",a.appendChild(f),a.appendChild(b),"absolute"!==a.style.position&&(a.style.position="relative"),TRC.dom.on(f,"click",function(a){return TRC.aboutUs.open(a||event)||!1})},TRCRBox.prototype.drawShade=function(a){if(!(TRC.Browser.ie&&TRC.Browser.ie<=6)){var b=this.listContainer["client"+("vertical"==a?"Width":"Height")]+"px",c=this.listContainer["client"+("vertical"==a?"Height":"Width")]+this.listContainer["client"+("vertical"==a?"Top":"Left")]-10+"px",d=document.createElement("div");d.className=a+"-start-shade",d.style["vertical"==a?"width":"height"]=b,d.style["margin"+("vertical"==a?"Top":"Left")]=this.listContainer["client"+("vertical"==a?"Top":"Left")]+"px";var e=document.createElement("div");e.className=a+"-end-shade",e.style["vertical"==a?"width":"height"]=b,this.listContainer.parentNode.insertBefore(d,this.listContainer),this.listContainer.parentNode.insertBefore(e,this.listContainer),e.style["margin"+("vertical"==a?"Top":"Left")]=c,e.style.backgroundRepeat=d.style.backgroundRepeat="repeat-"+("vertical"==a?"x":"y")}},TRCRBox.prototype.drawPager=function(){function a(){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui drawPager count_number_of_pages");var a=[],c=0,d=0;if("none"==this.navigationType)return[{start_index:0,end_index:this.boxes.length}];for(b=0;b<this.boxes.length;b++){var e=this.boxes[b];l.appendChild(e),e.fixTextOverflow(!0),"vertical"==k?l.offsetHeight-5>=j.clientHeight&&(l.removeChild(e),a[c++]={start_index:d,end_index:d>b-1?d:b-1},d=b-1>=d?b--:b,this.clearChilds(l)):1.1*j.clientHeight<j.scrollHeight&&(l.removeChild(e),a[c++]={start_index:d,end_index:d>=b-1?d:b-1},d=b-1>=d?b--:b,this.clearChilds(l))}return a[c]={start_index:d,end_index:b-1},this.clearChilds(l),a}var b,c=this.trc,d=c.getProperty(this.mode_name,"pager-type-style",this.propertiesOverride),e=c.getProperty(this.mode_name,"cyclical-paging",this.propertiesOverride),f=c.getProperty(this.mode_name,"pager-position",this.propertiesOverride),g=c.getProperty(this.mode_name,"pager-button-location",this.propertiesOverride),h=c.getProperty(this.mode_name,"pager-button-style",this.propertiesOverride),i=this.mode_name,j=this.listContainer,k=c.getProperty(i,"orientation",this.propertiesOverride),l=j.firstChild;this.rows=c.getProperty(i,"rows",this.propertiesOverride),this.clearChilds(l),j.style.overflowX="hidden",j.style.overflowY="hidden";var m=a.call(this),n=document.createElement("div");if(n.style.clear="both",!this.autoSize){for(;this.rows>1&&!(m.length>=this.rows);)this.rows--;if(this.rows>1)for(var o=[],p=0;p<m.length;p++)this.boxes[m[p].start_index].className+=" trc-first-in-row",(p+1)%this.rows==0&&o.push({start_index:m[p+1-this.rows].start_index,end_index:m[p].end_index});o&&(j.style.height="auto",m=o)}for(b=m[0].start_index;b<=m[0].end_index;b++)if(!(b>=this.boxes.length)){var q=this.boxes[b];l.appendChild(q);try{null!=q.img_src&&("undefined"==typeof q.image_div?q.thumb.appendChild(q.img):(q.thumb.appendChild(q.image_div),q.image_div.appendChild(q.img)),this.setImageLoad(q.img,q,q.img_src,100,q.thumb,this.trc.global["thumb-lazy-load-switch"]),q.img_src=null)}catch(r){__trcError("Pager thumbnail images fixing errors",r)}q.fixTextOverflow()}l.appendChild(n);var s=this.pager;if(null!=s)try{s.parentNode.removeChild(s)}catch(r){}var t=m.length;if(TRC.rboxMap&&t&&TRC.rboxMap.sendDebugMap("trcrboxui drawPager countPages"),1>=t||"none"==this.navigationType)return this.check_visibility(),null;var u=document.createElement("div");u.style.position="absolute",u.style.width=j.clientWidth/2+"px";var v=document.createElement("div");u.appendChild(v),j.parentNode.appendChild(u),v.id="trc_pager_"+this.id,v.className="trc_pager",v.current=null,v.pages=[],v.curPage=0;var w=j.clientWidth,x=document.createElement("div");x.id="pager_prev_"+this.id,x.className="trc_pager_prev","sides"==g?(x.style.width="auto",x.style.paddingTop=(j.clientHeight-x.clientHeight)/2+"px",x.style.position="absolute",x.style["ltr"==c.direction?"left":"right"]="0px",j.parentNode.insertBefore(x,j)):v.appendChild(x),x.onclick=function(){v.curPage>0?v.pages[v.curPage-1].onclick():e&&v.pages[v.pages.length-1].onclick()};var y=document.createElement("div");y.id="pager_next_"+this.id,y.className="trc_pager_next",y.onclick=function(){v.curPage+1<v.pages.length?v.pages[v.curPage+1].onclick():e&&v.pages[0].onclick()};var z=TRC.URL.prototype.switchProtocol.call(c.getProperty(this.mode_name,"pager-button-inactive-image",this.propertiesOverride),protocol),A=TRC.URL.prototype.switchProtocol.call(c.getProperty(this.mode_name,"pager-button-active-image",this.propertiesOverride),protocol),B=TRC.URL.prototype.switchProtocol.call(c.getProperty(this.mode_name,"pager-button-hover-image",this.propertiesOverride),protocol);if("none"!=g)if(TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui drawPager pager_btn_location"),"image"==h)""!=z?(x.image=document.createElement("img"),"sides"==g&&(x.image.onload=function(){j.style.paddingLeft=j.style.paddingRight=this.clientWidth+"px"}),x.image.src=z,x.appendChild(x.image),y.image=document.createElement("img"),"sides"==g&&(y.image.onload=function(){j.style.paddingLeft=j.style.paddingRight=this.clientWidth+"px",this.style["ltr"==c.direction?"left":"right"]=w-this.clientWidth+"px"}),y.image.src=z,y.appendChild(y.image),x.onmouseover=function(){this.before_image=this.image.src,B!=this.image.src&&(this.image.src=B)},x.onmouseout=function(){"undefined"!=typeof this.before_image&&this.before_image!=this.image.src&&(this.image.src=this.before_image)},y.onmouseover=function(){this.before_image=this.image.src,B!=this.image.src&&(this.image.src=B)},y.onmouseout=function(){"undefined"!=typeof this.before_image&&this.before_image!=this.image.src&&(this.image.src=this.before_image)}):(x.innerHTML="&lt;",y.innerHTML="&gt;");else{var C=h.split("|");x.innerHTML=C[0],y.innerHTML=C[1]}else x.style.display="none",y.style.display="none";var D=document.createElement("div");D.className="trc_pager_pages",v.appendChild(D);var E=c.getProperty(this.mode_name,"pager-style-active-image",this.propertiesOverride),F=c.getProperty(this.mode_name,"pager-style-inactive-image",this.propertiesOverride),G=c.getProperty(this.mode_name,"pager-style-hover-image",this.propertiesOverride);for(b=0;t>b;b++){var H=document.createElement("div");switch(d){case"none":H.innerHTML="",D.style.cssText="display:none !important;";break;case"numbers":H.innerHTML=""+(b+1);break;case"counter":var I=document.createElement("span");I.className="trc_pager_counter",I.innerHTML=Gettext.strargs(c.gt.gettext("%1 of %2"),[b+1,v.pages.length]),H.appendChild(I),D.className.search("trc_pager_counter")<0&&(D.className+=" trc_pager_counter");break;case"bullets":H.innerHTML='<span style="font-weight: bold;">&bull;</span>';break;case"image":""!=E?(H.inner_img=document.createElement("img"),H.inner_img.src=F,H.appendChild(H.inner_img)):H.innerHTML=""+(b+1)}H.className="trc_pager_unselected",D.appendChild(H),H.index=b;var J=this;H.page_switch=function(){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui drawPager page_switch");try{l.removeChild(n)}catch(a){}if(null!=v.current){for("image"==d&&""!=F&&(H.inner_img.src=F),v.current.className="trc_pager_unselected",b=m[v.curPage].start_index;b<=m[v.curPage].end_index;b++)b<J.boxes.length&&l.removeChild(J.boxes[b]);for(b=m[this.index].start_index;b<=m[this.index].end_index;b++)if(!(b>=J.boxes.length)){var f=J.boxes[b];if(b===m[this.index].start_index&&(f.className+=" trc-spotlight-first-recommendation"),l.appendChild(f),"undefined"!=typeof f.img&&null!=f.img_src&&(f.video_data.ad_load_count=(new Date).getTime(),"undefined"==typeof f.image_div?f.thumb.appendChild(f.img):(f.thumb.appendChild(f.image_div),f.image_div.appendChild(f.img)),f.img.src=f.img_src,f.img_src=null),null!=f.spnoverlay){var h=f.spnoverlay,i=h.firstChild,j=h.lastChild,k=j[(j.clientHeight>0?"client":"scroll")+"Height"];i.style.width=j[(j.clientWidth>0?"client":"scroll")+"Width"]+"px",h.style.height=i.style.height=Math.max(k,parseInt(i.style.height))+"px",f.spnoverlay=null}f.fixTextOverflow(),J.postRender()}}if(l.appendChild(n),v.current=this,"image"==d&&""!=E&&(H.inner_img.src=E),this.className="trc_pager_selected",v.curPage=this.index,"undefined"!=typeof y&&(this.index+1>=v.pages.length&&!e?(""!=z&&"none"!=g&&(y.image.src=z),y.className="trc_pager_next pager_disabled"):(""!=A&&"none"!=g&&(y.image.src=A),y.className="trc_pager_next pager_enabled")),"undefined"!=typeof x&&(this.index<=0&&!e?(""!=z&&"none"!=g&&(x.image.src=z),x.className="trc_pager_prev pager_disabled"):(""!=A&&"none"!=g&&(x.image.src=A),x.className="trc_pager_prev pager_enabled")),"counter"==d){var o=document.createElement("div");for(o.appendChild(document.createTextNode(Gettext.strargs(c.gt.gettext("%1 of %2"),[this.index+1,v.pages.length])));D.firstChild;)D.removeChild(D.firstChild);D.appendChild(o)}J.check_visibility(),TRC.dispatch("trc_afterRboxDraw")},H.onclick=function(){this.page_switch(),0!=this.index&&J.sendEvent("explore",{},null,!0)},H.onmouseover=function(){"image"==d&&""!=G&&(this.prev_img=this.inner_img.src,this.inner_img.src=G)},H.onmouseout=function(){"image"==d&&"undefined"!=typeof this.prev_img&&(this.inner_img.src=this.prev_img)},v.pages.push(H)}if("sides"==g?(y.style.width="auto",y.style.paddingTop=(j.clientHeight-y.clientHeight)/2+"px",y.style.position="absolute",j.parentNode.insertBefore(y,j),j.style.paddingLeft=j.style.paddingRight=y.clientWidth+"px",y.style["ltr"==this.trc.direction?"left":"right"]=w+y.clientWidth+"px"):v.appendChild(y),v.pages[0].onclick(),this.pager=v,"center"==f){v.style.position="absolute",v.style.cssFloat="none",v.style.styleFloat="none",v.style.display="block";var K=v.clientWidth;v.style.width=K+2+"px",v.style.position="relative";var L=(j.clientWidth-K)/2;v.parentNode.style.width=K+2+L+"px",v.style.marginLeft=L+"px"}else if("header"==f&&this.header.ext){v.parentNode.removeChild(v),v.className+=" in_trc_header";var M=document.createElement("div");M.appendChild(v),M.id=v.id,v.id="";var N=document.createElement("div");N.style.clear="left",M.appendChild(N),this.header.titleBox.innerHTML||(this.header.titleBox.innerHTML="&nbsp;"),this.header.ext.appendChild(M)}return v},TRCRBox.prototype.check_visibility=function(){for(var a=0;a<this.boxes.length;a++){var b=this.boxes[a];this.itemMaxHeight&&(b.style.height=this.itemMaxHeight+"px")}},TRCRBox.prototype.playInsideHostingContainer=function(a,b,c){var d,f,g,h,i=this.trc.getProperty(this.mode_name,"render-player-info",this.propertiesOverride),j=this.trc.getProperty(this.mode_name,"player-detail-order",this.propertiesOverride);c.videoBlock?("A"===c.videoBlock.tagName.toUpperCase()&&(d=this.trc.getProperty(this.mode_name,"player-thumbnail-height",this.propertiesOverride)||300,c.videoBlock.parentNode.replaceChild(h=document.createElement("DIV"),c.videoBlock),c.videoBlock=h,c.videoBlock.style.height=i?d+"px":"",c.videoBlock.style.overflow="hidden",i&&(c.videoBlock.style.width=(this.trc.getProperty(this.mode_name,"player-thumbnail-width",this.propertiesOverride)||400)+"px",c.videoBlock.style.height=(this.trc.getProperty(this.mode_name,"player-thumbnail-height",this.propertiesOverride)||300)+"px")),__trcPurgeEventHandlers(c.videoBlock),c.videoBlock.innerHTML="",g=c.getElementsByTagName("A")[0],b.apply(null,[c.videoBlock,a]),i&&(f=this.drawVideoBox(a,c.hasDuration,j,"top"),__trcPurgeEventHandlers(g),g.parentNode.replaceChild(f.getElementsByTagName("A")[1],g)),this.sendEvent("click",{ii:a["item-id"],it:a.type},null),this.trc.sendExternalTracking(this.getItemExternalTrackingURLsList(a).c)):__trcError("Error opening autoPlayContainer",e)},TRCRBox.prototype.findElement=function(a,b,c,d){"undefined"==typeof b&&(b=document),"undefined"==typeof c&&(c="*");for(var e=b.getElementsByTagName(c),f=0;f<e.length;f++)if(a(e[f]))return e[f];return d},TRCRBox.prototype.findElements=function(a,b,c){for(var d=[],e=0;a&&e<a.length;e++){var f=a[e],g=this.findElement(function(a){return a.className.search(f)>=0},b,"span");g&&(c&&(g=g.cloneNode(!0)),d.push(g))}return d},TRCRBox.prototype.findFlash=function(a){var b=this.findElement(a,document,"embed");return b?b:this.findElement(a,document,"object")},TRCRBox.prototype.pauseVideo=function(a){var b=this.findFlash(function(a){return"function"==typeof a.pauseVideo});try{b&&b.pauseVideo(a)}catch(c){__trcError("Error in pauseVideo",c)}"function"==typeof window.trc_pauseVideo&&window.trc_pauseVideo(a)},TRCRBox.prototype.playVideoAd=function(a,b,c,d){var e=this.findFlash(function(a){return"function"==typeof a.playVideoAd});try{e&&e.playVideoAd(a.title,a["display-url"],a["landing-url"],a.url,b,c,a["item-id"],d)}catch(f){__trcError("Error in playVideoAd",f)}},TRCRBox.prototype.getLinkTarget=function(a,b,c){var d;return d=b?b[a]||c[a]:c[a],d||(d="_blank"),d},TRCRBox.prototype.addPiggyBackParams=function(a){return a?a+"&ppb="+this.response.trc.ppb+"&cpb="+this.response.trc.cpb:void 0},TRCRBox.prototype.addModeDebugData=function(a){return a+encodeURI(this.getModeDebugData("string"))},TRCRBox.prototype.getModeDebugData=function(a,b){try{var c=this.response.trc["test-variant"];if("string"===a){var d="&cmn="+this.mode_name,e="&cpn="+this.placement,f="",g="",h="";return c!==b&&(f="&omn="+this.orig_name,g="&opn="+this.orig_placement,h="&vn="+c),d+e+f+g+h}var i={};return i.cmn=this.mode_name,i.cpn=this.placement,c!==b&&(i.omn=this.orig_name,i.opn=this.orig_placement,i.vn=c),i}catch(j){}},TRCRBox.prototype.detectItemFromSameHost=function(a,b){if(a===b||this.trc["detect-item-from-same-host"](a,b))return!0;for(var c=a.split(".").reverse().join(""),d=b.split(".").reverse().join(""),e=6,f=!0,g=0;e>g;g++)if(c[g]!==d[g]){f=!1;break}return f},TRCRBox.prototype.createVideoLink=function(a,b){var c,d,e=document.createElement("a"),f=this.trc.global["publisher-onclick-nt-enabled"]&&a["is-in-network"],f=this.ntHandlerEnabled&&a["is-in-network"],g=this.sendClickPiggyBack?this.addPiggyBackParams(a.logger_url):a.logger_url,h=this.trc.global["disable-stop-propagation"]===!0?!1:!0,i=TRC.pageManager.getTopMostWindow().location.hostname,j=TRC.URL(a.url).host;return this.sendModeDebugData&&(g=this.addModeDebugData(g)),this.response.trc["video-list"]["content-hub-forced-placement"]===!0&&(g=g.replace("click","content-hub-click")),f&&(a.hasNtClckHnadler=!0),e.title=TRC.util.getHtmlDecodeText(b),a.link_target=this.link_target,a.isSyndicated&&!f?(e.href=a.url,(this.trc.global["allow-nofollow-for-exchange"]||!a["is-in-network"]||a["is-in-network"]&&!this.detectItemFromSameHost(i,j))&&(e.rel="nofollow"),c=this.getLinkTarget(this.getProviderType(a),this.linkTargetConf,this.defaultLinkTarget),e.logger_url=g.replace("&url=","&redir=")+(a["is-in-network"]?"&prt=nt":"")+(a["is-native"]?"&prt=nav":""),e.target=c,1==this.trc.global["enable-ie-split-click-event"]&&TRC.Browser.ie&&(d=e.logger_url.length>2048),this.trc.global["touchstart-enabled"]===!0&&TRC.dom.on(e,"touchstart",function(a){e.href=e.logger_url,e.isTouchPropagation=1,h&&a.stopPropagation()}),e.onmousedown=function(a){return a=a||event,(a.target||a.srcElement).target=c,e.isTouchPropagation?!0:void(d||(e.href=e.logger_url))},e.onclick=function(){if(TRC.clickFraudDetect.isInitialized&&a["is-syndicated"]&&TRC.clickFraudDetect.fraudScriptCallback(this.placement,TRC.pageManager.getValue("user-id")),this.trc.sendExternalTracking(this.getItemExternalTrackingURLsList(a).c),this.trc.global["deep-linking-enabled"]&&TRC.DeepLinking.isAppStoreURL(a.url,this.trc.global["additional-deep-links-regex"]))try{return TRC.DeepLinking.openDeepLink(e.logger_url),!1}catch(b){}return e.isTouchPropagation?!0:(d?this.sendEvent("click",{ii:a["item-id"],it:a.type},null,!1):this.shiftRedirOnclick&&(e.href=e.logger_url),this.pauseVideo("link"),TRC.Browser.ieUpto(7)?(this.clickLink(e.href,e.target),!1):!0)}.trcBind(this)):(e.href=a.url,"blank"!=this.link_target?e.target="_parent":(e.target="_blank",e.onmousedown=function(a){a=a||event,(a.target||a.srcElement).target="_blank"}),a["is-in-network"]&&(a.scParams.prt="nt"),this.organicRedirParam&&(g=g.replace("&url=","&"+this.organicRedirParam+"=")),this.useRedirect&&this.useRedirectOnLink&&(e.href=g),e.onmousedown=function(){e.href=g},e.onclick=this.videoLinkClickHandler.trcBind(this,a,e,g)),this.trc.global["events-api-click-enabled"]&&TRC.dom.on(e,"click",function(b){var c=e.target;a.linkTarget=c,"_blank"===c?setTimeout(function(){TRC.EventsAPI.dispatchClick(a,this.response.trc)}.trcBind(this),0):TRC.EventsAPI.dispatchClick(a,this.response.trc)}.trcBind(this)),e},TRCRBox.prototype.videoLinkClickHandler=function(){var a=2e3,b=function(a,b,c){var d=a.trc.global["syndication-embed-code"];return"function"!=typeof d||win.trc_testmode?win.open(b.logger_url):__trcWarn("Taboola Lightbox implementation is deprecated"),!1},c=function(a,b){var c=a.trc.getProperty(a.mode_name,"player-embed-code",this.propertiesOverride),d=a["player-container-id"],e=a.billboard||document.getElementById(d);return"function"==typeof c&&e&&!win.trc_testmode?a.playInsideHostingContainer(b,c,e):win.open(b.logger_url),!1},d=function(a,b,c,d){return"video"==b.type&&a.pauseVideo("link"),c.target="_blank",TRC.Browser.ieUpto(7)||d?TRC.Browser.firefoxUpto(8)?!0:(a.clickLink(c.href,c.target),!1):(c.href=b.url,a.sendEvent("click",{ii:b["item-id"],it:b.type},null,!1),!0)},e=function(a){var b=a.link_target;if("local"===b){if("function"==typeof window.trc_videoSelected)return void window.trc_videoSelected.call(window,a.id,a.url);b=this.trc.video_source}this.clickLink(a.url)};return function(f,g,h,i){i=i||event;var j=f.link_target,k=!1,l=this.useRedirect;if("embed"!==j&&this.trc.sendExternalTracking(this.getItemExternalTrackingURLsList(f).c),"lightbox"===j&&this.trc.global)return b(this,f,i);switch(j){case"embed":k=c(this,f);break;case"blank":(i.target||i.srcElement).target="_blank",l&&(g.href=h),k=d(this,f,g,l);break;default:if(l&&"local"!=f.link_target&&"function"!=typeof this.onclick&&"function"!=typeof this.trc.onclick){if(TRC.Browser.ieUpto(7))return this.clickLink(g.href,g.target),!1;this.shiftRedirOnclick&&(g.href=h),k=!0}else this.sendEvent("click",f.hasNtClckHnadler?f.scParams:{ii:f["item-id"],it:f.type},null,!1,this.publisherClickHandler.trcBind(this,f,e.trcBind(this,f,!1)),a)}return f.url!=f.original_url&&__trcDebug("url:"+f.original_url+", changed to:"+f.url+", on page:"+win.location.href),k||(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation()),k}}(),TRCRBox.prototype.clickLink=function(a,b){TRC.Browser.firefoxUpto(8)&&(win.location.href=a);var c=document.createElement("a");if(c.href=a,c.target=b?b:"_parent",c.style.visibility="hidden",document.body.appendChild(c),c.click)return void c.click();var d=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,button:0});c.dispatchEvent(d)},TRCRBox.prototype.publisherClickHandler=function(a,b){var c=__trcCopyProps(a,{});delete c["item-id"],delete c.link;try{if("function"==typeof this.onclick&&!this.onclick.call(this.pubOpts,c))return!1;if("function"==typeof this.trc.onclick&&!this.trc.onclick.call(this.pubOpts,c))return!1}catch(d){__trcError("Publisher 'onclick' handler had an error",d)}return b(this)},TRCRBox.prototype.add_span=function(a,b,c){var d=document.createElement("span");return null!=a&&(d.className=a),null!=b&&("object"==typeof b?d.appendChild(b):d.innerHTML=b),"undefined"!=typeof c&&c.appendChild(d),d},TRCRBox.prototype.genBidiLabel=function(a,b,c){var d,e,f=TRC.util.textIsRTL(b);e=b;var g=e,h="video-label "+c;if(this.shouldUseSmartEllipsis()&&(!this.useNativeLineClamp||f)){var i=this.trc.getProperty(this.mode_name,"tokenize-strategy")||"word",j=TRC.Ellipsis._tokenizeStrategies[i];g=TRC.Ellipsis._tokenizeSingle(e.innerHTML||e,j),h+=" trc-smart-ellipsis"}return d=this.add_span(h,g,a),d.isRTL=f,d.tokenizeStrategy=i,d},TRCRBox.prototype.buildLabelBox=function(a,b,c){var d,e;for(-1!==c.indexOf("title")&&this.createTitleAndIconContainer(a),d=0;d<c.length;d++)switch(e=c[d]){case"title":this.genBidiLabel(a,b.title,"video-title");break;case"uploader":"undefined"!=typeof b.uploader&&this.add_span("video-label video-uploader",this.formatData("uploader",b.uploader),a);break;case"category":"undefined"!=typeof b.category&&this.add_span("video-label video-category",this.formatData("category",decodeURIComponent(b.category.split(";")[0].split("//")[0])),a);break;case"views":this.add_span("video-label video-views",this.formatData("views",b.views),a);break;case"rating":this.add_span("video-label video-rating",this.formatData("rating",b.rating),a);break;case"description":var f=this.genBidiLabel(a,b.description,"video-description");f.title='"Description: '+this.removeHtmlTags(b.description)+'"';break;case"duration":"undefined"!=typeof b.duration&&""!=b.duration&&this.add_span("video-label video-duration-detail",this.formatData("duration",b.duration),a);break;case"branding":b["branding-text"]?this.add_span("branding",this.formatData("syndicator",b["branding-text"]),a):b["branding-url"]&&this.add_span("branding","<img src='"+b["branding-url"]+"'>",a);break;case"url":break;default:"undefined"!=typeof b[e]&&b[e]&&this.add_span("video-label video-"+e,this.formatData(e,b[e]),a)}},TRCRBox.prototype.createTitleAndIconContainer=function(a){var b,c,d,e=this.trc.getProperty(this.mode_name,"title-icon",this.propertiesOverride)||"NONE";"CUSTOM"===e?d=this.trc.getProperty(this.mode_name,"title-icon-url",this.propertiesOverride):"PUBLISHER_LOGO"===e&&(d=this.trc["publisher-logo"][TRC.publisherId]||TRC.networkId&&this.trc["publisher-logo"][TRC.networkId]),d&&(b=document.createElement("span"),c=document.createElement("img"),b.className="video-icon-container",c.className="video-icon-img trc_img",c.src=TRC.URL.prototype.switchProtocol.call(d,protocol),a.className+=" label-box-with-title-icon",b.appendChild(c),a.appendChild(b))},TRCRBox.prototype.FixVideoImage=function(a,b,c){var d=TRC.css.utils;if(0==c.height||0==c.width||!c.complete||TRC.Browser.ieUpto(6))return d.setStyleProperty(c,"width",a+"px",this.isCssImportant),d.setStyleProperty(c,"height",b+"px",this.isCssImportant),void(c.style.visibility="visible");var e=a/b,f=c.width/c.height;if(e>f){var g=Math.floor(a/f),h=Math.floor((b-g)/2);d.setStyleProperty(c,"width",a+"px",this.isCssImportant),0!=h&&(TRC.Browser.ieAtleast(8)?(c.style.position="relative",d.setStyleProperty(c,"top",h+"px",this.isCssImportant)):d.setStyleProperty(c,"margin-top",h+"px",this.isCssImportant))}else{var i=Math.floor(b*f),j=Math.floor((a-i)/2);d.setStyleProperty(c,"height",b+"px",this.isCssImportant),0!=j&&(TRC.Browser.ieAtleast(8)?(c.style.position="relative","ltr"==this.trc.direction?d.setStyleProperty(c,"left",j+"px",this.isCssImportant):d.setStyleProperty(c,"left",-1*j+"px",this.isCssImportant)):"ltr"==this.trc.direction?d.setStyleProperty(c,"margin-left",j+"px",this.isCssImportant):d.setStyleProperty(c,"margin-right",j+"px",this.isCssImportant))}c.style.visibility="visible"},TRCRBox.prototype.drawThumbnailLink=function(a,b,c,d,e){var f;b||"video"==c.type&&"undefined"!=typeof c.duration&&""!=c.duration&&"0"!=c.duration&&(f=this.genDuration(c.duration));var g=this.createVideoLink(c,d);TRC.dom.addClass(g,"item-thumbnail-href"),"undefined"!=typeof c["thumbnail-clickable"]&&"false"==c["thumbnail-clickable"]&&(g.title="",g.style.cursor="default",
g.onclick=function(){return!1});var h=this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride),i=this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),j=document.createElement("span");if(j.className="thumbBlock","undefined"!=typeof h&&(j.style.height=h+"px"),"undefined"!=typeof i&&(j.style.width=i+"px"),c.imageIframe)this.drawImageIframe(j,c.imageIframe,c.link.logger_url),a.hasFloatingButton=!0;else{var k=document.createElement("img");k.style.visibility="hidden";var l=this.add_span("thumbnail-overlay",null,j);TRC.Browser.ieUpto(6)&&(l.style.display="none");var m=this.trc.getProperty(this.mode_name,"emblem",this.propertiesOverride),n=null;null==m||"null"==m||TRC.Browser.ie&&!TRC.Browser.ieAtleast(7)||(n=this.add_span("thumbnail-emblem",null,j),n.style.backgroundImage="url('"+m+"')"),"undefined"!=typeof h&&(l.style.height=h+"px",null!=n&&(n.style.height=h+"px")),"undefined"!=typeof i&&(l.style.width=i+"px",null!=n&&(n.style.width=i+"px")),k.onerror=this.imageOnErrorHandler.trcBind(this,k,c,protocol),k.onload=function(a){a.complete?this.FixVideoImage(i,h,a):TRC.Timeout.set(arguments.callee.trcBind(this,a),1e3)}.trcBind(this,k),7===TRC.Browser.ie&&(a.image_div=document.createElement("div"))}if(c.isSyndicated){var o=document.createElement("span");if(o.className="branding",c["branding-text"])o.appendChild(document.createTextNode(this.formatData("syndicator",c["branding-text"])));else if(c["branding-url"]){var p=document.createElement("img");p.src=c["branding-url"],o.appendChild(p)}j.style.position="relative",j.appendChild(o);var q=document.createElement("span"),r=this.trc.getProperty(this.mode_name,"syndicated-static-text",this.propertiesOverride),s=this.trc.getProperty(this.mode_name,"syndicated-static-text-position",this.propertiesOverride);q.className="static-text "+s,r&&q.appendChild(document.createTextNode(r)),j.appendChild(q)}if(a.thumb=j,a.img=k,a.img_src=this.getThumbnailURL(c,i,h),f){var t=document.createElement("div");t.className="video-duration video-duration-detail",t.style.left=0,"undefined"!=typeof i&&(TRC.Browser.ieUpto(6)?(t.style.marginLeft=i/2-3+"px",t.style.top=h/2-15+"px"):7===TRC.Browser.ie?(t.style.left=i-3+"px",t.style.top=h-15+"px"):(t.style.marginLeft=i-3+"px",t.style.top=h-15+"px")),t.appendChild(f);var u=this.genDuration(c.duration);u.style.opacity=1,u.style.filter="alpha(opacity=100)",u.style.backgroundColor="transparent",t.appendChild(u),j.appendChild(t)}switch(g.appendChild(j),e){case"bottom":j.style.cssFloat="none",j.style.styleFloat="none",j.style.display="block",j.style.width=i+"px";break;case"top":case"under":j.style.cssFloat="none",j.style.styleFloat="none",j.style.display="block",j.style.width=i+"px";break;case"end":j.style.cssFloat="right",j.style.styleFloat="right"}return g},TRCRBox.prototype.imageOnErrorHandler=function(a,b,c){var d=a.src,e=d.search(/\Shttp\S/),f=b["item-id"];d=e>5&&this.isTaboolaCDNImage(d)?this.getFallbackImageForTaboolaCDNImage(d,f,c):this.getFallbackImageForNonTaboolaCDNImage(a,f,c),a.src=d},TRCRBox.prototype.isUsingImageOptimizationService=function(a){var b=this.trc.global["images-host"]?this.trc.global["images-host"]:"images.taboola.com";return a.indexOf(b)>-1},TRCRBox.prototype.isTaboolaCDNImage=function(a){return a.match(/cdn.taboola.com\/.*thumbnails\S/)},TRCRBox.prototype.getFallbackImageForTaboolaCDNImage=function(a,b,c){var d=this.isUsingImageOptimizationService(a),e=a.search(/\Shttp\S/),f=unescape(a.slice(e+1)),g=TRC.URL.prototype.switchProtocol.call(d?unescape(f):f,c);return __trcWarn("Failed to load taboola CDN thumbnail "+a+" for item="+b+", loading direct thumbnail instead : "+g),g},TRCRBox.prototype.getFallbackImageForNonTaboolaCDNImage=function(a,b,c){var d=a.src,e=this.isUsingImageOptimizationService(d),f=d.search(/\Shttp\S/),g=e&&unescape(a.src.slice(f+1)),h="https:"!==c||g&&0===g.indexOf(c)||this.trc.global["always-allow-orig-image-fallback"];return f>5&&e&&h?this.getOrigImageFromOptimizationUrl(a.src,g,b):this.getDefaultThumbnail(a,b,c)},TRCRBox.prototype.getOrigImageFromOptimizationUrl=function(a,b,c){return __trcWarn("Failed to load thumbnail "+a+" for item="+c+", loading "+b+" thumbnail instead"),b},TRCRBox.prototype.getDefaultThumbnail=function(a,b,c){var d=this.trc.getProperty(this.mode_name,"default-thumbnail",this.propertiesOverride),e=TRC.URL.prototype.switchProtocol.call("undefined"!=d?d:"",c);return a.onerror=null,__trcWarn("Failed to load thumbnail "+a.src+" for item="+b+", loading default thumbnail instead"),e},TRCRBox.prototype.drawVideoBox=function(a,b,c,d){var e="";a=__trcCopyProps(a,{}),a.isSyndicated=a["is-syndicated"]||a["is-in-network"]||a["is-native"],a.isPhoto="photo"===a.type,a.isText="text"===a.type,a.imageIframe=a.hasOwnProperty("image-iframe")&&a["image-iframe"],this.setApiItemsData(a),a.tags="string"==typeof a.tags?TRC.text.parseCSV(a.tags):[];var f=document.createElement("div");f.rbox=this;var g=f.thumbnail_position=d||this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride);f.video_data=a,f.setAttribute("data-item-id",a["item-id"]),f.setAttribute("data-item-title",a.title),f.setAttribute("data-item-thumb",this.getThumbnailURL(a,100,80)),f.setAttribute("data-item-syndicated",!!a.isSyndicated),this.setVideoBoxClassName(f),this.autoSize&&this.setAutoDimantions(f);var h=a.url;if(0==h.search(/\w{3,4}:\/\/(\w+)\.taboola(syndication)?.com/))for(var i=h.split(/[\?&]/),j=0;j<i.length;j++)if("url"==i[j].split("=")[0]){h=decodeURIComponent(i[j].split("=")[1]);break}if(!a.isSyndicated){if(a.original_url=h,h=this.trc.getFunction(this.mode_name,"change-url",this.propertiesOverride,h,f,this.tracking),h==a.original_url&&this.tracking){var k=h.split("#");h=k[0]+(k[0].search("\\?")>=0?"&":"?")+this.tracking+(k[1]?"#"+k[1]:"")}"function"==typeof TRC.pageManager&&(h=TRC.pageManager.fixRecommendationURL(h))}a.url=h,a.scParams=this.createVideoBoxClickUrlParams(a,h),a.logger_url=this.createVideoBoxClickUrlWithParams(a.scParams),e+=a.title;var l=this.createVideoLink(a,e);TRC.dom.addClass(l,"item-label-href"),a.link=l;var m=document.createElement("span");if(m.style.display="block",m.className="video-label-box",l.appendChild(m),f.labelsBox=m,f.appendChild(l),"none"!=g){var n=this.drawThumbnailLink(f,b,a,e,g);if("under"==g){var o=this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride);n.title=l.title="",f.insertBefore(n,l),f.style.position="relative",f.style.height=o+"px";var p=document.createElement("span");p.className="label-box-overlay",l.className+="video-labels-anchor",e=this.findElement(function(a){return a.className.search("title")>=0},f.labelsBox,"span",null),TRC.Browser.ieUpto(8)&&!TRC.Browser.ieUpto(7)&&(l.className+=" ie8fix"),f.labelsBox.appendChild(p),a.thumbUnder=!0}else"bottom"==g?f.appendChild(n):f.insertBefore(n,l)}var q=c||this.trc.getProperty(this.mode_name,"detail-order"+(a.isSyndicated?"-syndicated":""),this.propertiesOverride);q=q.split(","),this.buildLabelBox(m,a,q),f.fixTextOverflow=this.fixBoxTitleAndDesc.trcBind(this,a,m),TRC.Browser.ieUpto(6)&&(f.onmouseover=function(){this.className+=" videoCube_hover"},f.onmouseout=function(){this.className=this.className.replace(/\b\s+videoCube_hover\b/g,"")}),a[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE]&&a[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE].length>0&&TRC.TrackingScriptLoader.renderScriptTagIntoVideoBox(f,a);try{this.trc.getFunction(this.mode_name,"item-renderer",this.propertiesOverride,f,f.video_data)}catch(r){__trcError("Error in itemRenderer",r)}return f},TRCRBox.prototype.shouldAddRowsClearingDivs=function(){var a="autowidget-template-static"===this.widgetCreatorLayout;return this.autoSize&&a&&!this.trc.global["disable-autosize-clearing-div"]},TRCRBox.prototype.isBeginningOfNewRow=function(a,b){var c=a%(b/this.rows)===0;return 0!==a&&c},TRCRBox.prototype.addAutoSizeRowClearingDiv=function(a){var b=document.createElement("div");b.style.clear="both",b.style.width="100%",a.parentNode.insertBefore(b,a)},TRCRBox.prototype.setAutoDimantions=function(a){if(this.AutoSizeRule){var b=this.AutoSizeRule.Ws+"px";this.rows>1&&(a.style.marginBottom=b),this.boxes.length%this.AutoSizeRule.n==0&&(b=0),"rtl"==this.trc.direction?a.style.marginRight=b:a.style.marginLeft=b,a.style.width=this.AutoSizeRule.Wi+"px";var c=this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride),d=this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),e=c/d;this.trc.modes[this.mode_name]["thumbnail-width"]=this.AutoSizeRule.Wi,this.trc.modes[this.mode_name]["thumbnail-height"]=Math.round(this.AutoSizeRule.Wi*e)}},TRCRBox.prototype.getRuleAspectRatio=function(a,b){return a.virtualThumbWidth&&a.virtualThumbHeight&&!isNaN(a.virtualThumbWidth)&&!isNaN(a.virtualThumbHeight)?"ratio"==b?a.virtualThumbHeight/a.virtualThumbWidth:a.virtualThumbHeight/a.virtualThumbWidth*100:!1},TRCRBox.prototype.getThumbAspectRatio=function(a,b){try{var c=a["thumbnail-height"]/a["thumbnail-width"];return"ratio"==b?c:Math.round(100*c)}catch(d){return __trcWarn("getThumbAspectRatio",d.message),null}},TRCRBox.prototype.getThumbnailURL=function(a,b,c){if("undefined"==typeof a["thumb-size"])return a.thumbnail;for(var d=[{w:a["thumb-size"].split("x")[0],h:a["thumb-size"].split("x")[1],u:a.thumbnail}],e=1;"undefined"!=typeof a["thumb-size-"+e];e++)d.push({w:a["thumb-size-"+e].split("x")[0],h:a["thumb-size-"+e].split("x")[1],u:a["thumbnail-"+e]});d=d.sort(function(a,b){return a.w*a.h-b.w*b.h});for(var f=0;f<d.length;f++)if(b*c<=d[f].w*d[f].h)return d[f].u;return d.pop().u},TRCRBox.prototype.addTaboolaLogoNoDisclosure=function(){var a,b=this.trc.attribution,c=this.trc.getProperty(this.mode_name,"attribution-text",this.propertiesOverride),d=TRC.URL.prototype.switchProtocol.call(this.trc.getProperty(this.mode_name,"logo-image",this.propertiesOverride),protocol),e=this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride),f=["template=colorbox","utm_source="+this.publisher,"utm_medium=referral","utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")],g="//www.taboola.com/popup?"+f.join("&");if(0!=b&&"none"!==e){var h=document.createElement("div");h.className="logoDiv",h.innerHTML="&nbsp;","rtl"==this.trc["attribution-disclosure-direction"]?(h.style.cssFloat="left",h.style.styleFloat="left"):(h.style.cssFloat="right",h.style.styleFloat="right");var i=document.createElement("a");i.href=g,i.rel="nofollow",i.target="_blank",h.appendChild(i),"top"==e?"object"==typeof this.header&&this.header.ext.appendChild(h):this.element.appendChild(h);var j=document.createElement("div"),k="clear:both; _height:1px; _overflow:hidden;";if("string"==typeof j.style.cssText?j.style.cssText=k:j.setAttribute("style",k),this.element.appendChild(j),"string"!=typeof d||null!=c&&""!=c&&"null"!=c)i.innerHTML+=c,a=i.cloneNode(!0),i.className+=" trc_desktop_attribution_link",a.className+=" trc_mobile_attribution_link",h.appendChild(a),i.onclick=function(a){return TRC.aboutUs.open(a||event)||!1};else if(TRC.Browser.ieUpto(6)){var l=document.createElement("span");l.style.width="45px",l.style.height="11px",l.backgroundImage="none",l.style.display="block",l.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'")',i.appendChild(l)}else{var m=document.createElement("img");m.src=d,m.style.border="0",i.appendChild(m)}}},TRCRBox.prototype.addTaboolaLogo=function(){this.renderAdchoicesLink(this.getAdchoiceConfig(),this.itemsTypes,this.adcItemTypes),this.renderAttributionLink(),this.renderDisclosureLink(),this.addClearingDiv(),this.addWidgetContentType()},TRCRBox.prototype.renderAttributionLink=function(){var a="<span>"+this.trc.getProperty(this.mode_name,"attribution-text",this.propertiesOverride)+"</span>",b=this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride),c=this.trc.attribution&&"none"!=b,d=this.trc.getProperty(this.mode_name,"hide-attribution-when-no-place",this.propertiesOverride),e=this.trc["attribution-disclosure-direction"];c&&("top"===b?this.isContainerNarrowForAttribution()?d||this.generateLinksBox(this.getWidgetFooter(),a,e,"attribution",null,"bottom"):this.generateLinksBox(this.header.ext,a,e,"attribution",null,"top"):this.generateLinksBox(this.getWidgetFooter(),a,e,"attribution",null,"bottom"))},TRCRBox.prototype.isContainerNarrowForAttribution=function(){var a=this.trc.getProperty(this.mode_name,"min-width-for-attribution",this.propertiesOverride),b=this.container.clientWidth||this.container.offsetWidth;return b&&a>b},TRCRBox.prototype.adcHoverHandler=function(a,b){var c=__trcGetElementsByClass("trc_adc_b_logo",null,a)[0];b?c.style.display="inline-block":c.style.display="none"},TRCRBox.prototype.isAdchoicesEnabled=function(a,b,c){return a?"off"==a.status?!1:this.isAdchoiceItemTypes(b,c)?!0:!1:!1},TRCRBox.prototype.isAdchoiceItemTypes=function(a,b){for(var c in a)if(b[c])return!0;return!1},TRCRBox.prototype.getAdchoiceConfig=function(){var a=this.trc.getProperty(this.mode_name,"adchoice-position",this.propertiesOverride);return{status:this.trc.global["has-adchoice"]&&"none"!==a?"on":"off",position:a,url:this.trc.getProperty(this.mode_name,"adchoice-target-url",this.propertiesOverride)||this.trc.global["adchoice-url"],enableBig:this.trc.getProperty(this.mode_name,"adchoice-large",this.propertiesOverride)}},TRCRBox.prototype.getAdchoicesPosition=function(a,b){var c="top";return"auto"===a?(c="none"===b?c:b,this.isContainerNarrowForAttribution()&&(c="bottom")):c=a,c},TRCRBox.prototype.renderAdchoicesLink=function(a,b,c){if(this.hasAdChoicesLogo=this.isAdchoicesEnabled(a,b,c),this.hasAdChoicesLogo){var d,e='<span class="trc_adc_wrapper"><span class="trc_adc_s_logo"></span>'+(a.enableBig?'<span class="trc_adc_b_logo"></span>':"")+"&nbsp;</span>",f=this.getAdchoicesPosition(a.position,this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride)),g=a.url||null,h=this.trc["attribution-disclosure-direction"];d="top"===f?this.generateLinksBox(this.header.ext,e,h,"adc",null,"top",g):this.generateLinksBox(this.getWidgetFooter(),e,h,"adc",null,f,g),a.enableBig&&(d.onmouseover=function(){TRCRBox.prototype.adcHoverHandler(this,!0)},d.onmouseout=function(){TRCRBox.prototype.adcHoverHandler(this,!1)})}},TRCRBox.prototype.generateLinksBox=function(a,b,c,d,e,f,g){var h,i,j=document.createElement("div"),k=["trc_desktop_"+d+"_link","trc_mobile_"+d+"_link"],l=this.getPopupUrl(),m=TRC.PROTOCOL+"//"+l+"/?"+this.getAttributionLinkParams(),n=g||m,o=function(a){return TRC.aboutUs.open(a)||!1};if(a){for(h=0;h<k.length;h++)i=document.createElement("a"),i.className=k[h]+" trc_attribution_position_"+(f||"bottom"),i.rel="nofollow",i.innerHTML=b,i.href=n,i.target="_blank",this.hasAdChoicesLogo&&(i.innerHTML+='<span class="trc_logos_v_align">&nbsp;</span>'),h||(i.onclick=o),j.appendChild(i);return"rtl"===c&&(j.style.cssFloat=j.style.styleFloat="left"),j.className="logoDiv link-"+d+" "+(e?" attribution-disclosure-link-"+e:""),a.appendChild(j),j}},TRCRBox.prototype.getAttributionLinkParams=function(){var a=["template=colorbox","utm_source="+this.publisher,"utm_medium=referral","utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")];return!this.trc.global["show-rtb-ad-choices-icon"]&&this.privacyId&&a.push("plink="+this.privacyId),a.join("&")},TRCRBox.prototype.addWidgetContentType=function(){var a=this.getWidgetContentType(this.itemsTypes);this.element.className+=" "+("sponsored"===a&&TRC.blocker.blockedState>0&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"]["trc-content-sponsored"]:"trc-content-"+a)+" "},TRCRBox.prototype.getWidgetContentType=function(a){var b=a["is-syndicated"]||a["is-in-network"]||a["is-native"];return b&&a["is-organic"]?"hybrid":b?"sponsored":"organic"},TRCRBox.prototype.getItemsTypesList=function(a){for(var b,c={},d=0;b=a[d];d++)b["is-syndicated"]?c["is-syndicated"]=!0:b["is-in-network"]?c["is-in-network"]=!0:b["is-native"]?c["is-native"]=!0:c["is-organic"]=!0,b["is-adc"]&&(c["is-adc"]=!0);return c},TRCRBox.prototype.getPrivacyId=function(a){for(var b,c=0;b=a[c];c++)if(b.plink)return b.plink;return null},TRCRBox.prototype.getWidgetFooter=function(){var a=this.getWidgetToFeedHelper();return this.footer||(this.footer=document.createElement("div"),this.footer.className="trc-widget-footer",a&&!a.getFooter()?a.addFooterToFeed(this.footer):this.element.appendChild(this.footer)),this.footer},TRCRBox.prototype.renderDisclosureLink=function(){var a,b=this.trc.getProperty(this.mode_name,"min-width-for-disclosure",this.propertiesOverride),c=this.trc.getProperty(this.mode_name,"hide-disclosure-when-no-place",this.propertiesOverride),d="<span>"+this.trc.getProperty(this.mode_name,"disclosure-link-text-sponsored",this.propertiesOverride)+"</span>",e="<span>"+this.trc.getProperty(this.mode_name,"disclosure-link-text-hybrid",this.propertiesOverride)+"</span>",f=this.trc.getProperty(this.mode_name,"disclosure-position",this.propertiesOverride),g=this.trc["attribution-disclosure-direction"];"none"!=f&&(a=this.container.clientWidth||this.container.offsetWidth,"bottom"!=f&&this.isHeaderExtContainerAvailable()&&(!a||a>=b)?(this.generateLinksBox(this.header.ext,d,g,"disclosure","sponsored","top"),this.generateLinksBox(this.header.ext,e,g,"disclosure","hybrid","top")):c||(this.generateLinksBox(this.getWidgetFooter(),d,g,"disclosure","sponsored","bottom"),this.generateLinksBox(this.getWidgetFooter(),e,g,"disclosure","hybrid","bottom")))},TRCRBox.prototype.isHeaderExtContainerAvailable=function(){return this.header.ext&&"No Header"!=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride)},TRCRBox.prototype.addClearingDiv=function(){this.element.appendChild(document.createElement("div")).className="trc_clearer"},TRCRBox.prototype.genDuration=function(a){var b=this.formatDuration(a),c=document.createElement("dt");c.style.position="absolute",c.style.overflow="hidden",c.style.height="auto",c.style.width="auto",c.style.zIndex=48,c.style.right=0;var d=document.createElement("div");return d.style.zIndex=50,d.style.paddingLeft="4px",d.style.paddingRight="4px",d.innerHTML=b,c.appendChild(d),c},TRCRBox.prototype.fixBoxTitleAndDesc=function(a,b,c){if(!c)return void this.postRenderQueue.pushBack("fixBoxTitleAndDesc",this.fixBoxTitleAndDesc.trcBind(this,a,b,!0));try{var d=this.trc.getProperty(this.mode_name,"details-inline-with-title",this.propertiesOverride),e=d?d.split(","):[],f=this.findElement(function(a){return a.className.search("title")>=0},b,"span",null);e&&e.length&&f&&"inline"==document.trcGetCurrentStyle(f,"display")&&(f.style.display="inline-block"),f.inlineDetailsElements=this.setupInlineDetails(e,b),this.fixBoxOverflow(f,a.title,!1,"false"!=a["truncate-title"],e,b),a.thumbUnder&&(a.link.style.fontSize=b.font+"px"),e&&e.length&&(f.style.display="inline"),this.fixBoxOverflow(this.findElement(function(a){return a.className.search("description")>=0},b,"span",null),a.description,!0,!0,null,null)}catch(g){__trcError("Problem in fixBoxTitleAndDesc",g)}},TRCRBox.prototype.fixBoxOverflow=function(a,b,c,d,e,f){var g=!1;if(!(null==a||this.useNativeLineClamp&&(g=this.setupBoxLineClamp(a)))){if(this.shouldUseSmartEllipsis()&&!g)return __trcDebug("Skipping fixBoxOverflow due to feature flag.");if(TRC.ellipsisPerf&&console.timeStamp("Taboola old ellipsis"),!(a.clientHeight<=0||a.clientWidth<=0)){"undefined"==typeof d&&(d=!0);var h=!1;a.parentNode.font=this.getFontSize(a);var i=a.innerHTML;a.innerHTML="";var j=this.add_span(null,"H",a),k=Math.max(j.offsetHeight,j.clientHeight),l=Math.max(0,a.scrollHeight-a.clientHeight);for(a.removeChild(j),a.innerHTML=i,this.addInlineElementsForMeasure(a.inlineDetailsElements,a,!0),a.inlineDetailsElementsHTML=a.innerHTML.replace(i,""),b=b.replace(/^\s+|\s+$/g,"");a.clientHeight+l+k/2<a.scrollHeight&&b.length;)if(h=!0,d)b=this.truncateOverflowingText(a,b,c),a.innerHTML+=a.inlineDetailsElementsHTML;else{var m=this.decreaseOverflowingTextFontSize(a);if(!m)break}this.hideClonedElementsAfterMeasure(e,f),TRC.Browser.ie&&!h&&(a.style.height="auto")}}},TRCRBox.prototype.setupBoxLineClamp=function(a){TRC.dom.removeClass(a,"trc_ellipsis");var b=parseInt(document.trcGetCurrentStyle(a,"line-height"),10),c=parseInt(document.trcGetCurrentStyle(a,"height"),10),d=b&&c?Math.round(c/b).toString():null;return!d||a.isRTL||"rtl"==document.trcGetCurrentStyle(a,"direction")?!1:(TRC.dom.addClass(a,"trc_ellipsis"),TRC.css.utils.setStyleProperty(a,"-webkit-line-clamp",d,!1),a.parentNode.font=this.getFontSize(a),!0)},TRCRBox.prototype.setupInlineDetails=function(a,b){for(var c=this.findElements(a,b),d=!1,e=0;a&&e<a.length;e++)"branding"==a[e]&&(d=!0);if(a.length&&!d){var f=this.findElement(function(a){return a.className.search("branding")>=0},b,"span",null);f&&(f.style.display="block")}for(var g=0;c&&g<c.length;g++){var h=c[g];h.style.display="inline-block",h.style.verticalAlign=TRC.Browser.ieUpto(7)?"baseline":"middle"}return c},TRCRBox.prototype.truncateOverflowingText=function(a,b,c){b=c&&b.search(/\s/)>=0?b.replace(/\s+\S+$/,""):b.substr(0,b.length-1);var d=a.getElementsByTagName("bde");return a.inlineDetailsElementsHTML&&d.length&&(a.innerHTML=a.innerHTML.replace(a.inlineDetailsElementsHTML,"")),a.getElementsByTagName("span").length>0&&a.removeChild(a.getElementsByTagName("span")[0]),(d.length>0?d[0]:a).innerHTML=b,this.add_span(null,"&hellip;",a),b},TRCRBox.prototype.decreaseOverflowingTextFontSize=function(a){var b=this.getFontSize(a);if(parseInt(b)<=9)return!1;b=parseInt(b)-1;var c="font-size: "+b+"px!important; line-height: "+1.25*b+"px!important;";return"string"==typeof a.style.cssText?a.style.cssText=c:a.setAttribute("style",c),!0},TRCRBox.prototype.addInlineElementsForMeasure=function(a,b,c){for(var d,e,f,g=0;a&&g<a.length;g++)d=a[g],e=this.findElement(function(a){return a.className.search(d)>=0&&a.parentNode===b},b),!e&&d&&(f=document.createElement("span"),f.className="trc_inline_detail_spacer",f.innerHTML=TRC.Browser.ieUpto(8)?"&nbsp;":" ",b.appendChild(f),b.appendChild(c?d.cloneNode(!0):d))},TRCRBox.prototype.hideClonedElementsAfterMeasure=function(a,b){for(var c,d,e=0;a&&e<a.length;e++)c=a[e],d=this.findElement(function(a){return a.className.search(c)>=0&&a.parentNode===b},b,"span"),d&&(d.style.display="none")},TRCRBox.prototype.removeTagsEntities=function(a){var b=new RegExp("<[^>]*>$");return b.test(a)||(b=new RegExp("&w+;$"),b.test(a))?a.replace(b,""):a},TRCRBox.prototype.removeHtmlTags=function(a){return a.replace(new RegExp("<[^>]+>","g"),"")},TRCRBox.prototype.formatData=function(a,b){var c=this.trc.getProperty(this.mode_name,"format-"+a,this.propertiesOverride);return c=c||"%s","function"==typeof c?c.call(this,b):((a.search("duration")>=0||a.search("Duration")>=0)&&(b=this.formatDuration(b)),"undefined"==typeof b&&(b=""),c.replace(new RegExp("%\\w"),'<dt style="display:inline">'+b+"</dt>"))},TRCRBox.prototype.formatDuration=function(a){var b=parseInt(a/3600);b>=1?a%=3600:b=0;var c=parseInt(a/60),d=parseInt(a%60);return"number"!=typeof b||"number"!=typeof c||"number"!=typeof d||isNaN(b)||isNaN(c)||isNaN(d)||1>a?"":(b>=1?b+":":"")+(10>c?"0":"")+c+":"+(10>d?"0":"")+d},TRCRBox.prototype.formatNumber=function(a){return"undefined"==typeof a?"":this.trc.getFunction(this.mode_name,"format-number",this.propertiesOverride,a)},TRCRBox.prototype.dateFormatISO=function(a){var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return 10>e&&(e="0"+e),10>d&&(d="0"+d),c+"-"+d+"-"+e},TRCRBox.prototype.dateFormatAmerican=function(a){var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return d+"/"+e+"/"+c},TRCRBox.prototype.dateFormatEuropean=function(a){var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return e+"/"+d+"/"+c},TRCRBox.prototype.dateFormatDays=function(a){var b=new Date,c=" months ago",d=b.getFullYear(),e=b.getMonth(),f=new Date;("undefined"!=typeof a||0!=parseInt(a))&&(f=new Date(1e3*parseInt(a)));var g=f.getFullYear(),h=f.getMonth(),i=12*d+e-(12*g+h);if(0==i){var j=b.getDate(),k=f.getDate();i=j-k,c=1>=i?" day ago":" days ago"}else 1==i&&(c=" month ago");return i+c},TRCRBox.prototype.ratingStars=function(a,b){if(b>5&&(b=Math.floor(b/2)),"undefined"==typeof a)return"";for(var c=document.createElement("span"),d=0;b>d;d++){var e=document.createElement("img");e.style.width="16px",e.style.height="16px",e.style.display="inline";var f=protocol+"//cdn.taboola.com/taboola/star-on.png",g=protocol+"//cdn.taboola.com/taboola/star-off.png";d<parseInt(a)?e.src=f:e.src=g,c.appendChild(e)}return c},TRCRBox.prototype.getFontSize=function(a){for(var b=0,c=!1,d=document.trcGetCurrentStyle(a,"font-size"),e=["px","pt","em","ch"];!c&&b<e.length;){if(d.indexOf(e[b])){switch(d=parseInt(d),e[b]){case"px":break;case"pt":d/=.75;break;case"em":case"ch":d=10*d}c=!0}b++}return d},TRCRBox.prototype.sendExploreEvent=function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},null,!0)},TRCRBox.prototype.onMouseOverExploreTrackerHandler=function(a,b){b=b||win.event;var c=b.target||b.srcElement;c!=this.container&&null!=this.exploreTimeoutId||c==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(this.sendExploreEvent.trcBind(this),a))},TRCRBox.prototype.setExploreTracker=function(){var a=0;this.exploreTimeoutId=null,"undefined"!=typeof this.trc.global&&(a=this.trc.global["explore-delay"]?this.trc.global["explore-delay"]:a),this.container.onmouseover=this.onMouseOverExploreTrackerHandler.trcBind(this,a),0!=a&&(this.container.onmouseout=this.onMouseOutExploreTrackerHandler.trcBind(this))},TRCRBox.prototype.onMouseOutExploreTrackerHandler=function(a){a=a||win.event;var b=this.container.getBoundingClientRect();a.clientX>=b.left&&a.clientX<b.right&&a.clientY>=b.top&&a.clientY<b.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)},TRCRBox.prototype.resetBoxes=function(){this.boxes=[]},TRCRBox.prototype.setResponsiveRules=function(a,b){var c=this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride);c?this.setOnStandardResponsiveRules(a,b,c):this.setOnAutoSizeResponsiveRules(a,b,this.trc.getProperty(this.mode_name,"auto-size-rules",this.propertiesOverride))},TRCRBox.prototype.setOnStandardResponsiveRules=function(a,b,c){var d,e=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),f=1,g=this.trc.getProperty(this.mode_name,"carousel-min-items",this.propertiesOverride)||1.33;try{d=this.responsiveRules=[];for(var h=0,i=c.length;i>h;h++)d[h]={rows:c[h].rows||e||f,cells:c[h].cells,min:c[h].minWidth,max:c[h].maxWidth,margin:c[h].margin.h,ratio:this.getRuleAspectRatio(c[h])||this.getThumbAspectRatio(this.trc.modes[this.mode_name])||100*this.DEFAULT_THUMB_RATIO},this.isClassFilter&&this.pushResponsiveIERules(a+"_rule"+h,d[h].min);TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(a,this.responsiveRules,b,this.trc.cssReset,this.isWCTextLinks,this.trc.direction,this.isCarousel,g)),this.isClassFilter&&this.setResponsiveIEClassShift(a)}catch(j){__trcError("Error in setOnStandardResponsiveRules : ",j.message)}},TRCRBox.prototype.setOnAutoSizeResponsiveRules=function(a,b,c){var d,e=TRC.dom.getWindowWidth(),f=this.container.clientWidth>0?this.container.clientWidth:this.container.offsetWidth,g=e/f,h=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),i=1,j=this.trc.getProperty(this.mode_name,"carousel-min-items",this.propertiesOverride);try{d=this.responsiveRules=[];for(var k=0,l=c.length;l>k;k++)d[k]={rows:c[k].rows||h||i,cells:c[k].n,min:g*c[k].minWc,margin:Math.round((c[k].maxWsRange+c[k].minWsRange)/2)/f*100,ratio:this.getThumbAspectRatio(this.trc.modes[this.mode_name])||c[k].ratio||100*this.DEFAULT_THUMB_RATIO},this.isClassFilter&&this.pushResponsiveIERules(a+"_rule"+k,d[k].min);TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(a,this.responsiveRules,b,this.trc.cssReset,!1,this.trc.direction),this.isCarousel,j),this.isClassFilter&&this.setResponsiveIEClassShift(a)}catch(m){__trcError("Error in setOnAutoSizeResponsiveRules : ",m.message)}},TRCRBox.prototype.setResponsiveIEClassShift=function(a){var b=this.getResponsiveIEClassShift(a).trcBind(this);b(),TRC.dom.on(win,"resize",b.trcThrottle(50))},TRCRBox.prototype.getResponsiveIEClassShift=function(a){var b=a,c="IE_ClassShift",d=TRC.dom.getWindowWidth,e=d();return function(){var a,f,g="",h=-1,i=d();for(a in this.responsiveIERules)this.responsiveIERules.hasOwnProperty(a)&&(f=parseInt(a),f>h&&i>=f&&(g=this.responsiveIERules[a],h=f));b!==g&&(this.container.className=this.container.className.replace(b,g),b=g),Math.abs(e-i)>1&&(TRC.dispatch(c),e=i)}},TRCRBox.prototype.pushResponsiveIERules=function(a,b){TRC.util.isType(this.responsiveIERules,"Array")||(this.responsiveIERules={},this.pushResponsiveIERules=function(a,b){this.responsiveIERules[b]=a},this.pushResponsiveIERules(a,b))},TRCRBox.prototype.setMetaAttribute=function(a){a.meta={},__trcCopyProps(this.trc,a.meta),delete a.meta["video-list"]},TRCRBox.prototype.drawResponsiveList=function(a){TRC.tlf&&console.timeStamp("start mode - "+this.mode_name),TRC.tlf&&console.group("mode - "+this.mode_name),TRC.tlf&&console.time("mode rendering");var b=this.listContainer,c=document.createElement("div"),d=this.recommendationList.length,e=0,f=1e3,g=doc.trcGetParentByClassName(this.getContainer(),"trc_related_container"),h="trc_elastic";TRC.pConsole(this.mode_name,"debug","start drawing responsive mode - see info",this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride),"object"),this.internalContainer=c,this.isClassFilter=TRC.Browser.ieUpto(8),this.orientation=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride),TRC.dom.addClass(g,h+" "+h+"_"+this.id),this.resetBoxes(),c.id="internal_"+this.id,TRC.dom.clearInnerElements(b),b.appendChild(c),this.setExploreTracker(),this.setMetaAttribute(c),this.firstVideo=null,this.setResponsiveRules(h+"_"+this.id,d),this.pasreRecommendationList(d,this.hasDuration(),c),this.trc.global["smart-ellipsis"]||(this.isClassFilter?TRC.listen("IE_ClassShift",this.fixResponsiveVideoBoxes.trcBind(this)):(TRC.dom.on(win,"resize",this.fixResponsiveVideoBoxes.trcBind(this).trcThrottle(500)),TRC.listen("videoCubeChange",this.fixResponsiveVideoBoxes.trcBind(this)))),TRC.dom.addClass(this.boxes[0],"trc-first-recommendation trc-spotlight-first-recommendation"),"embed"===this.link_target&&this.postRenderQueue.pushBack("createEmbedThumb",this.createEmbedThumb.trcBind(this)),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(a){this.trc.getFunction(this.mode_name,"list-suffix",this.propertiesOverride,a,this),this.trc["publisher-end"](this.id)}.trcBind(this,c)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.trc.global["thumb-lazy-load-switch"]&&this.setLazyImageLoadMethod(),this.visibleTimeoutId=null,"undefined"!=typeof this.trc.global&&(e=this.trc.global["visible-delay"]?this.trc.global["visible-delay"]:e,f=this.trc.global["visible-cycle"]?this.trc.global["visible-cycle"]:f),this.setVisibility(this.manualVisibility,this.trc.global["enable-deferred-visible"],this.trc.global["visible-defer-timeout"],e,f,c),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container,placement:this.orig_placement}),TRC.EventsAPI.dispatchRender(a,this),TRC.tlf&&console.timeEnd("mode rendering"),TRC.tlf&&console.groupEnd()},TRCRBox.prototype.setVisibility=function(a,b,c,d,e,f){return this.trc.unifiedVisibility?void this.registerVisibility(d,e):void(a?TRC.listen("visible::"+this.orig_placement,this.getEventVisibility.trcBind(this,f)):b?TRC.Timeout.set(this.enableVisibility.trcBind(this,d,e,f),c||"0"):this.enableVisibility(d,e,f))},TRCRBox.prototype.getRecomDirectURL=function(a){if(0==a.search(/\w{3,4}:\/\/(\w+)\.taboola(syndication)?.com/))for(var b=a.split(/[\?&]/),c=0,d=b.length;d>c;c++)if("url"==b[c].split("=")[0])return decodeURIComponent(b[c].split("=")[1]);
return a},TRCRBox.prototype.getURLHashParts=function(a){return a[0]+(a[0].search("\\?")>=0?"&":"?")+this.tracking+(a[1]?"#"+a[1]:"")},TRCRBox.prototype.createVideoBoxDirectURL=function(a){var b,c=a.video_data,d=c.url;try{d=this.getRecomDirectURL(d),c.isSyndicated||(c.original_url=d,d=this.trc.getFunction(this.mode_name,"change-url",this.propertiesOverride,d,a,this.tracking),d==c.original_url&&this.tracking&&(b=d.split("#"),d=this.getURLHashParts(b)),"function"==typeof TRC.pageManager&&(d=TRC.pageManager.fixRecommendationURL(d))),c.url=d,a.directURL=d}catch(e){__trcError("Error in createVideoBoxDirectURL",e)}},TRCRBox.prototype.createVideoBoxClickUrlParams=function(a,b){var c=this.response&&this.response.trc?this.response.trc["session-data"]:null,d={pi:this.trc.getItemId(),ri:this.response.trc.req,sd:this.trc.getSessionData(c),ui:TRC.pageManager.getValue("user-id"),it:a.type,ii:a["item-id"],pt:this.getItemType(),li:this.listContainer.id,sig:a.sig,url:b,vi:this.cachedViewId||TRC.pageManager.getPageData(),p:a.isSyndicated?a.publisher:"",r:Math.floor(100*Math.random())},e=this.formatedTRCRequest&&this.formatedTRCRequest.tmpl,f=this.response.trc["placement-group"];return e&&(d.tmpl=e),f&&(d.pg=f),d},TRCRBox.prototype.createVideoBoxClickUrlWithParams=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&a[c]&&(this.trc["normalize-log-param"](c,a[c]),b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c])));return protocol+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/click?"+b.join("&")},TRCRBox.prototype.createVideoBoxClickUrl=function(a,b){var c=this.createVideoBoxClickUrlParams(a,b);return this.createVideoBoxClickUrlWithParams(c)},TRCRBox.prototype.fixResponsiveBoxTitleAndDesc=function(a){var b=a.labelsBox,c=a.video_data,d=a.link,e=this.getDetailSpansFromLabelsBoxes("title",a),f=this.getDetailSpansFromLabelsBoxes("description",a),g=this.findElement(function(a){return a.className.search("label-box-overlay")>=0},b,"span",null),h=function(){c.thumbUnder&&b.font&&(d.style.fontSize=b.font+"px")};try{if(!this.trc.global["smart-ellipsis"])for(var i=0;i<e.length;i++)e[i].innerHTML=a.getAttribute("data-item-title");setTimeout(function(){for(var b=0;b<e.length;b++)this.fixBoxOverflow(e[b],a.getAttribute("data-item-title"),!1,"false"!=c["truncate-title"]);TRC.Browser.ieUpto(8)&&g&&(g.style.height="99%",g.style.height="100%"),h()}.trcBind(this),0),f.length&&setTimeout(function(){for(var a=0;a<f.length;a++)this.fixBoxOverflow(f[a],c.description,!0,!0)}.trcBind(this),0)}catch(j){__trcError("Problem in fixResponsiveBoxTitleAndDesc",j)}},TRCRBox.prototype.getDetailSpansFromLabelsBoxes=function(a,b){var c=b.querySelectorAll('.video-label-box [class*="'+a+'"]');return[].slice.call(c)},TRCRBox.prototype.createVideoBoxLabels=function(a){var b=document.createElement("span");return this.setVideoBoxLabelsClass(b),a.appendChild(b),b},TRCRBox.prototype.setVideoBoxLabelsClass=function(a){a.className="video-label-box"},TRCRBox.prototype.createThumbBlockHolder=function(a,b,c){var d=doc.createElement("div");d.className="thumbBlock_holder",b.appendChild(d),this.createVideoBoxThumbBlock(a,d,c),this.createVideoBoxAspect(d,a)},TRCRBox.prototype.createVideoBoxAspect=function(a,b){var c=document.createElement("div");c.className="videoCube_aspect",a.appendChild(c),b.thumbnail_aspect=c},TRCRBox.prototype.drawVideoBoxThumbnailLink=function(a,b,c,d){var e;return a.img_src=this.getThumbnailURL(c,this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride)),e=this.createVideoLink(c,d),TRC.dom.addClass(e,"item-thumbnail-href"),this.createThumbBlockHolder(a,e,b),e},TRCRBox.prototype.createVideoBoxThumbBlock=function(a,b,c){var d=document.createElement("span"),e="",f=a.video_data;c||"video"!=f.type||"undefined"==typeof f.duration||""==f.duration||"0"==f.duration||(e=this.genDuration(f.duration)),d.className="thumbBlock",f.imageIframe&&(this.drawImageIframe(d,f.imageIframe,a.link.logger_url),a.hasFloatingButton=!0),a.thumbBlock=d,""!=e&&this.createDurationBlock(d,e,f.duration),b.appendChild(d)},TRCRBox.prototype.setVideoBoxImageHandlers=function(a,b,c){a.onerror=this.responsiveImageOnErrorHandler.trcBind(this,a,b,c,protocol),a.onload=this.responsiveImageOnLoadHandler.trcBind(this,a,b,c)},TRCRBox.prototype.responsiveImageOnErrorHandler=function(a,b,c,d){var e=a.src,f=e.search(/\Shttp\S/),g=c["item-id"];return f>5&&this.isTaboolaCDNImage(e)&&!TRC.Browser.ie?(e=this.getFallbackImageForTaboolaCDNImage(e,g,d),void(b.img_src=a.src=e)):(e=this.getFallbackImageForNonTaboolaCDNImage(a,g,d),void(TRC.Browser.ieUpto(8)?(a.src=e,null==a.onerror&&TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,b,a,!0),500)):b.thumbBlock.style.backgroundImage="URL('"+e+"')"))},TRCRBox.prototype.responsiveImageOnLoadHandler=function(a,b,c){a&&a.complete?this.appendVideoBoxImage(b):TRC.Browser.ieUpto(8)?(this.appendVideoBoxImage(b),this.fixResponsiveVideoImage(b,a,!1),TRC.listen("IE_ClassShift",this.fixResponsiveVideoImage.trcBind(this,b,a).trcBind(this))):TRC.Timeout.set(arguments.callee.trcBind(this,b.thumbBlock,a),50)},TRCRBox.prototype.fixResponsiveVideoImage=function(a,b,c){var d;if(this.imageOptimizePrefixFlag)return b.style.visibility="visible",b.style.width="100%",void(b.style.height="100%");var e,f,g,h,i,j=7==TRC.Browser.ie?a.thumbBlock.getBoundingClientRect():null,k=a.thumbBlock,l=j?j.right-j.left:k.clientWidth,m=j?j.bottom-j.top:k.clientHeight,n=this.isCssImportant,o=TRC.css.utils;if(0==m||0==l||0==b.height)return void(c||TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,a,b,!0),500));try{e=l/m,f=this.getImageAspectRatio(b),e>f?(g=Math.floor(l/f),h=Math.floor((m-g)/2),o.setStyleProperty(b,"width",l+"px",n),0!=h&&(TRC.Browser.ieAtleast(8)?(b.style.position="relative",o.setStyleProperty(b,"top",h+"px",n)):o.setStyleProperty(b,"margin-top",h+"px",n))):(d=Math.floor(m*f),i=Math.floor((l-d)/2),o.setStyleProperty(b,"height",m+"px",n),0!=i&&(TRC.Browser.ieAtleast(8)?(b.style.position="relative","ltr"==this.trc.direction?o.setStyleProperty(b,"left",i+"px",n):o.setStyleProperty(b,"left",-1*i+"px",n)):"ltr"==this.trc.direction?o.setStyleProperty(b,"margin-left",i+"px",n):o.setStyleProperty(b,"margin-right",i+"px",n))),b.style.visibility="visible"}catch(p){alert(p.message),__trcError("Error in fixResponsiveVideoImage : ",p.message)}},TRCRBox.prototype.getImageAspectRatio=function(a){return a.trcRatio||(a.trcRatio=a.width/a.height),a.trcRatio},TRCRBox.prototype.createVideoBoxImageLoader=function(a){var b,c,d,e=TRC.Browser.ieUpto(8)?doc.createElement("img"):new Image,f=a.video_data,g=a.thumbBlock;this.trc.global["thumb-lazy-load-switch"]&&this.updateThumbnailStack(e),e.style.visibility="hidden",7===TRC.Browser.ie&&(a.image_div=document.createElement("div")),a.img=e,this.setVideoBoxImageHandlers(e,a,f),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,e,a,a.img_src,100,g,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(e,a,a.img_src,100,g,this.trc.global["thumb-lazy-load-switch"]),TRC.Browser.ieUpto(6)||(b=this.add_span("thumbnail-overlay",null,g)),c=this.trc.getProperty(this.mode_name,"emblem",this.propertiesOverride),null==c||"null"==c||TRC.Browser.ie&&!TRC.Browser.ieUpto(7)||(d=this.add_span("thumbnail-emblem",null,g),d.style.backgroundImage="url('"+c+"')"),f.isSyndicated&&this.addVideoBoxBranding(g,f)},TRCRBox.prototype.updateThumbnailStack=function(a){this.thumbnailImageStack=this.thumbnailImageStack||[],this.thumbnailImageStack.push(a)},TRCRBox.prototype.addVideoBoxBranding=function(a,b){var c=document.createElement("span"),d=document.createElement("span"),e=this.trc.getProperty(this.mode_name,"syndicated-static-text",this.propertiesOverride),f=this.trc.getProperty(this.mode_name,"syndicated-static-text-position",this.propertiesOverride);c.className="branding",b["branding-text"]?c.appendChild(document.createTextNode(this.formatData("syndicator",b["branding-text"]))):b["branding-url"]&&this.createBrandingImage(c,b["branding-url"]),a.appendChild(c),d.className="static-text "+f,e&&d.appendChild(document.createTextNode(e)),a.appendChild(d)},TRCRBox.prototype.createBrandingImage=function(a,b){var c=doc.createElement("img");c.src=b,a.appendChild(c)},TRCRBox.prototype.createDurationBlock=function(a,b,c){var d=document.createElement("div"),e=this.genDuration(c);d.className="video-duration video-duration-detail",d.appendChild(b),e.style.opacity=1,e.style.filter="alpha(opacity=100)",e.style.backgroundColor="transparent",d.appendChild(e),a.appendChild(d)},TRCRBox.prototype.createVideoBoxLabelOverlay=function(a){var b=document.createElement("span");b.className="label-box-overlay",a.appendChild(b)},TRCRBox.prototype.createVideoBoxThumbLink=function(a,b){try{var c=a.video_data,d=a.thumbnail_position,e=this.drawVideoBoxThumbnailLink(a,b,c,a.getAttribute("data-item-title"));"under"===d?(e.title=a.link.title="",a.insertBefore(e,a.link),TRC.dom.addClass(a.link,"video-labels-anchor"),this.findElement(function(a){return a.className.search("title")>=0},a.labelsBox,"span",null),8==TRC.Browser.ie&&TRC.dom.addClass(a.link,"ie8fix"),this.createVideoBoxLabelOverlay(a.labelsBox),c.thumbUnder=!0):"bottom"===d?a.appendChild(e):a.insertBefore(e,a.link)}catch(f){__trcError("Error in createVideoBoxThumbLink",f)}},TRCRBox.prototype.setVideoBoxDataAttr=function(a,b){a.setAttribute("data-item-id",b["item-id"]),a.setAttribute("data-item-title",b.title),a.setAttribute("data-item-thumb",this.getThumbnailURL(b,100,80)),a.setAttribute("data-item-syndicated",!!b.isSyndicated)},TRCRBox.prototype.getThumbnailPosition=function(a,b){return b||this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride)},TRCRBox.prototype.drawResponsiveVideoBox=function(a,b,c,d,e,f){var g=document.createElement("div");try{return b=__trcCopyProps(b,{},{isSyndicated:b["is-syndicated"]||b["is-in-network"]||b["is-native"],isPhoto:"photo"===b.type,isText:"text"===b.type,imageIframe:b.hasOwnProperty("image-iframe")&&b["image-iframe"],tags:"string"==typeof b.tags?TRC.text.parseCSV(b.tags):[]}),this.setApiItemsData(b),this.createResponsiveVideoBox(g,b,e,f),"none"!==g.thumbnail_position&&this.createVideoBoxThumbLink(g,c),this.createResponsiveLabelsBoxes(g),TRC.Browser.ieUpto(6)&&this.setOmouseEffects_IE6(g),b[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE]&&b[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE].length>0&&TRC.TrackingScriptLoader.renderScriptTagIntoVideoBox(g,b),this.trc.getFunction(this.mode_name,"item-renderer",this.propertiesOverride,g,g.video_data),a.appendChild(g),this.fixResponsiveBoxTitleAndDesc(g),this.boxes.push(g),b.imageIframe||this.createVideoBoxImageLoader(g),g}catch(h){__trcError("Error in drawResponsiveVideoBox",h)}return null},TRCRBox.prototype.createResponsiveLabelsBoxes=function(a){this.buildLabelBox(a.preLabelsBox,a.video_data,a.pre_detail_order),this.buildLabelBox(a.labelsBox,a.video_data,a.detail_order)},TRCRBox.prototype.createResponsiveVideoBox=function(a,b,c,d){a.rbox=this,a.video_data=b,a.thumbnail_position=this.getThumbnailPosition(b,d?d:null),this.setVideoBoxDataAttr(a,b),this.setVideoBoxClassName(a),this.createVideoBoxDirectURL(a),b.logger_url=this.createVideoBoxClickUrl(a.video_data,a.directURL),a.setAttribute("data-item-title",b.title),this.setVideoBoxDetailsOrder(a,c?c:null),this.createDetailsLabelsContainers(a)},TRCRBox.prototype.createDetailsLabelsContainers=function(a){var b=0;a.pre_detail_order.length>0&&(this.createVideoBoxPreThumbnailLink(a),b++),a.detail_order.length>0&&(this.createVideoBoxAfterThumbnailLink(a),b++),b>1&&TRC.dom.addClass(a,"trc-split-label")},TRCRBox.prototype.setVideoBoxClassName=function(a){var b=0,c=this.isResponsive,d=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride),e=TRC.blocker.blockedState>0&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"].syndicatedItem:TRC.SYNDICATED_CLASS_NAME;this.setVideoBoxClassName=function(a){var f=a.video_data;a.className="videoCube trc_spotlight_item origin-"+f.origin+" thumbnail_"+a.thumbnail_position+(f.isSyndicated?" "+e:"")+(f["is-in-network"]?" inNetworkItem":"")+(f["is-native"]?" tabNativeItem":"")+(f.isPhoto?" photoItem":"")+(f.isText?" textItem":"")+" "+(c?"videoCube_"+(b+=1)+"_child":d)},this.setVideoBoxClassName(a)},TRCRBox.prototype.setVideoBoxDetailsOrder=function(a,b){var c=b||this.trc.getProperty(this.mode_name,"detail-order"+(a.video_data.isSyndicated?"-syndicated":""),this.propertiesOverride),d=this.trc.getProperty(this.mode_name,"before-detail-order"+(a.video_data.isSyndicated?"-syndicated":""),this.propertiesOverride);a.detail_order=c?c.split(","):[],a.pre_detail_order=d?d.split(","):[]},TRCRBox.prototype.setOmouseEffects_IE6=function(a){a.onmouseover=function(){TRC.dom.addClass(this," videoCube_hover")},a.onmouseout=function(){this.className=this.className.replace(/\b\s+videoCube_hover\b/g,"")}},TRCRBox.prototype.createVideoBoxAfterThumbnailLink=function(a){var b=a.video_data,c=a.getAttribute("data-item-title"),d=this.createVideoLink(b,c);a.labelsBox=this.createVideoBoxLabels(d),a.appendChild(d),a.link=d,TRC.dom.addClass(d,"item-label-href"),TRC.dom.addClass(a.labelsBox,"trc-main-label")},TRCRBox.prototype.createVideoBoxPreThumbnailLink=function(a){var b=a.video_data,c=a.getAttribute("data-item-title"),d=this.createVideoLink(b,c);a.preLabelsBox=this.createVideoBoxLabels(d),a.appendChild(d),a.preLink=d,TRC.dom.addClass(d,"item-label-href"),TRC.dom.addClass(a.preLabelsBox,"trc-pre-label"),TRC.dom.addClass(a,"item-has-pre-label")},TRCRBox.prototype.appendVideoBoxImage=function(a){try{(null!=a.img_src||this.trc.global["thumb-lazy-load-switch"])&&("undefined"==typeof a.image_div?TRC.Browser.ieUpto(8)?(a.thumbBlock.appendChild(a.img),a.img.style.visibility="visible"):a.thumbBlock.style.backgroundImage="URL('"+a.img_src+"')":(a.thumbBlock.appendChild(a.image_div),a.image_div.appendChild(a.img),a.img.style.visibility="visible"))}catch(b){__trcError("Pager thumbnail images fixing errors",b)}},TRCRBox.prototype.pasreRecommendationList=function(a,b,c){var d,e;this.stopBoxRendering=!1;for(var f=0;a>f;f++){TRC.tlf&&0==f&&console.time("item rendering"),d=this.recommendationList[f],d.itemIndex=f,null==this.firstVideo&&"video"==d.type&&(this.firstVideo=d);try{this.trc.getFunction(this.mode_name,"item-data-filter",this.propertiesOverride,d),this.fixHeight&&!this.stopBoxRendering?(e=this.drawResponsiveVideoBox(c,d,b,this.orientation),this.stopBoxRendering=this.hasMaxHeightExploitation(parseInt(document.trcGetCurrentStyle(this.container,"height"),10),this.fixHeight),this.stopBoxRendering&&this.safeRemoveItem(e)):this.fixHeight||this.drawResponsiveVideoBox(c,d,b,this.orientation,null,null)}catch(g){__trcError("Error in pasreRecommendationList",g)}TRC.tlf&&0==f&&console.timeEnd("item rendering")}},TRCRBox.prototype.safeRemoveItem=function(a){var b=a.parentNode;TRC.dom.clearInnerElements(a),b.removeChild(a)},TRCRBox.prototype.hasMaxHeightExploitation=function(a,b){return a>=b},TRCRBox.prototype.fixResponsiveVideoBoxes=function(){for(var a=this.boxes,b=0,c=a.length;c>b;b++)this.fixResponsiveBoxTitleAndDesc(a[b])},TRCRBox.prototype.fixWCTextLinksVideoBoxes=function(){for(var a=this.boxes,b=0,c=a.length;c>b;b++)a[b].labelsBox.firstChild.innerHTML=a[b].video_data.title,a[b].fixTextOverflow(!0)},TRCRBox.prototype.createSponsoredOverlay=function(a){var b=doc.createElement("span");b.className="trc_sponsored_overlay",a.appendChild(b)},TRCRBox.prototype.setSponsoredOverlayClass=function(a,b){b.className="thumbnail"==a?"trc_sponsored_overlay_base":"trc_sponsored_overlay_base round"},TRCRBox.prototype.genrateResponsiveSponsoredLabel=function(a,b){var c=this.trc.getProperty(this.mode_name,"sponsored-location",this.propertiesOverride);if(c.match(/^thumbnail/)){var d=document.createElement("span");try{this.setSponsoredOverlayClass(c,d),this.createSponsoredOverlay(d),b.appendChild(d),a.spnoverlay=d}catch(e){__trcError("Error while generating sponsored label",e)}}},TRCRBox.prototype.generateResponsiveOuters=function(a){if(null==this.listContainer){this.header=this.generateHeader(a);var b=doc.createElement("div");b.id=this.id.replace("trc_","outer_"),b.className="trc_rbox_outer",this.generateResponsiveRBoxDiv(b),a.appendChild(b),this.outerBox=b,this.trc.global["disclosure-enabled"]===!0?this.addTaboolaLogo():this.addTaboolaLogoNoDisclosure(),a.style.display="block"}},TRCRBox.prototype.getEventVisibility=function(a,b){(this.visible_items_collection(b)>=this.MIN_VISIBLE_ITMES||this.isVisible(this.container,b))&&this.sendVisibility(a,this.trc.global["enable-visibility-intersection-api"])},TRCRBox.prototype.generateResponsiveRBoxDiv=function(a){var b=doc.createElement("div");b.id=this.getListId(),b.className="trc_rbox_div trc_rbox_border_elm",a.appendChild(b),this.listContainer=b},TRCRBox.prototype.isVisibleWidget=function(a){return this.visible_items_collection(null)>=a||this.isVisible(this.container,null)?!0:!1},TRCRBox.prototype.sendVisibility=function(a,b){var c,d=null,e=new this.PostData,f=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride),g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=[],q=[];for(c in this.visible_boxes)this.visible_boxes.hasOwnProperty(c)&&(g.push(this.visible_boxes[c].id),i.push(this.visible_boxes[c].type));for(c in this.synd_visible_boxes)this.synd_visible_boxes.hasOwnProperty(c)&&(h.push(this.synd_visible_boxes[c].id),j.push(this.synd_visible_boxes[c].type),m.push(this.synd_visible_boxes[c].publisher));for(c in this.network_visible_boxes)this.network_visible_boxes.hasOwnProperty(c)&&(k.push(this.network_visible_boxes[c].id),l.push(this.network_visible_boxes[c].type),n.push(this.network_visible_boxes[c].publisher));for(c in this.native_visible_boxes)this.native_visible_boxes.hasOwnProperty(c)&&(o.push(this.native_visible_boxes[c].id),p.push(this.native_visible_boxes[c].type),q.push(this.native_visible_boxes[c].publisher));return g.length>0||h.length>0||k.length>0||o.length>0?(TRC.pConsole(this.mode_name,"info","sending visible event",""),e.setFullItemlist(this.getJsonTargetItemsList(this.fullEventItemsHash)),this.trc.enablePageGeometry&&this.trc.addGeometryPageData(e,this.trc.global["page-geometry-selectors"]),this.trc.enablePlacementGeometry&&this.trc.addGeometryPlacementData(e,this.container),this.sendModeDebugData&&(d=this.getModeDebugData("object")),TRC.EventsAPI.dispatchVisible(this.response.trc,this),this.sendEvent("visible",{il:g.join(","),sil:h.join(","),ilt:i.join(","),navil:o.join(","),silt:j.join(","),ntil:k.join(","),ntilt:l.join(","),navilt:p.join(","),niltp:n.join(","),siltp:m.join(","),naviltp:q.join(","),tp:f},this.util.merge(e.getAll(),d),!0),b&&!this.visibilityIntersectionApiFullRollout&&this.sendEvent("new-visible",{il:g.join(","),sil:h.join(","),ilt:i.join(","),navil:o.join(","),silt:j.join(","),ntil:k.join(","),ntilt:l.join(","),navilt:p.join(","),niltp:n.join(","),siltp:m.join(","),naviltp:q.join(","),tp:f},this.util.merge(e.getAll(),d),!0),(this.trc.global["disable-external-visibility-once"]||!this.externalVisibleSent)&&(this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList().vi),this.externalVisibleSent=!0),void this.trc.getFunction(this.mode_name,"after-visible",this.propertiesOverride,a,this)):void 0},TRCRBox.prototype.sendNewVisibility=function(){var a,b=null,c=new this.PostData,d=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride),e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[];if(!this.visibilityReported){for(a in this.new_visible_boxes)this.new_visible_boxes.hasOwnProperty(a)&&(e.push(this.new_visible_boxes[a].id),g.push(this.new_visible_boxes[a].type));for(a in this.synd_new_visible_boxes)this.synd_new_visible_boxes.hasOwnProperty(a)&&(f.push(this.synd_new_visible_boxes[a].id),h.push(this.synd_new_visible_boxes[a].type),k.push(this.synd_new_visible_boxes[a].publisher));for(a in this.network_new_visible_boxes)this.network_new_visible_boxes.hasOwnProperty(a)&&(i.push(this.network_new_visible_boxes[a].id),j.push(this.network_new_visible_boxes[a].type),l.push(this.network_new_visible_boxes[a].publisher));for(a in this.native_new_visible_boxes)this.native_new_visible_boxes.hasOwnProperty(a)&&(m.push(this.native_new_visible_boxes[a].id),n.push(this.native_new_visible_boxes[a].type),o.push(this.native_new_visible_boxes[a].publisher));return e.length>0||f.length>0||i.length>0||m.length>0?(TRC.pConsole(this.mode_name,"info","sending new visible event",""),c.setFullItemlist(this.getJsonTargetItemsList(this.fullEventItemsHash)),this.trc.enablePageGeometry&&this.trc.addGeometryPageData(c,this.trc.global["page-geometry-selectors"]),this.trc.enablePlacementGeometry&&this.trc.addGeometryPlacementData(c,this.container),this.sendModeDebugData&&(b=this.getModeDebugData("object")),TRC.EventsAPI.dispatchVisible(this.response.trc,this),this.sendEvent(this.visibilityIntersectionApiEventName,{il:e.join(","),sil:f.join(","),ilt:g.join(","),navil:m.join(","),silt:h.join(","),ntil:i.join(","),ntilt:j.join(","),navilt:n.join(","),niltp:l.join(","),siltp:k.join(","),naviltp:o.join(","),tp:d},this.util.merge(c.getAll(),b),!0),this.visibilityIntersectionApiFullRollout&&((this.trc.global["disable-external-visibility-once"]||!this.externalVisibleSent)&&(this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList().vi),this.externalVisibleSent=!0),this.trc.getFunction(this.mode_name,"after-visible",this.propertiesOverride,this.internalContainer,this)),void(this.visibilityReported=!0)):void 0}},TRCRBox.prototype.newVisibleItemsCollection=function(a,b){var c,d,e,f=0,g=b||this.boxes;for(c=0;c<g.length;c++)d=g[c].video_data||g[c],e=this.fullEventItemsHash[d["item-id"]],a||this.boxes[c].isVisible?(d["is-syndicated"]?this.pushNewVisibleItem(this.synd_new_visible_boxes,d,"is-syndicated"):d["is-in-network"]?this.pushNewVisibleItem(this.network_new_visible_boxes,d,"is-in-network"):d["is-native"]?this.pushNewVisibleItem(this.native_new_visible_boxes,d,"is-native"):this.pushNewVisibleItem(this.new_visible_boxes,d,"is-organic"),e.tids="vp",f++):"vp"!=e.tids&&(e.tids="nvp");return f},TRCRBox.prototype.pushNewVisibleItem=function(a,b,c){a[b["item-id"]]={id:b["item-id"],type:b.type,publisher:b.publisher}},TRCRBox.prototype.isNewVisibleWidget=function(){return this.newVisibleItemsCollection()>=this.MIN_VISIBLE_ITMES||this.container.isVisible},TRCRBox.prototype.enableVisibility=function(a,b,c){var d,e,f=this.sendNewVisibility.trcBind(this),g=this.isNewVisibleWidget.trcBind(this);if(TRC.tlf&&console.time("vsibility - "+this.mode_name),this.resetVisibilityData(),(this.trc.global["enable-visibility-intersection-api"]||this.visibilityIntersectionApiFullRollout)&&!this.isObsereved){d={targetElement:this.container,enableDelayedVisibilityCheck:!0,visibleWidgetPredicate:g,onTrigger:f},TRC.intersections.isInViewPort(d);for(var h=0;h<this.boxes.length;h++)e={targetElement:this.boxes[h],enableDelayedVisibilityCheck:!0,visibleWidgetPredicate:g,onTrigger:f},TRC.intersections.isInViewPort(e);this.isObsereved=!0}if(!this.visibilityIntersectionApiFullRollout)if(this.isVisibleWidget(this.MIN_VISIBLE_ITMES)){var i=arguments.callee;this.visibleTimeoutId=TRC.Timeout.set(function(){return this.visibleTimeoutId&&(TRC.Timeout.clear(this.visibleTimeoutId),this.visibleTimeoutId=null),this.isVisibleWidget(this.MIN_VISIBLE_ITMES)?void this.sendVisibility(c):void TRC.Timeout.set(i.trcBind(this,a,b,c),b)}.trcBind(this),a)}else TRC.Timeout.set(arguments.callee.trcBind(this,a,b,c),b);TRC.tlf&&console.timeEnd("vsibility - "+this.mode_name)},TRCRBox.prototype.registerVisibility=function(a,b){this.trc.visibilityScheduler||(this.trc.visibilityScheduler=new TRC.VisibilityScheduler(b,a)),this.trc.visibilityScheduler.register(this)},TRCRBox.prototype.getAllExternalTrackingURLsList=function(){var a,b=this.recommendationList;try{if(!this.externalTrackingURLsList){this.externalTrackingURLsList={};for(var c=0;b&&c<b.length;c++){a=this.getItemExternalTrackingURLsList(b[c]);for(var d in a)a.hasOwnProperty(d)&&(this.externalTrackingURLsList[d]||(this.externalTrackingURLsList[d]=[]),this.externalTrackingURLsList[d]=this.externalTrackingURLsList[d].concat(a[d]))}}return this.externalTrackingURLsList}catch(e){return __trcError("Error in TRCRBox.getAllExternalTrackingURLsList"),{}}},TRCRBox.prototype.getItemExternalTrackingURLsList=function(a){var b,c,d,e=a["item-id"],f=a.itp,g={};if(!e)return __trcDebug("Item does not have id. External tracking pixel will not be sent if defined"),[];try{if(this.externalTrackingURLsListByItemId||(this.externalTrackingURLsListByItemId={}),!this.externalTrackingURLsListByItemId[e]){for(var h=0;f&&h<f.length;h++)b=f[h],c=b.t,d=b.u,c&&d&&(g[c]||(g[c]=[]),g[c].push(d));this.externalTrackingURLsListByItemId[e]=g}return this.externalTrackingURLsListByItemId[e]}catch(i){return __trcError("Error in TRCRBox.getItemExternalTrackingURLsList"),[]}},TRCRBox.prototype.shouldUseSmartEllipsis=function(){return this.trc.global["smart-ellipsis"]&&("enableAndOverrideModeFlag"===this.trc.global["smart-ellipsis"]||this.trc.getProperty(this.mode_name,"smart-ellipsis"))},TRCRBox.prototype.getEffectiveResponsiveRule=function(){if("function"!=typeof win.matchMedia||!this.isResponsive||!this.responsiveRules)return null;for(var a=0;a<this.responsiveRules.length;a++)if(win.matchMedia("screen and (min-width: "+this.responsiveRules[a].min+"px)"+(isNaN(this.responsiveRules[a].max)?"":" and (max-width: "+this.responsiveRules[a].max+"px)")).matches)return this.responsiveRules[a];return null},TRCRBox.prototype.drawImageIframe=function(a,b,c){b=b||"",c=c&&c.replace(/&redir=[^&]*/,"")+"&redir=",a.innerHTML=b.replace("${CLICK_URL_ESC}",encodeURIComponent(c))},TRCRBox.prototype.getWidgetToFeedHelper=function(){return this.parentFeed&&this.parentFeed.widgetToFeedHelper}}(window,document),function(a,b){var c=TRC.URL=function(a){var b=TRC.text.lsplit;if(!a)throw new Error("Invalid URL!");this.href=a;var c=b(a,"#",2);return this.hash=c.length>1?"#"+c.pop():"",a=c[0],c=b(a,"?",2),this.search=c.length>1?"?"+c.pop():"",a=c[0],c=b(a,"://",2),this.protocol=c.length>1?c.shift()+":":"",a=c[0],c=b(a,"/",2),this.pathname=c.length>1?"/"+c.pop():"/",a=c[0],c=b(a,"@",2),this.auth=c.length>1?c.shift():"",a=c[0],c=b(a,":",2),this.port=c.length>1?parseInt(c.pop()):0,this.host=c[0],this},d={"http:":1,"https:":1};c.prototype.toString=function(a){return(this.host?this.protocol+"//"+(this.auth?this.auth+"@":"")+this.host+(this.port?":"+this.port:""):"")+this.pathname+this.search+(a?"":this.hash||"")},c.prototype.switchProtocol=function(a,b){var c,e=this instanceof TRC.URL?this:new TRC.URL(this);return d[a]&&(b&&"https:"==e.protocol||(e.protocol=a)),c=e.toString(!1),c.length>1?c:""},c.prototype.getParameter=function(a){var b=this instanceof TRC.URL?this:new TRC.URL(this);params=b.search.substr(1).split(/&/);for(var c=0;c<params.length;c++){var d=params[c].split(new RegExp("="),2);if(unescape(d[0])==a)return unescape(d[1])}return null}}(window,document),function(a,b,c){"use strict";var d,e={en:{adChoiceBtn:{title:"Why do I see this item?"}},de:{adChoiceBtn:{title:"Warum sehe ich diesen Artikel?"}},fr:{adChoiceBtn:{title:"Pourquoi dois-je voir cet article?"}},it:{adChoiceBtn:{title:"Perché vedo questa voce?"}},jp:{adChoiceBtn:{title:"なぜ私はこのアイテムを見ていますか？"}},pt:{adChoiceBtn:{title:"Por que eu vejo este item?"}}},f=function(a){d=e[a||"en"]||e.en,c.userAdChoice.isInitialized=!0},g=function(a){for(var b=0;b<a.boxes.length;b++)h(a.boxes[b],a.recommendationList[b])},h=function(a,e){if(!a.hasFloatingButton&&e.plink){a.hasFloatingButton=!0;var f=b.trcGetCurrentStyle(a,"position"),g=b.createElement("div"),h=b.createElement("a");f&&"static"!==f||(a.style.position="relative");var i="trc_user_adChoice_btn";("STATIC"===e["adc-type"]||c.Device.isTouchDevice)&&(i+=" trc_user_adChoice_btn_static"),c.dom.addClass(g,i),g.setAttribute("title",d.adChoiceBtn.title),h.setAttribute("href",e.plink),h.setAttribute("target","_blank"),h.appendChild(g),a.appendChild(h)}};c.userAdChoice={init:f,initForMode:g,locale:"en",isInitialized:!1}}(window,document,TRC),function(a,b){a.TRC=a.TRC||{},TRC.UserIdMerger={notifyPossibleUserChange:function(a,b,c,d){var e,f,g=a.global["rbox-enable-fix-user-id-event"];g&&(e=TRC.pageManager.getValue("user-id"),f=TRC.pageManager.getPublisherValue(b,"session-data"),this.multipleUsersExist(c,e)&&this.sendUserIdFixEvent(a,e,c,f,d))},multipleUsersExist:function(a,b){return b&&a&&b!==a},sendUserIdFixEvent:function(a,b,c,d,e){var f={time:(new Date).getTime(),fromUser:b,toUser:c,fromSD:d,toSD:e};a.sendEvent("fix-user-id",f)}}}(window,document),function(a,b,c){"use strict";var d,e,f={en:{popover:{title:{removed:"Removed!",scRemoved:"Sponsored link removed",thankYou:"Thank You!"},content:{questionnaire:{tellUsWhy:"Tell us why?",options:{uninteresting:"Uninteresting",misleading:"Misleading",offensive:"Offensive",repetitive:"Repetitive",racy:"Vulgar/Racy",other:"Other"}},approval:"We will try not to show you this content anymore."}},removeBtn:{title:"Remove this item"},undoBtn:{label:"Undo"}},de:{popover:{title:{removed:"Beitrag entfernt",scRemoved:"Gesponserter Beitrag entfernt",thankYou:"Vielen Dank"},content:{questionnaire:{tellUsWhy:"Warum wollten Sie das nicht sehen?",options:{uninteresting:"Interessiert mich nicht",misleading:"Finde ich irreführend",offensive:"Der Inhalt ist anstößig",repetitive:"Ich kenne den Beitrag schon",racy:"Vulgär/Gewagt",other:"Andere Gründe"}},approval:"Wir bemühen uns, Ihnen diesen Inhalt nicht noch einmal anzuzeigen."}},removeBtn:{title:"Ich möchte das nicht sehen"},undoBtn:{label:"Beitrag nicht entfernen"}},fr:{popover:{title:{removed:"Supprimé!",scRemoved:"Lien sponsorisé supprimé",thankYou:"Merci!"},content:{questionnaire:{tellUsWhy:"Quelle est la raison?",options:{uninteresting:"Inintéressant",misleading:"Trompeur",offensive:"Offusquant",repetitive:"Répétitif",racy:"Vulgaire/Grossier",other:"Autre"}},approval:"Nous essaierons de ne plus vous montrer ce type de contenu à l'avenir."}},removeBtn:{title:"Supprimer ce contenu"},undoBtn:{label:"Annuler"}},it:{popover:{title:{removed:"Rimosso!",scRemoved:"Link sponsorizzato rimosso",thankYou:"Grazie!"},content:{questionnaire:{tellUsWhy:"Ci puoi dire il motivo?",options:{uninteresting:"Non mi interessa",misleading:"Non è coerente",offensive:"E’ offensivo",repetitive:"E’ ripetuto",racy:"Vogare/Erotico",other:"Altro"}},approval:"Cercheremo di non mostrarti più questo contenuto"}},removeBtn:{title:"Rimuovi questo elemento"},undoBtn:{label:"Annulla"}},jp:{popover:{title:{removed:"削除されました!",scRemoved:"このコンテンツを非表示に設定しました。",thankYou:"ありがとうございました。"},content:{questionnaire:{tellUsWhy:"非表示にされた理由をお聞かせください。",options:{uninteresting:"興味がない",misleading:"紛らわしい",offensive:"不快",repetitive:"繰り返し表示される",racy:"卑猥",other:"その他"}},approval:"いただいたご意見は今後のサービス改善の参考にさせていただきます。"}},removeBtn:{title:"この項目を削除する"},undoBtn:{label:"元に戻す"}},pt:{popover:{title:{removed:"Removido!",scRemoved:"Link patrocinado removido",thankYou:"Obrigado!"},content:{questionnaire:{tellUsWhy:"Diga-nos porquê",options:{uninteresting:"Desinteressante",misleading:"Enganador",offensive:"Ofensivo",repetitive:"Repetitivo",racy:"Apelativo/ Erótico",other:"Outra razão"}},approval:"Vamos tentar não mostrar-lhe este conteúdo."}},removeBtn:{title:"Remover este item"},undoBtn:{label:"Desfazer"}},ko:{popover:{title:{removed:"삭제됨!",scRemoved:"종료된 후원콘텐츠 입니다.",thankYou:"감사합니다!"},content:{questionnaire:{tellUsWhy:"이유를 알려 주세요.",options:{uninteresting:"관심없음",misleading:"부적절함",offensive:"혐오감을 줌",repetitive:"반복됨",racy:"저속/선정적인 표현",other:"기타"}},approval:"타불라에 의해 종료된 광고 입니다."}},removeBtn:{title:"아이템 삭제"},undoBtn:{label:"돌아가기"}},"zh-CN":{popover:{title:{removed:"已移除",scRemoved:"赞助内容已移除",thankYou:"谢谢！"},content:{questionnaire:{tellUsWhy:"告诉我们原因",options:{uninteresting:"不感兴趣",misleading:"误导",offensive:"冒犯",repetitive:"重复",racy:"低俗／色情",other:"其它"
}},approval:"我们会尽量不向您展示这篇内容了"}},removeBtn:{title:"移除此项目"},undoBtn:{label:"撤消"}}},g=8e3,h=4e3,i=-1,j=function(a){var b=a.which||a.keyCode;27===b&&w()},k=function(a){var b=a.target||a.srcElement;c.dom.isAncestor(c.userX.popover,b,!0)||w()},l=function(a){var b=[];return b.push(".trc_popover_aug_container { position: static;}"),b.push(a+".trc_popover {position: absolute; font-family: Arial, Helvetica, sans-serif; font-size: 12px; line-height: 16px; color: #000000; cursor: default; position: absolute; top: 0; right: 0; z-index: 12000; width: 180px; padding: 1px; text-align: left; white-space: normal; background-color: #ffffff; border: 1px solid #ccc; border: 1px solid rgba(0, 0, 0, 0.2); -webkit-border-radius: 6px; -moz-border-radius: 6px; border-radius: 6px; -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); -webkit-background-clip: padding-box; -moz-background-clip: padding; background-clip: padding-box;-moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box;}"),b.push(a+".trc_popover iframe{width: 100%;}"),b.push(a+".trc_popover .trc_popover_arrow, .trc_popover .trc_popover_arrow:after { position: absolute; display: block; width: 0; height: 0; border-color: transparent; border-style: solid; }"),b.push(a+".trc_popover .trc_popover_arrow { border-width: 11px; }"),b.push(a+'.trc_popover .trc_popover_arrow:after { border-width: 10px; content: "";}'),b.push(a+".trc_popover.trc_bottom { margin-top: 10px; }"),b.push(a+".trc_popover.trc_bottom .trc_popover_arrow { top: -11px; right: 11px; margin-left: -11px; border-bottom-color: #999; border-bottom-color: rgba(0, 0, 0, 0.25); border-top-width: 0; }"),b.push(a+".trc_popover.trc_bottom .trc_popover_arrow:after { top: 1px; margin-left: -10px; border-bottom-color: #ffffff; border-top-width: 0; }"),c.Browser.ieUpto(8)?(b.push(a+".trc_popover_fade.trc_in { visibility: visible;}"),b.push(a+".trc_popover_fade { visibility: hidden;}"),b.push(a+'.trc_popover_fade.trc_in .trc_popover_arrow:after { content: " ";}')):(b.push(a+".trc_popover_fade.trc_in { visibility: visible; opacity: 1; filter: alpha(opacity=100); transition-delay: 0s, 0s; -moz-transition-delay: 0s, 0s; -webkit-transition-delay: 0s, 0s; -o-transition-delay: 0s, 0s; -ms-transition-delay: 0s, 0s;}"),b.push(a+".trc_popover_fade { visibility: hidden; opacity: 0; filter: alpha(opacity=0); transition: opacity 500ms 0s, visibility 0s 500ms; -webkit-transition: opacity 500ms 0s, visibility 0s 500ms;  -moz-transition: opacity 500ms 0s, visibility 0s 500ms; -o-transition: opacity 500ms 0s, visibility 0s 500ms; -ms-transition: opacity 500ms 0s, visibility 0s 500ms;}")),b.join("")},m=function(){var a=[];return a.push("html {overflow: hidden;}"),a.push("body {display: inline-block; width: 100%; margin: 0; padding: 0; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 12px; color: #000000;}"),a.push(".trc_popover_title_wrapper {padding: 8px 14px; margin: 0; font-weight: bold; background-color: #f7f7f7; border-bottom: 1px solid #ebebeb; -webkit-border-radius: 5px 5px 0 0; -moz-border-radius: 5px 5px 0 0; border-radius: 5px 5px 0 0; }"),a.push(".trc_popover_title { width: 100%; display: inline-block; vertical-align: middle;}"),a.push(".trc_popover_title_text { float: left;}"),a.push(".trc_popover_content_wrapper { display: inline-block; float: left; padding: 9px 14px; }"),a.push(".trc_popover_content { width: 100%; }"),a.push(".trc_question_container .trc_question_title { margin: 0 0 3px;}"),a.push(".trc_question_container input[type=radio] { float: left; cursor: pointer; margin: 3px 4px 0 5px;}"),a.push(".trc_popover_content_wrapper .trc_question_container label{ float: left; clear: left; width: 100%; cursor: pointer; line-height: 20px; text-align: left;}"),c.Browser.ie&&(a.push("div.trc_question_container input[type=radio] { margin: 0 2px 0 0;}"),8==c.Browser.ie&&a.push("div.trc_question_container input[type=radio] { margin-top: 1px;}")),a.join("")},n=function(e){TRC.tlf&&console.time("init userx");for(var g=N(e),h=c.dom.createAugmentingContainers(3,null),i=c.dom.generateAugmentationPrefix(h),j=0;j<h.length;j++)h[j].className="trc_popover_aug_container";c.userX.mainPopoverContainer=h[0],b.body.appendChild(c.userX.mainPopoverContainer),c.dom.injectStyle(l(i)),c.userX.popover=t(h[2]),TRC.dom.on(a,"resize",B),d=f[g]||f.en,c.userX.isInitialized=!0,TRC.tlf&&console.timeEnd("init userx")},o=function(){var a=c.userX.mainPopoverContainer;a&&a.parentNode&&a.parentNode.removeChild(a),c.userX.isInitialized=!1},p=function(a){for(var b=0;b<a.boxes.length;b++)q(a.boxes[b],a.recommendationList[b])},q=function(a,e){if(!a.hasFloatingButton){a.hasFloatingButton=!0;var f=b.trcGetCurrentStyle(a,"position"),g=b.createElement("div"),h=b.createElement("div"),i=b.createElement("div");f&&"static"!==f||(a.style.position="relative"),c.dom.addClass(g,"trc_user_exclude_btn"),g.setAttribute("title",d.removeBtn.title),g.onclick=function(b){H(b,a)}.trcBind(a.rbox),a.appendChild(g),c.dom.addClass(i,"trc_exclude_overlay trc_fade"),a.appendChild(i),c.dom.addClass(h,"trc_undo_btn"),h.innerHTML=d.undoBtn.label,h.onclick=function(b){J(b,a)}.trcBind(this),a.appendChild(h),c.dom.addClass(a,"trc_excludable")}},r=function(a){var b=document.createElement("iframe");return b.frameBorder=b.border="0",b.scrolling="no",b.src="javascript:void(0)",b.style.width="100%",a.appendChild(b)},s=function(a,b,c){var d=a.contentDocument?a.contentDocument:a.contentWindow.document;d.write(b),setTimeout(function(){try{d.close(),c&&c()}catch(a){}},0)},t=function(a){var d,e=b.createElement("div"),f=b.createElement("div");return c.dom.addClass(e,"trc_popover trc_popover_fade trc_bottom"),c.dom.addClass(f,"trc_popover_arrow"),e.appendChild(f),a.appendChild(e),e.trcContentIFrame=d=r(e),c.dom.on(b,"keyup",j),c.dom.on(b,"click",k),c.dom.on(e,"mouseover",D),c.dom.on(e,"mouseout",E),s(d,u(),function(){var a=d.contentDocument||d.contentWindow.document;a.TRC=c,c.dom.injectStyle(m(),a)}),e},u=function(){var a={open:"<script>",close:"</script>"},b=[];return b.push("<!doctype html>"),b.push("<body>"),document.domain!==location.hostname&&(b.push(a.open),b.push("document.domain='"+document.domain+"';"),b.push(a.close)),b.push(a.open),b.push("document.head = document.head || document.getElementsByTagName('head')[0];"),b.push(a.close),b.push('<div class=" trc_popover_title_wrapper ">'),b.push('<div class=" trc_popover_title " id="title">'),b.push('<span class=" trc_popover_title_text "></span>'),b.push("</div>"),b.push("</div>"),b.push('<div class=" trc_popover_content_wrapper ">'),b.push('<div id="content" class=" trc_popover_content "></div>'),b.push("</div>"),b.push("</body>"),b.join("\n")},v=function(a,b,d){var f=c.userX.popover,g=f.trcContentIFrame,h=g.contentDocument||g.contentWindow.document,i=h.getElementById("content"),j=c.Browser.ieUpto(8);a=a||f.videoCube,f.anchor&&c.dom.removeClass(f.anchor,"trc_anchor"),f.videoCube=a,g.style.height=(j?h.body.scrollHeight:h.body.offsetHeight)+"px",c.dom.addClass(f,"trc_in"),b=b||a,f.anchor=b,9==c.Browser.ie&&(f.style.display="block"),A(),D(),d&&(e=new C(w,d)),j&&(i.className=i.className),f.isVisible=!0},w=function(){var a=c.userX.popover,b=a.trcContentIFrame,d=(b.contentDocument||b.contentWindow.document).getElementById("content");c.dom.removeClass(a,"trc_in"),a.anchor&&c.dom.removeClass(a.anchor,"trc_anchor"),c.Browser.ieUpto(8)&&(d.className=d.className),9==c.Browser.ie&&(a.style.display="none"),a.isVisible=!1,D()},x=function(a){var b=c.userX.popover,d=b.trcContentIFrame,e=(d.contentDocument||d.contentWindow.document).getElementById("content");if(e.innerHTML="","string"==typeof a)return void(e.innerHTML=a);try{e.appendChild(a)}catch(f){e.innerHTML=a.outerHTML}},y=function(a){var b=c.userX.popover,d=b.trcContentIFrame,e=(d.contentDocument||d.contentWindow.document).getElementById("title");e.innerHTML=a},z=function(a){var b={},d=function(a){var b=0;if("string"==typeof a&&null!=a&&""!=a){var c=a.indexOf("px");b=c>=0?parseInt(a.substring(0,c),10):1}return b},e=function(a){var b={};if(b.left=0,b.top=0,b.right=0,b.bottom=0,window.getComputedStyle){var c=window.getComputedStyle(a,null);b.left=parseInt(c.borderLeftWidth.slice(0,-2),10),b.top=parseInt(c.borderTopWidth.slice(0,-2),10),b.right=parseInt(c.borderRightWidth.slice(0,-2),10),b.bottom=parseInt(c.borderBottomWidth.slice(0,-2),10)}else b.left=d(a.style.borderLeftWidth),b.top=d(a.style.borderTopWidth),b.right=d(a.style.borderRightWidth),b.bottom=d(a.style.borderBottomWidth);return b};if(b.x=0,b.y=0,null!==a)if(a.getBoundingClientRect){var f=document.documentElement,g=a.getBoundingClientRect(),h=c.Browser.ie,i=h||window.scrollX==f.scrollLeft||"undefined"==typeof window.scrollX?f.scrollLeft:window.scrollX,j=h||window.scrollY==f.scrollTop||"undefined"==typeof window.scrollY?f.scrollTop:window.scrollY;b.x=g.left+i,b.y=g.top+j}else{b.x=a.offsetLeft,b.y=a.offsetTop;for(var k=a.parentNode,l=a.offsetParent,m=null;null!=l;){b.x+=l.offsetLeft,b.y+=l.offsetTop;var n=l.tagName.toLowerCase();if((c.Browser.ieUpto(8)&&"table"!=n||(c.Browser.firefoxAtleast(3)||c.Browser.chrome)&&"td"==n)&&(m=e(l),b.x+=m.left,b.y+=m.top),l!=document.body&&l!=document.documentElement&&(b.x-=l.scrollLeft,b.y-=l.scrollTop),!c.Browser.ie&&!c.Browser.opera||c.Browser.ieAtleast(8))for(;l!=k&&null!==k;)b.x-=k.scrollLeft,b.y-=k.scrollTop,(c.Browser.firefoxUpto(3)||c.Browser.webkit)&&(m=e(k),b.x+=m.left,b.y+=m.top),k=k.parentNode;k=l.parentNode,l=l.offsetParent}}return b},A=function(){var a,b,d,e=c.userX.popover,f=e&&e.videoCube&&e.videoCube.rbox.findElement(function(a){return a.className.search("trc_popover_arrow")>=0},e,"div"),g=e&&e.anchor;g&&f&&(c.dom.addClass(g,"trc_anchor"),a=z(g),b=a.x-e.offsetWidth+g.offsetWidth/2+f.clientLeft+f.offsetWidth/2+1,d=a.y+g.offsetHeight,0>b?(f.style.right=e.offsetWidth-a.x-f.offsetWidth/2-g.offsetWidth/2+"px",b=0):f.style.right=null,e.style.left=b+"px",e.style.top=d+"px")},B=function(){var a=c.userX&&c.userX.popover;a&&a.isVisible&&(TRC.Browser.ieUpto(8)?c.dom.getWindowWidth()!=i&&setTimeout(function(){A(),i=c.dom.getWindowWidth()},0):A())},C=function(a,b){var c,d,e=b;this.pause=function(){clearTimeout(c),e-=new Date-d},this.resume=function(){d=new Date,c=setTimeout(a,e)},this.resume()},D=function(){e&&e.pause&&e.pause()},E=function(){e&&e.resume&&e.resume()},F=function(){var a,e,f=b.createElement("div"),g=b.createElement("div"),h=d.popover.content.questionnaire.options,i=c.Browser.ieUpto(8)?"onclick":"onchange";c.dom.addClass(f,"trc_question_container"),g.innerHTML=d.popover.content.questionnaire.tellUsWhy,c.dom.addClass(g,"trc_question_title"),f.appendChild(g);for(var j in h)h.hasOwnProperty(j)&&(a=b.createElement("label"),e=b.createElement("input"),e.setAttribute("type","radio"),e.setAttribute("name","excludeReason"),e.setAttribute("value",j),e.setAttribute(i,"this.checked = true; TRC.userX.explainExclude(event, TRC.userX.popover.videoCube, 400); "),a.appendChild(e),a.innerHTML+=h[j],f.appendChild(a));return f},G=function(a){var b=a&&a.video_data,c={};return b?(c.ii=b&&b["item-id"],c.prt="rc",b["is-syndicated"]&&(c.prt="sc"),b["is-in-network"]&&(c.prt="nt"),b["is-native"]&&(c.prt="nav"),c.p=b.publisher||"",TRC.pageManager.getValue("past-exclusions")&&(c.px=TRC.pageManager.getValue("past-exclusions")),c):(__trcWarn("No video data have been found for user exclude event request params. aborting."),!1)},H=function(a,b){a=a||event;var d=G(b);return b&&"true"==b.getAttribute("data-excluded")||!d?(__trcDebug("No recommendation to exclude. Not sending exclude event."),c.dom.stopEvent(a)):(b.rbox.sendEvent("exclude",d,null,!1),I(b),c.dom.stopEvent(a))},I=function(a){var b=a.rbox.findElement(function(a){return a.className.search("trc_undo_btn")>=0},a,"div"),e=a&&a.video_data["is-syndicated"]?d.popover.title.scRemoved:d.popover.title.removed;c.userX.popover.videoCube=a,c.pageManager.storeValue("past-exclusions",1),y(e),x(F()),v(a,b,g),a.setAttribute("data-excluded","true"),c.dom.addClass(a,"trc_user_excluded")},J=function(a,b){a=a||event;var d=G(b);return b&&b.getAttribute("data-excluded")&&d?(b.rbox.sendEvent("excludeundo",d,null,!1),K(b),c.dom.stopEvent(a)):(__trcDebug("No recommendation to unexclude. Not sending exclude-undo event."),c.dom.stopEvent(a))},K=function(a){a.removeAttribute("data-excluded"),c.dom.removeClass(a,"trc_user_excluded"),w()},L=function(a,b,c){a=a||event;var d=a.target||a.srcElement,e=G(b);D(),b&&b.getAttribute("data-excluded")&&e?(e.xr=d.getAttribute("value"),b.rbox.sendEvent("excludeexplain",e,null,!1)):__trcDebug("No recommendation exclude to explain. Not sending exclude-explain event."),c?setTimeout(function(){M()},c):M()},M=function(){var a=c.userX.popover,b=c.Browser.ieUpto(9)?0:250;w(),c.dom.addClass(a.anchor,"trc_anchor"),setTimeout(function(){y(d.popover.title.thankYou),x(d.popover.content.approval),v(a.videoCube,a.anchor,h)},b)},N=function(a){return a?"tb-jp"===a?a.substr(a.indexOf("-")+1):a:"en"};c.userX={init:n,initForMode:p,explainExclude:L,reset:o,locale:"en",isInitialized:!1}}(window,document,TRC),function(){TRC.VideoAsItemUnitLoader=function(a,b,c){this.videoConfig=a,this.options=b,this.rbox=c,this.allowExpandInViewport=TRC.util.isTrue(a.allowExpandInViewport),this.replaceWidgetItems=TRC.util.isTrue(a.replaceWidgetItems),this.disableFitToSizeForSingleColumn=TRC.util.isTrue(a.disableFitToSizeForSingleColumn)},TRC.VideoAsItemUnitLoader.prototype.loadUnit=function(videoCallbackData,videoContainer){var itemsToHide=this.getSponsoredItemsToHide(),slotItem,slotItemComputedStyle,unit;return(!this.replaceWidgetItems||itemsToHide&&itemsToHide.length)&&(slotItem=this.getSlotWidgetItem(),slotItemComputedStyle=getComputedStyle(slotItem),this.setCmTag(slotItem,slotItemComputedStyle),unit=eval(videoCallbackData.tags[0].url),this.setupVideo(unit,itemsToHide,videoContainer,slotItemComputedStyle)),unit},TRC.VideoAsItemUnitLoader.prototype.getVideoContainerSelector=function(a){var b=this.createVideoContainer(a);return b?"#"+b.id:null},TRC.VideoAsItemUnitLoader.prototype.createVideoContainer=function(a){var b=document.createElement("figure"),c=this.getSlotWidgetItem(),d=c&&c.parentNode;return c&&d&&a?(a.id?b.id=a.id:b.id=Math.floor(2147483648*Math.random()).toString(36),b.id+="-video",d.insertBefore(b,c),b):(__trcWarn("Could not create video container selector for integrated widget - nowhere to append the video container"),null)},TRC.VideoAsItemUnitLoader.prototype.setCmTag=function(a,b){var c=this.getUnitContainerStyle(a,b);window.cmTag.set("isCustomEvents",!0),window.cmTag.set("width",parseInt(c.width)),window.cmTag.set("customization",this.getUnitCustomization(a,c)),window.cmTag.set("isFitToSize",this.isFitToSizeVideo()),window.cmTag.set("openingEffect",this.videoConfig.expandEffect)},TRC.VideoAsItemUnitLoader.prototype.getUnitCustomization=function(a,b){var c,d,e,f={};return f.unitContainer=b,this.isFitToSizeVideo()||(c=a.querySelector(".thumbBlock_holder"),d=a.querySelector(".video-label-box .video-title"),e=a.querySelector(".video-label-box .branding"),f.placeHolder=getComputedStyle(c),f.titleContainer={title:getComputedStyle(d),branding:getComputedStyle(e)}),f},TRC.VideoAsItemUnitLoader.prototype.isFitToSizeVideo=function(){if(!this.disableFitToSizeForSingleColumn)return!0;var a=this.rbox.getEffectiveResponsiveRule();return!a||1!==a.cells},TRC.VideoAsItemUnitLoader.prototype.getUnitContainerStyle=function(a,b){var c=parseFloat(b.marginLeft),d=parseFloat(b.marginRight),e=parseFloat(b.width),f=this.getNumOfSlotsToOccupy(),g=Math.ceil(e*f+(c+d)*(f-1));return{width:g+"px",height:b.height}},TRC.VideoAsItemUnitLoader.prototype.setupVideo=function(a,b,c,d){var e=this.allowExpandInViewport,f=this.getSlotWidgetItem(),g=this,h=g.rbox.container;this.setVideoContainerInitialStyle(c,d),a.on("ready",function(){(e||!TRC.visibility.isInViewPortWithOffset(f,0))&&(h&&TRC.dom.addClass(h,"iw_video_frame"),g.replaceWidgetItems?b&&b.length?(parseInt(g.videoConfig.expandEffect)?a.on("renderAnimation:completed",g.displayVideoInsteadOfItems.trcBind(g,c,b)):g.displayVideoInsteadOfItems(c,b),a.play(c)):__trcDebug("Not enough sponsored items to hide - aborting integrated widget video load"):a.play(c))})},TRC.VideoAsItemUnitLoader.prototype.setVideoContainerInitialStyle=function(a,b){var c=this.getSlotWidgetItem(),d=parseFloat(b.marginLeft),e=this.getOuterRBoxComputedStyle(),f=parseFloat(e.marginLeft),g=c.offsetLeft-d-(f+d);a.style.position="absolute",a.style["float"]=b["float"],a.style.top=c.offsetTop+"px",a.style.left=g+"px",a.style.width="auto",a.style.marginLeft=b.marginLeft,a.style.marginRight=b.marginRight,a.style.marginTop=b.marginTop,a.style.marginBottom=b.marginBottom,this.replaceWidgetItems||(a.style.zIndex=90)},TRC.VideoAsItemUnitLoader.prototype.getOuterRBoxComputedStyle=function(){var a=this.rbox.outerBox;return getComputedStyle(a)},TRC.VideoAsItemUnitLoader.prototype.displayVideoInsteadOfItems=function(a,b){this.hideWidgetItems(b),a.style.position="static"},TRC.VideoAsItemUnitLoader.prototype.hideWidgetItems=function(a){for(var b=0;b<a.length;b++)a[b].style.display="none",a[b].style.visibility="hidden"},TRC.VideoAsItemUnitLoader.prototype.getSlotWidgetItem=function(){var a,b;return this.slotWidgetItem?this.slotWidgetItem:(a=this.getWidgetItems(),b=this.getInsertionPointSlotNumber()-1,isNaN(b)?void 0:this.slotWidgetItem=a[b])},TRC.VideoAsItemUnitLoader.prototype.getInsertionPointSlotNumber=function(){var a,b=this.getWidgetItems(),c=parseInt(this.videoConfig.slot);if("undefined"!=typeof this.insertionPointSlotNumber)return this.insertionPointSlotNumber;if(!isNaN(c)&&c>0){if(this.allowExpandInViewport)return this.insertionPointSlotNumber=c;for(var d=c;d<=b.length;d++)if(a=d-1,!TRC.visibility.isInViewPortWithOffset(b[a],0))return this.insertionPointSlotNumber=d}return __trcWarn("video tag loader - unknown slot ("+c+") for integrated widget implementation"),null},TRC.VideoAsItemUnitLoader.prototype.getSponsoredItemsToHide=function(){for(var a,b,c=this.getWidgetItems(),d=c.length,e=this.getInsertionPointSlotNumber(),f=this.getNumOfSlotsToOccupy(),g=[];d>=e;d--)if(a=d-1,b=c[a],b.video_data["is-syndicated"]&&null!==b.offsetParent&&(g.push(b),g.length===f))return g;return __trcWarn("video tag loader - didn't find enough sponsored items for integrated widget replacement"),null},TRC.VideoAsItemUnitLoader.prototype.getWidgetItems=function(){return this.rbox.boxes},TRC.VideoAsItemUnitLoader.prototype.getNumOfSlotsToOccupy=function(){var a,b,c,d=this.videoConfig.slotMaxSize||2,e=this.getInsertionPointSlotNumber();return"undefined"==typeof this.numOfSlotsToOccupy&&(a=this.rbox.getEffectiveResponsiveRule(),a?(b=e%a.cells||a.cells,c=a.cells-b+1,this.numOfSlotsToOccupy=Math.min(c,d)):this.numOfSlotsToOccupy=d),this.numOfSlotsToOccupy}}(),function(){TRC.InvokeVideoLoader=function(){TRC.VideoLoader=function(a,b,c,d,e){this.trcManager=a,this.videoConfig=b,this.placement=c,this.unifiedPlacement=b.unifiedPlacement,this.taboolaContainer=d,this.trcResponse=e,this.consentData=TRC.consentData||{}},TRC.VideoLoader.prototype.CALLBACK_NAME_PREFIX="videoCallback",TRC.VideoLoader.prototype.valueOrEmptyString=function(a){return null!==a&&"undefined"!=typeof a?a:""},TRC.VideoLoader.prototype.loadVideo=function(d){if(TRC.botDetected)return void __trcDebug("video loader - not loading. Bot detected.");if(this.blockVideo)return void __trcDebug("video loader - not loading. Video was blocked due to configuration.");if(TRC.Browser.ieUpto(10))return void __trcDebug("video loader - not loading. Unsupported browser.");var e=document.createElement("script"),f=this.videoConfig.scriptUrlTemplate;return TRC.pConsole("video loader","info","loading video for placement: "+this.placement),f?(e.id=this.taboolaContainer.id+"-v-loader",e.src=f.replace("{PUBLISHER_NAME}",TRC.publisherId).replace("{UNIT_TYPE}",encodeURIComponent(this.videoConfig.unitType)).replace("{UNIT_LOCATION}",encodeURIComponent(this.valueOrEmptyString(this.videoConfig.unitLocation))).replace("{SOURCE_PAGE_TYPE}",this.trcManager.getItemType()).replace("{PLACEMENT_NAME}",encodeURIComponent(this.getPlacementName())).replace("{UNIFIED_PLACEMENT_NAME}",encodeURIComponent(this.valueOrEmptyString(this.getUnifiedPlacementName()))).replace("{USER_ID}",TRC.pageManager.getValue("user-id")).replace("{CALLBACK_NAME}",this.genVideoCallback(d)).replace("{REFERRER}",encodeURIComponent(this.trcManager.getReferrer())).replace("{PAGE_URL}",encodeURIComponent(this.valueOrEmptyString(this.getItemUrlForVideo()))).replace("{CACHE_BUSTER}",this.getScriptCacheBuster()).replace("{PLATFORM}",this.valueOrEmptyString(this.videoConfig.platform)).replace("{COUNTRY}",this.valueOrEmptyString(this.videoConfig.country)).replace("{TAG_ID}",this.valueOrEmptyString(this.videoConfig.tagId)).replace("{VARIANT}",this.valueOrEmptyString(this.videoConfig.variant)).replace("{SESSION_ID}",this.valueOrEmptyString(this.trcManager.getSessionId())).replace("{SOURCE_ITEM_ID}",this.valueOrEmptyString(this.trcManager.getItemId())).replace("{VIEW_ID}",this.valueOrEmptyString(TRC.pageManager.getPageData())).replace("{GEO_LAT}",this.valueOrEmptyString(a())).replace("{GEO_ING}",this.valueOrEmptyString(b())).replace("{DEVICE_IFA}",this.valueOrEmptyString(this.trcManager.deviceId)).replace("{APP_ID}",this.valueOrEmptyString(c())).replace("{SESSION_DATA}",this.valueOrEmptyString(this.getSessionData())).replace("{REQUEST_ID}",this.valueOrEmptyString(this.getRequestId())).replace("{APP_NAME}",this.valueOrEmptyString(this.trcManager.appName)).replace("{CONSENT_DAISY_BIT}",this.valueOrEmptyString(this.consentData.consentDaisyBit)).replace("{GDPR_APPLIES}",this.valueOrEmptyString(this.consentData.gdprApplies)),this.taboolaContainer.appendChild(e)):TRC.pConsole("video loader","error","error while loading video for placement: "+this.placement+". missing script url template in response"),!0};var a=function(){return d()&&"undefined"!=typeof TRCImpl.additional_data.sdkd.loc?TRCImpl.additional_data.sdkd.loc.lat:void 0},b=function(){return d()&&"undefined"!=typeof TRCImpl.additional_data.sdkd.loc?TRCImpl.additional_data.sdkd.loc.ing:void 0},c=function(){return d()?TRCImpl.additional_data.sdkd.appid:void 0},d=function(){return"undefined"!=typeof TRCImpl.additional_data&&"undefined"!=typeof TRCImpl.additional_data.sdkd};TRC.VideoLoader.prototype.generateCallbackName=function(){var a,b=this.getCallbacksObjectKey();return TRC[b]=TRC[b]||{},a=TRC[b].auto_gen_callback_seq=TRC[b].auto_gen_callback_seq+1||1,this.CALLBACK_NAME_PREFIX+a},TRC.VideoLoader.prototype.genVideoCallback=function(){throw new Error("This is an abstract method that should be inherited.")},TRC.VideoLoader.prototype.getCallbacksObjectKey=function(){throw new Error("This is an abstract method that should be inherited.")},TRC.VideoLoader.prototype.getItemUrlForVideo=function(){var a,b,c,d,e,f=[],g="";if(a=this.trcManager.getItemUrl(),!a)return null;if(b=this.getVideoParametersToKeep(),c=this.getWindowLocationSearch(),c=c.substr(1),c.length){f=c.split("&");for(var h=0;h<f.length;h++)d=f[h].split("=")[0],d.length&&-1!==b.indexOf(d)&&-1===a.indexOf(d.concat("="))&&(g=g.concat(d,"=",f[h].split("=")[1],"&"));g.length>=1&&(g=g.substring(0,g.length-1),e=-1===a.indexOf("?")?"?":"&",g=e.concat(g)),a=a.concat(g)}return a},TRC.VideoLoader.prototype.getSessionData=function(){return this.trcResponse["session-data"]},TRC.VideoLoader.prototype.getRequestId=function(){return this.trcResponse.req},TRC.VideoLoader.prototype.getPlacementName=function(){return this.videoConfig.placement||this.placement},TRC.VideoLoader.prototype.getUnifiedPlacementName=function(){return this.unifiedPlacement},TRC.VideoLoader.prototype.getScriptCacheBuster=function(){return(new Date).getTime().toString()},TRC.VideoLoader.prototype.getWindowLocationSearch=function(){return window.location.search||""},TRC.VideoLoader.prototype.getVideoParametersToKeep=function(){return this.trcManager.global["video-tag-keep-url-params"]||["vstaging","keyword","customTB"]}}}(),function(){TRC.InvokeVideoTagLoader=function(){TRC.VideoTagLoader=function(a,b,c,d,e){this.blockVideo=a.blockVideoLoader||!a["before-video-load"](),this.blockVideo||(TRC.VideoLoader.call(this,a,b,c.placement,c.container,e),this.options=c,this.videoConfig=b,this.unitLoader=this.initUnitLoader(b,c,d,a))},TRC.VideoTagLoader.prototype=__trcObjectCreate(TRC.VideoLoader.prototype),TRC.VideoTagLoader.prototype.LOCATION_TYPES={ABOVE:"above",BELOW:"below",ITEM:"item",STANDALONE:"standalone",SINGLE_MANAGER:"singleManager"},TRC.VideoTagLoader.prototype.initUnitLoader=function(a,b,c,d){switch(a.position){case this.LOCATION_TYPES.STANDALONE:return new TRC.StandaloneVideoUnitLoader(a,b);case this.LOCATION_TYPES.ITEM:return new TRC.VideoAsItemUnitLoader(a,b,c);case this.LOCATION_TYPES.SINGLE_MANAGER:return new TRC.SingleVideoManagerUnitLoader(a,d);default:return new TRC.DefaultVideoUnitLoader(a)}},TRC.VideoTagLoader.prototype.setGlobalUnitParams=function(a){this.trcManager&&this.trcManager.framework&&"mobile-sdk"===this.trcManager.framework&&(a.set("isSDK",!0),a.set("widgetPlacement",this.getPlacementName())),TRC.filledImpressions=TRC.filledImpressions||[],a.on("filledImpression",function(a){TRC.filledImpressions.push(a)})},TRC.VideoTagLoader.prototype.getCallbacksObjectKey=function(){return"videoTagCallbacks"},TRC.VideoTagLoader.prototype.genVideoCallback=function(){var a=this.generateCallbackName(),b=this;return TRC.videoTagCallbacks[a]=function(a){var c,d;a=a||{},a.tags&&a.tags[0]&&(c=a.tags[0].unitBootSrc||b.videoConfig.unitBootSrc,d=document.createElement("script"),d.src=c,d.onload=function(){var c,d,e=b.videoConfig.containerSelector||b.unitLoader.getVideoContainerSelector(b.taboolaContainer);e&&(window.cmTag.set("parentSelector",e),c=document.querySelector(e)),d=b.unitLoader.loadUnit(a,c),d&&b.setGlobalUnitParams(d)},document.getElementsByTagName("head")[0].appendChild(d))},"TRC."+this.getCallbacksObjectKey()+"."+a}}}(),function(a,b){TRC.VisibilityScheduler=function(b,c){function d(){TRC.tlf&&console.time("visibility cycle");var b;for(var c in h)h[c].isVisibleWidget(h[c].MIN_VISIBLE_ITMES)&&(b=!0,i[c]=h[c]);b&&a.setTimeout(e.trcBind(this),l),m>0&&a.setTimeout(d.trcBind(this),k),TRC.tlf&&console.timeEnd("visibility cycle")}function e(){TRC.tlf&&console.time("visibility verification");var b;for(var c in i)b=i[c],b.isVisibleWidget(b.MIN_VISIBLE_ITMES)&&(a.setTimeout(b.sendVisibility.trcBind(b),0),g(c)),f(c);TRC.tlf&&console.timeEnd("visibility verification")}function f(a){delete i[a]}function g(a){delete h[a],m--}var h={},i={},j=0,k=b||1e3,l=c||500,m=0;this.register=function(b){h[++j]=b,m++,1===m&&a.setTimeout(d.trcBind(this),k)}}}(window,document),TRC.visibility=TRC.visibility||{},TRC.visibility=function(a,b){function c(a){var b=TRC.dom.getViewportVerticalRange(),c=TRC.dom.getElementRect(a);return c.top<0?Math.max(c.top,c.bottom):b.max-c.top-b.min}function d(a){var b=TRC.dom.getViewportHorizontalRange(),c=TRC.dom.getElementRect(a);return c.left<0?Math.max(c.left,c.right):b.max-c.left-b.min}return modObject={getViewPortOffsets:function(a){var b=c(a),e=d(a);return{verticalOffset:b,horizontalOffset:e}},getMinViewPortOffsets:function(a){var b=this.getViewPortOffsets(a);return b.verticalOffset<0&&b.horizontalOffset<0?Math.max(b.verticalOffset,b.horizontalOffset):Math.min(b.verticalOffset,b.horizontalOffset)},isInViewPortWithOffset:function(a,b){var c=this.getMinViewPortOffsets(a);return b=b||0,!(b>c)}},a._trcIsUTactive&&(modObject.getVerticalVPShift=c,modObject.getHorizontalVPShift=d),modObject}(window,document),function(){function a(a,b,c){this.parentFeed=a,this.trcManager=b,this.hasFeedUI=c,this.setUpFeedContainer(),TRC.listen("trcResponseHandled",this.setContentTypeCssClass.trcBind(this))}var b="trc-w2f",c="trc-w2f-no-ui";a.prototype.setUpFeedContainer=function(){var a=this.parentFeed.container;a.className+=" "+b,this.hasFeedUI===!1&&(a.className+=" "+c)},a.prototype.setContentTypeCssClass=function(){var a=this.parentFeed.container,b=a.querySelectorAll(".videoCube.syndicatedItem").length,c=a.querySelectorAll(".videoCube:not(.syndicatedItem)").length,d="sponsored";c&&(d=b?"hybrid":"organic"),this.parentFeed.container.className=this.parentFeed.container.className.replace(/\btrc-content-(hybrid|sponsored|organic)\b/g,""),this.parentFeed.container.className+=" trc-content-"+d},a.prototype.addHeaderToFeed=function(a){this.parentFeed.header.appendChild(a),this.header=a},a.prototype.addFooterToFeed=function(a){this.footer=document.createElement("div"),this.footer.className="tbl-feed-footer",this.footer.appendChild(a),this.parentFeed.container.appendChild(this.footer)},a.prototype.getHeader=function(){return this.header},a.prototype.getFooter=function(){return this.footer},a.prototype.applyWidgetHeaderAndFooterStylesToFeed=function(a){if(!this.headerAndFooterStylesApplied){var c=this.trcManager.isThinLoaderMode(),d=new RegExp("(\\."+a+")([^{]+\\.(trc_rbox_header|logoDiv|trc-widget-footer))","g"),e=new RegExp("^(?![^}]*."+b+"[^{]+).*$","gm");TRC.dom.injectedStyles.forEach(function(a){if(d.test(a.innerText)){var f=a.innerText.replace(d,"."+b+"$2");f=f.replace(/\n/g,""),f=f.replace(/}/g,"}\n"),f=f.replace(e,""),f=f.replace(/\n/g,""),TRC.dom.injectStyle(f,document,c)}}),this.headerAndFooterStylesApplied=!0}},TRC.WidgetToFeedHelper=a}(),function(a){a.TRC=a.TRC||{};var b=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},c=function(){return!0},d=function(a,c,d,e){var f=a+"/"+encodeURIComponent(d||TRC.publisherId)+"/log/3/"+c;return e&&(f+="?"+b(e)),f},e=function(b,d){var e=a.XDomainRequest||a.XMLHttpRequest,f=new e;return f.open(b,d),f.onload=c,f.onerror=c,f.ontimeout=c,f.onprogress=c,f.withCredentials=!0,f};TRC.TRCLogger={post:function(a,c,f,g){var h=d(a,c,g),i=e("POST",h);i.setRequestHeader&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(b(f))},get:function(a,b,c,f){var g=d(a,b,f,c),h=e("GET",g);h.send()}}}(window),function(win,doc){function invokeInheritedModules(){TRC.InvokeVideoLoader(),TRC.InvokePVideoLoader(),TRC.InvokeVideoTagLoader()}function initRboxMapping(){TRC.rboxUsageOn&&(TRC.rboxMap=new TRC.RboxMap,TRC.rboxMap.disabled&&(TRC.rboxMap=null))}TRC.performance&&TRC.performance.mark("4.0");var protocol=TRC.PROTOCOL,getParameter=TRC.URL.prototype.getParameter,taboolaConsole=getParameter.call(location.href,"trc_console");win.trc_debug_level=getParameter.call(location.href,"taboola-debug"),TRC.tlf=!!getParameter.call(location.href,"taboola-perf"),TRC.taboola_yield_report=!!getParameter.call(location.href,"taboola-yield-report"),taboolaConsole&&"yes"===taboolaConsole.toLowerCase()&&(TRC.taboolaConsole=!0,TRC.Manager.prototype.loadExternal("http://c2.taboola.com/console/console_loader.js","js")),isNaN(parseInt(win.trc_debug_level))&&(trc_debug_level=1),TRC.callbacks={cdnRecommendations:function(a){TRC.dispatch("staticRecommendationsReceived",{response:a})},mute:function(){var a,b=TRCImpl.boxes;if(TRCImpl.preloadRequestLoader=null,TRC.Timeout.reset(),b)for(a in b)b[a].request=null;TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.mute),TRC.pConsole("warning - mute!","warn","server returned mute","")}},TRC.trc_drawRBox=!1,TRC.listOrigin=new TRC.ListOriginBuilder,TRC.baseDomain=TRC.baseDomain||protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/",TRC.prototype=TRC.prototype||{},TRC.Interval=function(){var intervals={};return{set:function(callback,interval){var aArgs=Array.prototype.slice.call(arguments,2),intervalId=win.setInterval(function(){callback instanceof Function?callback.apply(null,aArgs):eval(callback)},interval);return intervals[intervalId.toString()]=1,intervalId},clear:function(a){a&&(win.clearInterval(a),delete intervals[a.toString()])},reset:function(){for(intervalId in intervals)win.clearInterval(intervalId),delete intervals[intervalId.toString()]}}}(),TRC.Timeout=function(){var a={};return{set:function(b,c){var d=win.setTimeout(function(){
delete a[d.toString()],b()},c);return a[d.toString()]=1,d},clear:function(b){b&&(win.clearTimeout(b),delete a[b.toString()])},reset:function(){var b;for(b in a)win.clearTimeout(b),delete a[b.toString()]}}}(),TRC.trcReady=function(){var a;return function(){try{TRC.pConsole("page","debug","libtrc : calling TRC.ready",""),invokeInheritedModules(),TRC.implLoaded=!0,initRboxMapping();var b=TRC.ready({style:".trc_rbox_container{direction:ltr;text-align:left}.trc_rbox_header{border-style:solid;border-width:0;overflow:hidden;vertical-align:middle}.trc_rbox_container .trc_img{display:inline-block!important}.trc_rbox_header_icon_div{display:table-cell;vertical-align:baseline}.trc_rbox_header .trc_rbox_header_icon_div .trc_rbox_header_icon_img{vertical-align:middle;width:auto}.trc_rbox_header_icon_span{display:inline-table}.in_trc_header{position:relative!important;float:right;margin:0}#trc_rbox_css_loaded{overflow:hidden;width:0;height:0}.trc_rbox{margin-top:0}.trc_rbox_div{margin:0 0 3px;direction:ltr;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:auto;position:relative;width:auto;*width:auto;border:solid #CCC 1px}.loading-animation span{display:block}.videoCube{zoom:1;cursor:pointer;float:none;overflow:hidden;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}div.videoCube:hover,.videoCube_hover{cursor:pointer}.videoCube span.video-title:hover,.videoCube_hover span.video-title{text-decoration:underline}.videoCube a{text-decoration:none;border:0;color:#000;cursor:pointer}.videoCube a:hover,.videoCube_hover a,.videoCube a:link,.videoCube a{text-decoration:none!important;outline:0}.videoCube a .thumbBlock{float:left;display:block;overflow:hidden!important}.videoCube a img,.videoCube img{border:0;_border:0;display:block;margin:0;height:auto;width:auto}.videoCube .video-label{display:block;overflow:hidden}.videoCube .video-label{width:auto!important;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.videoCube .video-label-box.label-box-with-title-icon{display:table}.video-icon-container{float:left;display:table-cell;vertical-align:baseline}.video-icon-img{vertical-align:middle}.videoCube .video-duration a{}.videoCube .video-duration{height:0;float:left;position:relative;color:#fff;font-size:11px}.videoCube .video-duration dt{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background-color:#000;opacity:.6;filter:alpha(opacity=60)}.videoCube span.video-label.trc_ellipsis{position:relative;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}.videoCube span.video-label.trc-smart-ellipsis{position:relative;overflow:hidden}.videoCube span.video-label.trc-smart-ellipsis ins{display:inline-block;text-decoration:inherit}.videoCube span.video-label.trc-smart-ellipsis ins.lastLineEllipsis{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal}.sponsored-default .video-description{font-weight:400;color:#000;font-size:9px;max-height:22px;*height:22px;overflow:hidden;line-height:9px}.video-duration.video-duration-detail div{color:#fff}.sponsored-default{background-color:#f7f6c6;padding-bottom:0!important}.trc_rbox .sponsored{position:relative;display:block;overflow:visible;height:auto;width:auto;padding-right:0;text-align:right;font-size:9px}.sponsored-url{white-space:nowrap;float:left;overflow:hidden;width:98%;height:auto;margin-top:0;margin-left:1px;padding-bottom:2px;color:green;font-size:9px;text-decoration:underline}.sponsored-default .video-title{height:26px;font-size:11px;line-height:13px;max-height:26px;*height:26px}.sponsored-default .thumbBlock img{}.sponsored-default .thumbBlock{text-align:center;background-color:transparent}.trc_rbox_div{height:410px}.videoCube{direction:ltr;font-size:11px;margin:0;color:#000;border-width:0}.videoCube.vertical:first-child{border-top:0;margin-top:0}.videoCube.horizontal:first-child{border-left:0;margin-left:0}.trc_rbox .trc_rbox_div .videoCube.vertical{_margin-top:expression(this.previousSibling==null?'0':'default')}.trc_rbox .trc_rbox_div .videoCube.horizontal{_margin-left:expression(this.previousSibling==null?'0':'default')}div.videoCube:hover,.videoCube_hover{background-color:#EBF0FF;color:#000}.videoCube .thumbBlock{margin-right:5px;margin-left:1px;border-style:solid}.videoCube a img,.videoCube img{border-color:#ececec}.videoCube .overlayImg{}.videoCube .video-label-box{margin-left:81px}.videoCube .video-label dt{font-weight:700}.videoCube .video-title{height:auto;margin-bottom:3px;white-space:normal}.videoCube .trc_inline_detail_spacer{display:inline-block;white-space:pre}.sponsored-default{padding-bottom:0}.loading-animation{font-family:sans;font-size:1.5em;text-align:center;color:gray;height:100%}.trc_rbox_header{font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:700;text-decoration:none;color:#000}.trc_header_right_part{position:absolute;left:50%;top:0}.branding_div{overflow:visible;float:right}.branding_div img{height:20px}.trc_pager div{float:left;font-family:sans;cursor:pointer;margin-left:2px;margin-right:2px}.trc_pager_prev,.trc_pager_next{}.trc_pager{font-weight:400}.trc_pager_pages{display:block!important}.trc_related_container div.horizontal{float:left;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}.trc_related_container div.vertical{}.trc_related_container DIV.videoCube.thumbnail_top .thumbBlock,.trc_related_container DIV.videoCube.thumbnail_bottom .thumbBlock{float:none}@media screen and (-webkit-min-device-pixel-ratio:0){.sponsored-url{margin-top:2px}}.vidiscovery-note{display:none}.pager_disabled{cursor:auto}.videoCube .thumbBlock .trc_sponsored_overlay_base{display:block;width:auto;margin-left:0;position:absolute;color:#fff!important}.videoCube .thumbBlock .trc_sponsored_overlay{filter:alpha(opacity=60);opacity:.6;display:block;position:absolute;*left:0}.videoCube .thumbBlock .trc_sponsored_overlay_base .sponsored{position:relative;display:block;overflow:visible;width:auto;text-align:center;padding:0 5px;margin-top:0}.videoCube .thumbBlock .trc_sponsored_overlay_base.round .trc_sponsored_overlay{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px}.videoCube .thumbBlock .trc_sponsored_overlay_base.round{margin-left:4px}.thumbnail-emblem{background-color:transparent;background-repeat:no-repeat;position:absolute;z-index:50}.playerCube .thumbnail-overlay,.videoCube .thumbnail-overlay{position:absolute;background-color:transparent;background-repeat:no-repeat;z-index:50}.videoCube:hover .thumbnail-overlay,.videoCube_hover .thumbnail-overlay{position:absolute;background-color:transparent;background-repeat:no-repeat;z-index:50}.thumbnail_bottom{padding-bottom:8px}.trc_pager_next img,trc_pager_next pager_disabled img,trc_pager_next:hover img{-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;-ms-filter:\"FlipH\"}.trc_cover_iframe{position:absolute;z-index:100000;top:0;left:0;background:#000;opacity:.4;filter:alpha(opacity=40);border:0}.trc_lightbox_base{z-index:100001;position:fixed}.trc_lightbox_overlay{background-color:transparent;position:absolute;z-index:100002}.trc_lightbox_transparent{position:absolute;z-index:100003}#trc_lightbox_header{font-family:\"Trebuchet MS\",Helvetica,sans-serif}.trc_whitebox{background-color:#fff;position:relative;z-index:100004;padding:0 20px 20px;margin:0 auto;border:2px solid #000;-moz-box-shadow:3px 3px 20px #000;-webkit-box-shadow:3px 3px 20px #000;box-shadow:3px 3px 20px #000;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.trc_whiteboxCloseButton{width:32px;height:32px;border:0;position:absolute;right:-16px;top:-14px;cursor:pointer;background:url(//cdn.taboola.com/taboola-generic/close.png) no-repeat top left transparent;color:#fff;color:transparent;font-size:0}.trc_related_container .logoDiv{font-family:Arial,Helvetica,sans-serif;white-space:nowrap;font-size:9px}.trc_related_container .logoDiv a{font-size:9px;text-decoration:none!important;color:#000;margin-right:1px;vertical-align:text-bottom}.logoDiv a span:hover{text-decoration:underline}.trc_rbox_header .logoDiv{font-size:1em}.trc_related_container .vertical-start-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-down.png);height:10px;width:auto;position:absolute;z-index:5}.trc_related_container .vertical-end-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-up.png);height:10px;width:auto;position:absolute;z-index:5}.trc_related_container .horizontal-start-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-right.png);height:auto;width:10px;position:absolute;z-index:5}.trc_related_container .horizontal-end-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-left.png);height:auto;width:10px;position:absolute;z-index:5}.trc_rbox_container.trc_expandable{overflow:hidden;max-height:0;transition-property:max-height;-webkit-transition-property:max-height;-moz-transition-property:max-height;-o-transition-property:max-height;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0)}DIV.trc_autoplaylist-box{margin:6px auto 0;border:0;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;padding:4px;font-family:\"Trebuchet MS\",Helvetica,sans-serif;width:320px;background:#191919;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#191919', endColorstr='#393939');-ms-filter:\"progid:DXImageTransform.Microsoft.gradient(startColorstr=#191919, endColorstr=#393939)\";background:-webkit-gradient(linear,left top,left bottom,from(#191919),to(#393939));background:-moz-linear-gradient(top,#191919,#393939);background:linear-gradient(top,#191919,#393939)}DIV.trc_autoplaylist-box .trc-next-up-header{font-size:14px;color:#CCC;float:left;line-height:31px;margin:0 4px 0 6px;overflow:hidden;white-space:nowrap}DIV.trc_autoplaylist-box .trc-next-up-countdown{color:#fff;font-weight:700;font-size:15px;padding-left:4px}DIV.trc_autoplaylist-box .nextup{cursor:pointer}DIV.trc_autoplaylist-box .nextup .thumbblock{border:solid #FEFEFE 1px;margin-right:10px}DIV.trc_autoplaylist-box:hover .nextup .thumbblock SPAN.thumbnail-overlay{background-image:url(//cdn.taboola.com/taboola-generic/lightbox-overlay.png)}DIV.trc_autoplaylist-box .nextup .video-label-box{color:#fff;font-weight:700;font-size:12px;line-height:14px}.trc-syndication-link{text-decoration:none;color:inherit}.playerCube{width:100%;height:100%;position:relative;cursor:pointer}.playerCube .thumbnail-overlay{width:100%;height:100%;top:0;left:0;position:absolute}.trc_related_container .whatsThisSyndicated{position:absolute;cursor:pointer}.trc_related_container .whatsThisSyndicated.a-bottom-right,.trc_related_container .static-text.bottom-right{bottom:0;right:0}.trc_related_container .whatsThisSyndicated.a-top-right,.trc_related_container .static-text.top-right{top:0;right:0}.trc_related_container .whatsThisSyndicated.a-bottom-left,.trc_related_container .static-text.bottom-left{bottom:0;left:0}.trc_related_container .whatsThisSyndicated.a-top-left,.trc_related_container .static-text.top-left{top:0;left:0}.trc_related_container .videoCube .thumbBlock .branding{position:absolute;bottom:0;z-index:1;width:100%;margin:0;padding:5px 0;text-align:center}.syndicatedItem .branding{margin:0}.trc_related_container .videoCube .thumbBlock .static-text{position:absolute;z-index:1;margin:0;padding:5px;background-color:#000;color:#fff;display:block;font-family:Arial,Helvetica,sans-serif;font-size:10px;font-weight:400;text-align:left;text-decoration:none;opacity:.7}.trc_related_container .static-text.top{width:100%;top:0;padding:5px 0}.trc_related_container .static-text.bottom{width:100%;bottom:0;padding:2px 0}.trc-inplayer-rbox{background:#333;background:rgba(30,30,30,.9);*background:#333;bottom:0;position:absolute;height:300px;text-align:center}.trc-inplayer-rbox .trc_rbox_container{margin:50px auto 0;width:640px}.trc_rbox.trc-auto-size{width:100%;height:100%}.videoCube.thumbnail_under .thumbBlock{margin-left:0;margin-right:0}.videoCube.thumbnail_under .label-box-overlay{width:100%;height:100%;position:absolute;background:#000;opacity:.75;filter:alpha(opacity=75);top:0;_display:none}.videoCube.thumbnail_under .video-labels-anchor{width:100%;height:auto;position:absolute;z-index:1;left:0;bottom:0;min-height:2.58em;max-height:2.58em;padding-top:2px;padding-bottom:2px;_background-color:#CECECE;-webkit-transition:all .2s linear;-moz-transition:all .2s linear;-ms-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear;line-height:1.25em}.videoCube.thumbnail_under .video-labels-anchor span.video-title,.videoCube.thumbnail_under .video-labels-anchor span.branding{position:relative;z-index:1;padding:0 3px;margin:0}.videoCube.thumbnail_under .video-title{min-height:2.58em}.videoCube.thumbnail_under:hover .video-labels-anchor{opacity:1;max-height:6.45em}.trc-auto-size .trc_rbox_outer .trc_rbox_div{height:auto;width:auto}.trc-auto-size .trc_rbox_div .videoCube{height:auto}.trc-auto-size .trc_rbox_div .videoCube.trc-first-recommendation{margin-top:0}.trc_rbox .trc_rbox_outer .trc_rbox_div .videoCube.trc-first-in-row{margin-left:0}.trc_elastic .trc_rbox{width:auto}.trc_elastic .videoCube{overflow:hidden}.trc_elastic .videoCube .thumbBlock{display:block;background-color:transparent;background-position:center center;background-repeat:no-repeat;background-size:cover;position:absolute;display:inline-block;top:0;right:0;bottom:0;left:0;margin-left:0;margin-right:0}.trc_elastic .thumbBlock_holder{position:relative;width:100%}.trc_elastic .thumbnail_start .thumbBlock_holder{float:left;margin-right:10px}.trc_elastic .thumbnail_start.item-has-pre-label .thumbBlock_holder{margin-right:0}.trc_elastic .videoCube_aspect{width:1px}.trc_elastic .trc_rbox .trc_rbox_div{height:auto}.trc_elastic .thumbnail_start .trc-pre-label{float:left;padding-right:10px}.trc_elastic .thumbnail_start.trc-split-label .trc-main-label{float:left;padding-left:10px}.trc_elastic .thumbnail_start .video-label-box{box-sizing:border-box}.trc_elastic .video-label-box{display:block}.trc_user_adChoice_btn{background:url(//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg) no-repeat scroll 0 0 rgba(255,255,255,1);border-radius:0 0 0 5px;width:16px;height:16px;position:absolute;right:0;top:0;z-index:9000;cursor:pointer;border-width:2px 0 2px 4px;border-style:solid;border-color:#fff;opacity:.7;background-size:contain;visibility:hidden}.videoCube:hover .trc_user_adChoice_btn,.videoCube_hover .trc_user_adChoice_btn{visibility:visible}.videoCube .trc_user_adChoice_btn_static{visibility:visible}.trc_user_exclude_btn{background:url(//cdn.taboola.com/libtrc/static/thumbnails/f539211219b796ffbb49949997c764f0.png) no-repeat scroll 0 0 transparent;width:12px;height:12px;position:absolute;right:2px;top:2px;z-index:9000;cursor:pointer;visibility:hidden}.trc_undo_btn{font-family:Arial,Helvetica,sans-serif;font-size:11px;line-height:14px;font-weight:400;color:#36C;text-decoration:underline;cursor:pointer;position:absolute;right:2px;top:2px;padding:0 1px;z-index:11000;visibility:hidden}.videoCube:hover .trc_user_exclude_btn,.videoCube_hover .trc_user_exclude_btn,.trc_user_excluded.videoCube:hover .trc_undo_btn,.trc_user_excluded.videoCube_hover .trc_undo_btn,.trc_undo_btn.trc_anchor{visibility:visible}.videoCube.trc_user_excluded .trc_user_exclude_btn{visibility:hidden}.trc_fade{opacity:0;filter:alpha(opacity=0);visibility:hidden;transition:opacity 500ms 0s,visibility 0s 500ms;-webkit-transition:opacity 500ms 0s,visibility 0s 500ms;-moz-transition:opacity 500ms 0s,visibility 0s 500ms;-o-transition:opacity 500ms 0s,visibility 0s 500ms;-ms-transition:opacity 500ms 0s,visibility 0s 500ms}.trc_fade.trc_in,.trc_user_excluded .trc_exclude_overlay{visibility:visible;opacity:1;filter:alpha(opacity=100);transition-delay:0s,0s;-moz-transition-delay:0s,0s;-webkit-transition-delay:0s,0s;-o-transition-delay:0s,0s;-ms-transition-delay:0s,0s}.trc_excludable .trc_exclude_overlay{position:absolute;z-index:10000;top:0;left:0;width:100%;height:100%;cursor:default;background-color:#fff}.videoCube.trc_excludable .trc_exclude_overlay.trc_fade{filter:alpha(opacity=80)\\9}.videoCube.trc_user_excluded .trc_exclude_overlay{visibility:visible;opacity:.8;filter:alpha(opacity=80)}.videoCube.trc_user_excluded .thumbBlock{filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0' /></filter></svg>#grayscale\");filter:gray;-webkit-filter:grayscale(100%)}.videoCube.trc_user_excluded:hover a .video-label-box .video-title,.videoCube_hover.trc_user_excluded a .video-label-box .video-title{text-decoration:none}.videoCube.trc_user_excluded a .video-label-box *,.videoCube.trc_user_excluded:hover a .video-label-box *,.videoCube_hover.trc_user_excluded a .video-label-box *{color:#000;overflow:hidden;-webkit-transition:color 500ms 0s;-moz-transition:color 500ms 0s;-ms-transition:color 500ms 0s;-o-transition:color 500ms 0s;transition:color 500ms 0s}.videoCube.trc_user_excluded a .video-label-box .label-box-overlay{background-color:#BBB;-webkit-transition:background-color 500ms 0s;-moz-transition:background-color 500ms 0s;-ms-transition:background-color 500ms 0s;-o-transition:background-color 500ms 0s;transition:background-color 500ms 0s}.videoCube.thumbnail_under.trc_user_excluded .video-labels-anchor,.videoCube.thumbnail_under.trc_user_excluded:hover .video-labels-anchor{max-height:none;-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none;transition:none}.trc_related_container .trc_clearer{clear:both;height:0;overflow:hidden;font-size:0;line-height:0;visibility:hidden}.link-adc{float:right!important}.trc-widget-footer .logoDiv{line-height:normal;padding-bottom:5px}.trc-widget-footer .link-adc a .trc_adc_wrapper,.trc_header_ext .link-adc a .trc_adc_wrapper{height:12px;width:18px;display:inline-block;padding-left:1px;margin-bottom:2px}.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_s_logo,.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_b_logo{vertical-align:middle;height:15px;display:inline-block;margin-top:-1px}.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_s_logo{width:12px;height:14px;background:url(//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg) no-repeat;background-size:contain;vertical-align:middle}.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_b_logo{width:77px;background:#fff url(//cdn.taboola.com/libtrc/static/thumbnails/0781f9c5a8637d1e162874f157460048.png) no-repeat!important;right:-1px;display:none;position:absolute}.trc_mobile_disclosure_link,.trc_mobile_attribution_link,.trc_mobile_adc_link{display:none}.trc_desktop_disclosure_link,.trc_desktop_attribution_link,.trc_desktop_adc_link{display:inline}@media screen and (max-width:767px){.trc_mobile_disclosure_link{display:inline}.trc_mobile_attribution_link{display:inline}.trc_mobile_adc_link{display:inline}.trc_desktop_disclosure_link{display:none}.trc_desktop_attribution_link{display:none}.trc_desktop_adc_link{display:none}}.trc_in_iframe .trc_mobile_attribution_link,.trc_in_iframe .trc_mobile_disclosure_link{display:inline}.trc_in_iframe .trc_desktop_attribution_link,.trc_in_iframe .trc_desktop_disclosure_link{display:none}.trc_related_container .logoDiv,.trc_related_container .trc_header_ext .logoDiv{float:right}.trc_related_container .logoDiv+.logoDiv{margin-right:2px}.trc_related_container .attribution-disclosure-link-sponsored,.trc_related_container .attribution-disclosure-link-hybrid{display:none}.trc_related_container .trc-content-sponsored .attribution-disclosure-link-sponsored,.trc-w2f.trc-content-sponsored .attribution-disclosure-link-sponsored{display:block}.trc_related_container .trc-content-hybrid .attribution-disclosure-link-hybrid,.trc-w2f.trc-content-hybrid .attribution-disclosure-link-hybrid{display:block}.trc_related_container .trc-widget-footer:hover a span,.trc_related_container .trc_header_ext:hover a span{text-decoration:underline!important}.logoDiv a span.trc_logos_v_align{display:inline-block!important;font-size:15px!important;line-height:1em!important;width:0!important}.trc_related_container .trc_header_ext:hover a span.trc_logos_v_align,.trc_related_container .trc_header_ext:hover a span.trc_adc_wrapper,.trc_related_container .trc-widget-footer:hover a span.trc_logos_v_align,.trc_related_container .trc-widget-footer:hover a span.trc_adc_wrapper{text-decoration:none!important}.trc_related_container{clear:both}.tbl-loading-spinner{width:100%;height:40px;background:url(//cdn.taboola.com/static/91/91a25024-792d-4b52-84e6-ad1478c3f552.gif) center center no-repeat;background-size:40px}.tbl-hidden{display:none!important}.tbl-batch-anchor{width:100%;height:1px}.iw_video_frame .trc_rbox_div{overflow:hidden}.trc-w2f .trc_rbox .trc_rbox_header,.trc-w2f .trc_rbox .trc-widget-footer{display:none!important}"});if(b.global["smart-ellipsis"]&&!TRC.ellipsisListening&&(TRC.listen("ellipsis",b._repaintEllipsis.trcBind(b)),TRC.listen("allrender",b._repaintEllipsis.trcBind(b)),TRC.listen("batchrender",b._repaintEllipsis.trcBind(b)),TRC.ellipsisListening=!0),!b.invisible)return;TRC.dom.onReady(function(){a?(a.innerHTML="",a.style.display="none"):(a=doc.createElement("div"),doc.body.appendChild(a).style.display="none"),b.internalDrawRBox({mode:"rbox-tracking",container:a})})}catch(c){__trcError("Error in libtrc initialization",c)}}}(),TRC.pConsole("","time","impl file loaded",""),TRC.utm.push((new Date).getTime()-TRC.utm.start),TRC.tlf&&console.timeStamp("call trcReady"),TRC.trcReady()}(window,document);